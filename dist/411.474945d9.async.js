"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[411],{76202:function(q,A,e){var O=e(99426),_=e(99960),Z=e(75271),t=e(50241),j=e(52676),M=["fieldProps","min","proFieldProps","max"],P=function(i,c){var l=i.fieldProps,U=i.min,p=i.proFieldProps,T=i.max,m=(0,_.Z)(i,M);return(0,j.jsx)(t.Z,(0,O.Z)({valueType:"digit",fieldProps:(0,O.Z)({min:U,max:T},l),ref:c,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:p},m))},s=Z.forwardRef(P);A.Z=s},36798:function(q,A,e){var O=e(99426),_=e(99960),Z=e(67867),t=e(14218),j=e(75271),M=e(5079),P=e(50241),s=e(52676),D=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],i=j.forwardRef(function(p,T){var m=p.fieldProps,u=p.options,E=p.radioType,n=p.layout,o=p.proFieldProps,g=p.valueEnum,a=(0,_.Z)(p,D);return(0,s.jsx)(P.Z,(0,O.Z)((0,O.Z)({valueType:E==="button"?"radioButton":"radio",ref:T,valueEnum:(0,Z.h)(g,void 0)},a),{},{fieldProps:(0,O.Z)({options:u,layout:n},m),proFieldProps:o,filedConfig:{customLightMode:!0}}))}),c=j.forwardRef(function(p,T){var m=p.fieldProps,u=p.children;return(0,s.jsx)(t.ZP,(0,O.Z)((0,O.Z)({},m),{},{ref:T,children:u}))}),l=(0,M.G)(c,{valuePropName:"checked",ignoreWidth:!0}),U=l;U.Group=i,U.Button=t.ZP.Button,U.displayName="ProFormComponent",A.Z=U},59472:function(q,A,e){var O=e(99426),_=e(99960),Z=e(67867),t=e(75271),j=e(61511),M=e(50241),P=e(52676),s=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],D=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],i=function(m,u){var E=m.fieldProps,n=m.children,o=m.params,g=m.proFieldProps,a=m.mode,J=m.valueEnum,S=m.request,F=m.showSearch,f=m.options,C=(0,_.Z)(m,s),W=(0,t.useContext)(j.Z);return(0,P.jsx)(M.Z,(0,O.Z)((0,O.Z)({valueEnum:(0,Z.h)(J),request:S,params:o,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,O.Z)({options:f,mode:a,showSearch:F,getPopupContainer:W.getPopupContainer},E),ref:u,proFieldProps:g},C),{},{children:n}))},c=t.forwardRef(function(T,m){var u=T.fieldProps,E=T.children,n=T.params,o=T.proFieldProps,g=T.mode,a=T.valueEnum,J=T.request,S=T.options,F=(0,_.Z)(T,D),f=(0,O.Z)({options:S,mode:g||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},u),C=(0,t.useContext)(j.Z);return(0,P.jsx)(M.Z,(0,O.Z)((0,O.Z)({valueEnum:(0,Z.h)(a),request:J,params:n,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,O.Z)({getPopupContainer:C.getPopupContainer},f),ref:m,proFieldProps:o},F),{},{children:E}))}),l=t.forwardRef(i),U=c,p=l;p.SearchSelect=U,p.displayName="ProFormComponent",A.Z=p},33615:function(q,A,e){var O=e(99426),_=e(99960),Z=e(75271),t=e(50241),j=e(52676),M=["fieldProps","proFieldProps"],P=function(D,i){var c=D.fieldProps,l=D.proFieldProps,U=(0,_.Z)(D,M);return(0,j.jsx)(t.Z,(0,O.Z)({ref:i,valueType:"textarea",fieldProps:c,proFieldProps:l},U))};A.Z=Z.forwardRef(P)},68834:function(q,A,e){var O=e(75611),_=e(99426),Z=e(99960),t=e(93954),j=e(2336),M=e(21263),P=e(18051),s=e(75271),D=e(50241),i=e(52676),c=["fieldProps","proFieldProps"],l=["fieldProps","proFieldProps"],U="text",p=function(n){var o=n.fieldProps,g=n.proFieldProps,a=(0,Z.Z)(n,c);return(0,i.jsx)(D.Z,(0,_.Z)({valueType:U,fieldProps:o,filedConfig:{valueType:U},proFieldProps:g},a))},T=function(n){var o=(0,t.Z)(n.open||!1,{value:n.open,onChange:n.onOpenChange}),g=(0,O.Z)(o,2),a=g[0],J=g[1];return(0,i.jsx)(j.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(F){var f,C=F.getFieldValue(n.name||[]);return(0,i.jsx)(M.Z,(0,_.Z)((0,_.Z)({getPopupContainer:function(r){return r&&r.parentNode?r.parentNode:r},onOpenChange:function(r){return J(r)},content:(0,i.jsxs)("div",{style:{padding:"4px 0"},children:[(f=n.statusRender)===null||f===void 0?void 0:f.call(n,C),n.strengthText?(0,i.jsx)("div",{style:{marginTop:10},children:(0,i.jsx)("span",{children:n.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},n.popoverProps),{},{open:a,children:n.children}))}})},m=function(n){var o=n.fieldProps,g=n.proFieldProps,a=(0,Z.Z)(n,l),J=(0,s.useState)(!1),S=(0,O.Z)(J,2),F=S[0],f=S[1];return o!=null&&o.statusRender&&a.name?(0,i.jsx)(T,{name:a.name,statusRender:o==null?void 0:o.statusRender,popoverProps:o==null?void 0:o.popoverProps,strengthText:o==null?void 0:o.strengthText,open:F,onOpenChange:f,children:(0,i.jsx)("div",{children:(0,i.jsx)(D.Z,(0,_.Z)({valueType:"password",fieldProps:(0,_.Z)((0,_.Z)({},(0,P.Z)(o,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(W){var r;o==null||(r=o.onBlur)===null||r===void 0||r.call(o,W),f(!1)},onClick:function(W){var r;o==null||(r=o.onClick)===null||r===void 0||r.call(o,W),f(!0)}}),proFieldProps:g,filedConfig:{valueType:U}},a))})}):(0,i.jsx)(D.Z,(0,_.Z)({valueType:"password",fieldProps:o,proFieldProps:g,filedConfig:{valueType:U}},a))},u=p;u.Password=m,u.displayName="ProFormComponent",A.Z=u},41009:function(q,A,e){e.d(A,{iK:function(){return O},zc:function(){return Z}});var O=function(t){return t[t.SUCCESS=200]="SUCCESS",t[t.ERROR=-1]="ERROR",t[t.TIMEOUT=401]="TIMEOUT",t.TYPE="success",t}({}),_=function(t){return t.GET="GET",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE",t}({}),Z=function(t){return t.JSON="application/json;charset=UTF-8",t.FORM_URLENCODED="application/x-www-form-urlencoded;charset=UTF-8",t.FORM_DATA="multipart/form-data;charset=UTF-8",t}({})},71756:function(q,A,e){e.r(A);var O=e(90228),_=e.n(O),Z=e(26068),t=e.n(Z),j=e(87999),M=e.n(j),P=e(48305),s=e.n(P),D=e(75271),i=e(2336),c=e(51162),l=e(57355),U=e(23102),p=e(76985),T=e(24783),m=e(61032),u=e(54733),E=e(76202),n=e(68834),o=e(59472),g=e(52676),a=function(S){var F=i.Z.useForm(),f=s()(F,1),C=f[0],W=S.deptTree,r=S.deptCheckedKeys,L=(0,D.useState)("1"),d=s()(L,2),h=d[0],b=d[1],me=(0,D.useState)([]),le=s()(me,2),de=le[0],ee=le[1],ue=(0,D.useState)([]),Q=s()(ue,2),N=Q[0],K=Q[1],$=(0,D.useState)(!0),I=s()($,2),re=I[0],v=I[1];(0,D.useEffect)(function(){ee(r),C.resetFields(),C.setFieldsValue({roleId:S.values.roleId,roleName:S.values.roleName,roleKey:S.values.roleKey,dataScope:S.values.dataScope}),b(S.values.dataScope)},[S.values]);var k=(0,m.useIntl)(),ve=function(){C.submit()},ie=function(){S.onCancel()},De=function(){var V=M()(_()().mark(function z(X){return _()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:S.onSubmit(t()(t()({},X),{},{deptIds:de}));case 1:case"end":return ne.stop()}},z)}));return function(X){return V.apply(this,arguments)}}(),fe=function V(z){var X=[];return z.forEach(function(oe){X.push(oe.key),oe.children&&(X=X.concat(V(oe.children)))}),X},he=fe(W),ce=function(z){z.includes("deptExpand")?K(he):K([]),z.includes("deptNodeAll")?ee(he):ee([]),z.includes("deptCheckStrictly")?v(!1):v(!0)};return(0,g.jsx)(c.Z,{width:640,title:k.formatMessage({id:"system.user.auth.role",defaultMessage:"\u5206\u914D\u89D2\u8272"}),open:S.open,destroyOnClose:!0,forceRender:!0,onOk:ve,onCancel:ie,children:(0,g.jsxs)(u.A,{form:C,grid:!0,layout:"horizontal",onFinish:De,initialValues:{login_password:"",confirm_password:""},children:[(0,g.jsx)(E.Z,{name:"roleId",label:k.formatMessage({id:"system.role.role_id",defaultMessage:"\u89D2\u8272\u7F16\u53F7"}),colProps:{md:12,xl:12},placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u53F7",disabled:!0,hidden:!0,rules:[{required:!1,message:(0,g.jsx)(m.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u53F7\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u53F7\uFF01"})}]}),(0,g.jsx)(n.Z,{name:"roleName",label:k.formatMessage({id:"system.role.role_name",defaultMessage:"\u89D2\u8272\u540D\u79F0"}),disabled:!0,placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",rules:[{required:!0,message:(0,g.jsx)(m.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0\uFF01"})}]}),(0,g.jsx)(n.Z,{name:"roleKey",label:k.formatMessage({id:"system.role.role_key",defaultMessage:"\u6743\u9650\u5B57\u7B26\u4E32"}),disabled:!0,placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32",rules:[{required:!0,message:(0,g.jsx)(m.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32\uFF01"})}]}),(0,g.jsx)(o.Z,{name:"dataScope",label:"\u6743\u9650\u8303\u56F4",initialValue:"1",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6027\u522B",valueEnum:{1:"\u5168\u90E8\u6570\u636E\u6743\u9650",2:"\u81EA\u5B9A\u6570\u636E\u6743\u9650",3:"\u672C\u90E8\u95E8\u6570\u636E\u6743\u9650",4:"\u672C\u90E8\u95E8\u53CA\u4EE5\u4E0B\u6570\u636E\u6743\u9650",5:"\u4EC5\u672C\u4EBA\u6570\u636E\u6743\u9650"},rules:[{required:!0}],fieldProps:{onChange:function(z){b(z)}}}),(0,g.jsx)(u.A.Item,{name:"deptIds",label:k.formatMessage({id:"system.role.auth",defaultMessage:"\u83DC\u5355\u6743\u9650"}),required:h==="1",hidden:h!=="1",children:(0,g.jsxs)(l.Z,{gutter:[16,16],children:[(0,g.jsx)(U.Z,{md:24,children:(0,g.jsx)(p.Z.Group,{options:[{label:"\u5C55\u5F00/\u6298\u53E0",value:"deptExpand"},{label:"\u5168\u9009/\u5168\u4E0D\u9009",value:"deptNodeAll"}],onChange:ce})}),(0,g.jsx)(U.Z,{md:24,children:(0,g.jsx)(T.Z,{checkable:!0,checkStrictly:re,expandedKeys:N,treeData:W,checkedKeys:de,defaultCheckedKeys:r,onCheck:function(z,X){return console.log(z,X),ee(re?z.checked:{checked:z,halfChecked:X.halfCheckedKeys})},onExpand:function(z){K(N.concat(z))}})})]})})]})})};A.default=a},92221:function(q,A,e){e.r(A);var O=e(90228),_=e.n(O),Z=e(26068),t=e.n(Z),j=e(87999),M=e.n(j),P=e(48305),s=e.n(P),D=e(75271),i=e(54733),c=e(76202),l=e(68834),U=e(36798),p=e(33615),T=e(2336),m=e(51162),u=e(61032),E=e(24783),n=e(52676),o=function(a){var J=T.Z.useForm(),S=s()(J,1),F=S[0],f=a.menuTree,C=a.menuCheckedKeys,W=(0,D.useState)([]),r=s()(W,2),L=r[0],d=r[1],h=a.statusOptions;(0,D.useEffect)(function(){F.resetFields(),F.setFieldsValue({roleId:a.values.roleId,roleName:a.values.roleName,roleKey:a.values.roleKey,roleSort:a.values.roleSort,dataScope:a.values.dataScope,menuCheckStrictly:a.values.menuCheckStrictly,deptCheckStrictly:a.values.deptCheckStrictly,status:a.values.status,delFlag:a.values.delFlag,createBy:a.values.createBy,createTime:a.values.createTime,updateBy:a.values.updateBy,updateTime:a.values.updateTime,remark:a.values.remark})},[F,a]);var b=(0,u.useIntl)(),me=function(){F.submit()},le=function(){a.onCancel()},de=function(){var ee=M()(_()().mark(function ue(Q){return _()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:a.onSubmit(t()(t()({},Q),{},{menuIds:L}));case 1:case"end":return K.stop()}},ue)}));return function(Q){return ee.apply(this,arguments)}}();return(0,n.jsx)(m.Z,{width:640,title:b.formatMessage({id:"system.role.title",defaultMessage:"\u7F16\u8F91\u89D2\u8272\u4FE1\u606F"}),forceRender:!0,open:a.open,destroyOnClose:!0,onOk:me,onCancel:le,children:(0,n.jsxs)(i.A,{form:F,grid:!0,layout:"horizontal",submitter:!1,onFinish:de,children:[(0,n.jsx)(c.Z,{name:"roleId",label:b.formatMessage({id:"system.role.role_id",defaultMessage:"\u89D2\u8272\u7F16\u53F7"}),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u53F7",disabled:!0,hidden:!0,rules:[{required:!1,message:(0,n.jsx)(u.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u53F7\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u53F7\uFF01"})}]}),(0,n.jsx)(l.Z,{name:"roleName",label:b.formatMessage({id:"system.role.role_name",defaultMessage:"\u89D2\u8272\u540D\u79F0"}),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",rules:[{required:!0,message:(0,n.jsx)(u.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0\uFF01"})}]}),(0,n.jsx)(l.Z,{name:"roleKey",label:b.formatMessage({id:"system.role.role_key",defaultMessage:"\u6743\u9650\u5B57\u7B26\u4E32"}),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32",rules:[{required:!0,message:(0,n.jsx)(u.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32\uFF01"})}]}),(0,n.jsx)(c.Z,{name:"roleSort",label:b.formatMessage({id:"system.role.role_sort",defaultMessage:"\u663E\u793A\u987A\u5E8F"}),placeholder:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F",rules:[{required:!0,message:(0,n.jsx)(u.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F\uFF01"})}],fieldProps:{defaultValue:1}}),(0,n.jsx)(U.Z.Group,{valueEnum:h,name:"status",label:b.formatMessage({id:"system.role.status",defaultMessage:"\u89D2\u8272\u72B6\u6001"}),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u72B6\u6001",rules:[{required:!0,message:(0,n.jsx)(u.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u72B6\u6001\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u72B6\u6001\uFF01"})}],fieldProps:{defaultValue:"0"}}),(0,n.jsx)(i.A.Item,{name:"menuIds",label:b.formatMessage({id:"system.role.auth",defaultMessage:"\u83DC\u5355\u6743\u9650"}),children:(0,n.jsx)(E.Z,{checkable:!0,multiple:!0,checkStrictly:!0,defaultExpandAll:!1,treeData:f,defaultCheckedKeys:C,onCheck:function(ue){return d(ue.checked)}})}),(0,n.jsx)(p.Z,{name:"remark",label:b.formatMessage({id:"system.role.remark",defaultMessage:"\u5907\u6CE8"}),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",rules:[{required:!1,message:(0,n.jsx)(u.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u5907\u6CE8\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u5907\u6CE8\uFF01"})}]})]})})};A.default=o},94965:function(q,A,e){e.r(A);var O=e(48305),_=e.n(O),Z=e(90228),t=e.n(Z),j=e(26068),M=e.n(j),P=e(87999),s=e.n(P),D=e(75271),i=e(61032),c=e(51162),l=e(79654),U=e(10189),p=e(48625),T=e(53683),m=e(63710),u=e(73323),E=e(90607),n=e(49026),o=e(23299),g=e(86743),a=e(13143),J=e(16621),S=e(20860),F=e(91825),f=e(92221),C=e(65269),W=e(71980),r=e(75334),L=e(71756),d=e(52676),h=c.Z.confirm,b=function(){var Q=s()(t()().mark(function N(K){var $,I;return t()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return $=l.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),v.prev=1,v.next=4,(0,F._d)(M()({},K));case 4:return I=v.sent,$(),I.code===200?l.ZP.success("\u6DFB\u52A0\u6210\u529F"):l.ZP.error(I.msg),v.abrupt("return",!0);case 10:return v.prev=10,v.t0=v.catch(1),$(),l.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),v.abrupt("return",!1);case 15:case"end":return v.stop()}},N,null,[[1,10]])}));return function(K){return Q.apply(this,arguments)}}(),me=function(){var Q=s()(t()().mark(function N(K){var $,I;return t()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return $=l.ZP.loading("\u6B63\u5728\u66F4\u65B0"),v.prev=1,v.next=4,(0,F.ul)(K);case 4:return I=v.sent,$(),I.code===200?l.ZP.success("\u66F4\u65B0\u6210\u529F"):l.ZP.error(I.msg),v.abrupt("return",!0);case 10:return v.prev=10,v.t0=v.catch(1),$(),l.ZP.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),v.abrupt("return",!1);case 15:case"end":return v.stop()}},N,null,[[1,10]])}));return function(K){return Q.apply(this,arguments)}}(),le=function(){var Q=s()(t()().mark(function N(K){var $,I;return t()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if($=l.ZP.loading("\u6B63\u5728\u5220\u9664"),K){v.next=3;break}return v.abrupt("return",!0);case 3:return v.prev=3,v.next=6,(0,F.l5)(K.map(function(k){return k.roleId}).join(","));case 6:return I=v.sent,$(),I.code===200?l.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):l.ZP.error(I.msg),v.abrupt("return",!0);case 12:return v.prev=12,v.t0=v.catch(3),$(),l.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),v.abrupt("return",!1);case 17:case"end":return v.stop()}},N,null,[[3,12]])}));return function(K){return Q.apply(this,arguments)}}(),de=function(){var Q=s()(t()().mark(function N(K){var $,I,re;return t()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if($=l.ZP.loading("\u6B63\u5728\u5220\u9664"),K){k.next=3;break}return k.abrupt("return",!0);case 3:return k.prev=3,I=[K.roleId],k.next=7,(0,F.l5)(I.join(","));case 7:return re=k.sent,$(),re.code===200?l.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):l.ZP.error(re.msg),k.abrupt("return",!0);case 13:return k.prev=13,k.t0=k.catch(3),$(),l.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),k.abrupt("return",!1);case 18:case"end":return k.stop()}},N,null,[[3,13]])}));return function(K){return Q.apply(this,arguments)}}(),ee=function(){var Q=s()(t()().mark(function N(){var K;return t()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return K=l.ZP.loading("\u6B63\u5728\u5BFC\u51FA"),I.prev=1,I.next=4,(0,F.Lp)();case 4:return K(),l.ZP.success("\u5BFC\u51FA\u6210\u529F"),I.abrupt("return",!0);case 9:return I.prev=9,I.t0=I.catch(1),K(),l.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),I.abrupt("return",!1);case 14:case"end":return I.stop()}},N,null,[[1,9]])}));return function(){return Q.apply(this,arguments)}}(),ue=function(){var N=l.ZP.useMessage(),K=_()(N,2),$=K[0],I=K[1],re=(0,D.useRef)(),v=(0,D.useState)(!1),k=_()(v,2),ve=k[0],ie=k[1],De=(0,D.useState)(!1),fe=_()(De,2),he=fe[0],ce=fe[1],V=(0,D.useRef)(),z=(0,D.useState)(),X=_()(z,2),oe=X[0],ne=X[1],Be=(0,D.useState)([]),Oe=_()(Be,2),ae=Oe[0],pe=Oe[1],be=(0,D.useState)(),Ce=_()(be,2),Te=Ce[0],Me=Ce[1],Ie=(0,D.useState)([]),Fe=_()(Ie,2),ye=Fe[0],ge=Fe[1],je=(0,D.useState)([]),Ue=_()(je,2),Re=Ue[0],Ae=Ue[1],_e=(0,i.useAccess)(),Le=(0,i.useIntl)();(0,D.useEffect)(function(){(0,C.pX)("sys_normal_disable").then(function(Y){Ae(Y)})},[]);var Ke=function(x){var R=x.status==="1"?"\u542F\u7528":"\u505C\u7528",B=x.status==="0"?"1":"0";h({title:"\u786E\u8BA4\u8981".concat(R).concat(x.roleName,"\u89D2\u8272\u5417\uFF1F"),onOk:function(){(0,F.sp)(x.roleId,B).then(function(y){if(y.code===200){var G;$.open({type:"success",content:"\u66F4\u65B0\u6210\u529F\uFF01"}),(G=V.current)===null||G===void 0||G.reload()}else $.open({type:"error",content:"\u66F4\u65B0\u5931\u8D25\uFF01"})})}})},xe=[{title:(0,d.jsx)(i.FormattedMessage,{id:"system.role.role_id",defaultMessage:"\u89D2\u8272\u7F16\u53F7"}),dataIndex:"roleId",valueType:"text"},{title:(0,d.jsx)(i.FormattedMessage,{id:"system.role.role_name",defaultMessage:"\u89D2\u8272\u540D\u79F0"}),dataIndex:"roleName",valueType:"text"},{title:(0,d.jsx)(i.FormattedMessage,{id:"system.role.role_key",defaultMessage:"\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32"}),dataIndex:"roleKey",valueType:"text",hideInSearch:!0},{title:(0,d.jsx)(i.FormattedMessage,{id:"system.role.role_sort",defaultMessage:"\u663E\u793A\u987A\u5E8F"}),dataIndex:"roleSort",valueType:"text",hideInSearch:!0},{title:(0,d.jsx)(i.FormattedMessage,{id:"system.role.status",defaultMessage:"\u89D2\u8272\u72B6\u6001"}),dataIndex:"status",valueType:"select",valueEnum:Re,render:function(x,R){return(0,d.jsx)(U.Z,{checked:R.status==="0",checkedChildren:"\u6B63\u5E38",unCheckedChildren:"\u505C\u7528",defaultChecked:!0,onClick:function(){return Ke(R)}})}},{title:(0,d.jsx)(i.FormattedMessage,{id:"system.role.create_time",defaultMessage:"\u521B\u5EFA\u65F6\u95F4"}),dataIndex:"createTime",valueType:"dateRange",render:function(x,R){return(0,d.jsxs)("span",{children:[R.createTime.toString()," "]})},search:{transform:function(x){return{"params[beginTime]":x[0],"params[endTime]":x[1]}}}},{title:(0,d.jsx)(i.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",width:"220px",valueType:"option",render:function(x,R){return[(0,d.jsx)(p.ZP,{type:"link",size:"small",icon:(0,d.jsx)(o.Z,{}),hidden:!_e.hasPerms("system:role:edit"),onClick:function(){(0,F.mj)(R.roleId).then(function(w){if(w.code===200){var y=(0,W.lt)(w.data.menus);Me(y),ge(w.data.checkedKeys.map(function(G){return"".concat(G)})),ie(!0),ne(R)}else l.ZP.warning(w.msg)})},children:"\u7F16\u8F91"},"edit"),(0,d.jsx)(p.ZP,{type:"link",size:"small",danger:!0,icon:(0,d.jsx)(g.Z,{}),hidden:!_e.hasPerms("system:role:remove"),onClick:s()(t()().mark(function B(){return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:c.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u9879\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var G=s()(t()().mark(function se(){var Pe;return t()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,de(R);case 2:Pe=Ee.sent,Pe&&V.current&&V.current.reload();case 4:case"end":return Ee.stop()}},se)}));function H(){return G.apply(this,arguments)}return H}()});case 1:case"end":return y.stop()}},B)})),children:"\u5220\u9664"},"batchRemove"),(0,d.jsx)(T.Z,{menu:{items:[{label:"\u6570\u636E\u6743\u9650",key:"datascope",disabled:!_e.hasPerms("system:role:edit")},{label:"\u5206\u914D\u7528\u6237",key:"authUser",disabled:!_e.hasPerms("system:role:edit")}],onClick:function(w){var y=w.key;y==="datascope"?((0,F.cY)(R.roleId).then(function(G){G.code===200&&(ne(G.data),ce(!0))}),(0,F.Vl)(R.roleId).then(function(G){G.code===200&&(Me((0,W.lt)(G.data.depts)),ge(G.data.checkedKeys.map(function(H){return"".concat(H)})))})):y==="authUser"&&i.history.push("/system/role-auth/user/".concat(R.roleId))}},children:(0,d.jsx)("a",{onClick:function(w){return w.preventDefault()},children:(0,d.jsxs)(m.Z,{children:[(0,d.jsx)(a.Z,{}),"\u66F4\u591A"]})})},"more")]}}];return(0,d.jsxs)(u._z,{children:[I,(0,d.jsx)("div",{style:{width:"100%",float:"right"},children:(0,d.jsx)(E.Z,{headerTitle:Le.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u4FE1\u606F"}),actionRef:V,formRef:re,rowKey:"roleId",search:{labelWidth:120},toolBarRender:function(){return[(0,d.jsxs)(p.ZP,{type:"primary",hidden:!_e.hasPerms("system:role:add"),onClick:s()(t()().mark(function x(){return t()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:(0,r.Th)().then(function(w){if(w.code===200){var y=(0,W.lt)(w.data);Me(y),ge([]),ie(!0),ne(void 0)}else l.ZP.warning(w.msg)});case 1:case"end":return B.stop()}},x)})),children:[(0,d.jsx)(J.Z,{})," ",(0,d.jsx)(i.FormattedMessage,{id:"pages.searchTable.new",defaultMessage:"\u65B0\u5EFA"})]},"add"),(0,d.jsxs)(p.ZP,{type:"primary",danger:!0,hidden:(ae==null?void 0:ae.length)===0||!_e.hasPerms("system:role:remove"),onClick:s()(t()().mark(function x(){return t()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:c.Z.confirm({title:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u6240\u9009\u6570\u636E\u9879?",icon:(0,d.jsx)(S.Z,{}),content:"\u8BF7\u8C28\u614E\u64CD\u4F5C",onOk:function(){return s()(t()().mark(function y(){var G,H,se;return t()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,le(ae);case 2:G=te.sent,G&&(pe([]),(H=V.current)===null||H===void 0||(se=H.reloadAndRest)===null||se===void 0||se.call(H));case 4:case"end":return te.stop()}},y)}))()}});case 1:case"end":return B.stop()}},x)})),children:[(0,d.jsx)(g.Z,{}),(0,d.jsx)(i.FormattedMessage,{id:"pages.searchTable.delete",defaultMessage:"\u5220\u9664"})]},"remove"),(0,d.jsxs)(p.ZP,{type:"primary",hidden:!_e.hasPerms("system:role:export"),onClick:s()(t()().mark(function x(){return t()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:ee();case 1:case"end":return B.stop()}},x)})),children:[(0,d.jsx)(J.Z,{}),(0,d.jsx)(i.FormattedMessage,{id:"pages.searchTable.export",defaultMessage:"\u5BFC\u51FA"})]},"export")]},request:function(x){return(0,F.JV)(M()({},x)).then(function(R){var B={data:R.rows,total:R.total,success:!0};return B})},columns:xe,rowSelection:{onChange:function(x,R){return pe(R)}},pagination:{pageSize:10,showTotal:function(x){return"\u5171 ".concat(x," \u6761")}}},"roleList")}),(ae==null?void 0:ae.length)>0&&(0,d.jsx)(n.S,{extra:(0,d.jsxs)("div",{children:[(0,d.jsx)(i.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"\u5DF2\u9009\u62E9"}),(0,d.jsx)("a",{style:{fontWeight:600},children:ae.length}),(0,d.jsx)(i.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:(0,d.jsx)(p.ZP,{danger:!0,hidden:!_e.hasPerms("system:role:del"),onClick:s()(t()().mark(function Y(){return t()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:c.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u9879\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var B=s()(t()().mark(function y(){var G,H,se;return t()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,le(ae);case 2:G=te.sent,G&&(pe([]),(H=V.current)===null||H===void 0||(se=H.reloadAndRest)===null||se===void 0||se.call(H));case 4:case"end":return te.stop()}},y)}));function w(){return B.apply(this,arguments)}return w}()});case 1:case"end":return R.stop()}},Y)})),children:(0,d.jsx)(i.FormattedMessage,{id:"pages.searchTable.batchDeletion",defaultMessage:"\u6279\u91CF\u5220\u9664"})},"remove")}),(0,d.jsx)(f.default,{onSubmit:function(){var Y=s()(t()().mark(function x(R){var B;return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(B=!1,!R.roleId){y.next=7;break}return y.next=4,me(M()({},R));case 4:B=y.sent,y.next=10;break;case 7:return y.next=9,b(M()({},R));case 9:B=y.sent;case 10:B&&(ie(!1),ne(void 0),V.current&&V.current.reload());case 11:case"end":return y.stop()}},x)}));return function(x){return Y.apply(this,arguments)}}(),onCancel:function(){ie(!1),ne(void 0)},open:ve,values:oe||{},menuTree:Te||[],menuCheckedKeys:ye||[],statusOptions:Re}),(0,d.jsx)(L.default,{onSubmit:function(){var Y=s()(t()().mark(function x(R){var B;return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,F.tm)(R);case 2:B=y.sent,B&&(ce(!1),pe([]),ne(void 0),l.ZP.success("\u914D\u7F6E\u6210\u529F\u3002"));case 4:case"end":return y.stop()}},x)}));return function(x){return Y.apply(this,arguments)}}(),onCancel:function(){ce(!1),pe([]),ne(void 0)},open:he,values:oe||{},deptTree:Te||[],deptCheckedKeys:ye||[]})]})};A.default=ue},65269:function(q,A,e){e.d(A,{Hr:function(){return T},QK:function(){return S},Vd:function(){return l},a7:function(){return n},jK:function(){return i},n2:function(){return J},oH:function(){return u},pX:function(){return U},sF:function(){return g}});var O=e(26068),_=e.n(O),Z=e(90228),t=e.n(Z),j=e(87999),M=e.n(j),P=e(61032),s=e(41009),D=e(18606);function i(f){return c.apply(this,arguments)}function c(){return c=M()(t()().mark(function f(C){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,P.request)("/api/system/dict/type/list",{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"},params:C}));case 1:case"end":return r.stop()}},f)})),c.apply(this,arguments)}function l(f){return(0,P.request)("/api/system/dict/type/".concat(f),{method:"GET"})}function U(f,C){return p.apply(this,arguments)}function p(){return p=M()(t()().mark(function f(C,W){var r,L;return t()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return console.log("getDictValueEnum resp:",C),h.next=3,(0,P.request)("/api/system/dict/data/type/".concat(C),{method:"GET"});case 3:if(r=h.sent,console.log("getDictValueEnum resp:",C,r),r.code!==s.iK.SUCCESS){h.next=11;break}return L={},r.data.forEach(function(b){L[b.dictValue]={text:b.dictLabel,label:b.dictLabel,value:W?Number(b.dictValue):b.dictValue,key:b.dictCode,listClass:b.listClass,status:b.listClass}}),h.abrupt("return",L);case 11:return h.abrupt("return",{});case 12:case"end":return h.stop()}},f)})),p.apply(this,arguments)}function T(f,C){return m.apply(this,arguments)}function m(){return m=M()(t()().mark(function f(C,W){var r,L;return t()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,P.request)("/api/system/dict/data/type/".concat(C),{method:"GET"});case 2:if(r=h.sent,r.code!==200){h.next=6;break}return L=r.data.map(function(b){return{text:b.dictLabel,label:b.dictLabel,value:W?Number(b.dictValue):b.dictValue,key:b.dictCode,listClass:b.listClass,status:b.listClass}}),h.abrupt("return",L);case 6:return h.abrupt("return",[]);case 7:case"end":return h.stop()}},f)})),m.apply(this,arguments)}function u(f){return E.apply(this,arguments)}function E(){return E=M()(t()().mark(function f(C){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,P.request)("/api/system/dict/type",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},data:C}));case 1:case"end":return r.stop()}},f)})),E.apply(this,arguments)}function n(f){return o.apply(this,arguments)}function o(){return o=M()(t()().mark(function f(C){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,P.request)("/api/system/dict/type",{method:"PUT",headers:{"Content-Type":"application/json;charset=UTF-8"},data:C}));case 1:case"end":return r.stop()}},f)})),o.apply(this,arguments)}function g(f){return a.apply(this,arguments)}function a(){return a=M()(t()().mark(function f(C){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,P.request)("/api/system/dict/type/".concat(C),{method:"DELETE"}));case 1:case"end":return r.stop()}},f)})),a.apply(this,arguments)}function J(f){return(0,D.su)("/api/system/dict/type/export",{params:f},"dict_type_".concat(new Date().getTime(),".xlsx"))}function S(f){return F.apply(this,arguments)}function F(){return F=M()(t()().mark(function f(C){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,P.request)("/api/system/dict/type/optionselect",{params:_()({},C),method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return r.stop()}},f)})),F.apply(this,arguments)}},75334:function(q,A,e){e.d(A,{Af:function(){return s},Th:function(){return u},_8:function(){return U},bL:function(){return c},n_:function(){return T}});var O=e(90228),_=e.n(O),Z=e(26068),t=e.n(Z),j=e(87999),M=e.n(j),P=e(61032);function s(E,n){return D.apply(this,arguments)}function D(){return D=M()(_()().mark(function E(n,o){return _()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,P.request)("/api/system/menu/list",t()({method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"},params:n},o||{})));case 1:case"end":return a.stop()}},E)})),D.apply(this,arguments)}function i(E,n){return request("/api/system/menu/".concat(E),_objectSpread({method:"GET"},n||{}))}function c(E,n){return l.apply(this,arguments)}function l(){return l=M()(_()().mark(function E(n,o){return _()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,P.request)("/api/system/menu",t()({method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},data:n},o||{})));case 1:case"end":return a.stop()}},E)})),l.apply(this,arguments)}function U(E,n){return p.apply(this,arguments)}function p(){return p=M()(_()().mark(function E(n,o){return _()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,P.request)("/api/system/menu",t()({method:"PUT",headers:{"Content-Type":"application/json;charset=UTF-8"},data:n},o||{})));case 1:case"end":return a.stop()}},E)})),p.apply(this,arguments)}function T(E,n){return m.apply(this,arguments)}function m(){return m=M()(_()().mark(function E(n,o){return _()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,P.request)("/api/system/menu/".concat(n),t()({method:"DELETE"},o||{})));case 1:case"end":return a.stop()}},E)})),m.apply(this,arguments)}function u(){return(0,P.request)("/api/system/menu/treeselect",{method:"GET"})}},91825:function(q,A,e){e.d(A,{CE:function(){return F},JV:function(){return i},LA:function(){return f},Lp:function(){return n},Vl:function(){return W},_d:function(){return U},cY:function(){return l},dY:function(){return C},iH:function(){return J},l5:function(){return u},mj:function(){return o},p7:function(){return S},sp:function(){return a},tm:function(){return g},ul:function(){return T}});var O=e(90228),_=e.n(O),Z=e(26068),t=e.n(Z),j=e(87999),M=e.n(j),P=e(41009),s=e(61032),D=e(18606);function i(r){return c.apply(this,arguments)}function c(){return c=M()(_()().mark(function r(L){return _()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,s.request)("/api/system/role/list",{method:"GET",headers:{"Content-Type":P.zc.FORM_URLENCODED},params:t()(t()({},L),{},{pageNum:(L==null?void 0:L.current)||1,pageSize:(L==null?void 0:L.pageSize)||10})}));case 1:case"end":return h.stop()}},r)})),c.apply(this,arguments)}function l(r){return(0,s.request)("/api/system/role/".concat(r),{method:"GET"})}function U(r){return p.apply(this,arguments)}function p(){return p=M()(_()().mark(function r(L){return _()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,s.request)("/api/system/role",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},data:L}));case 1:case"end":return h.stop()}},r)})),p.apply(this,arguments)}function T(r){return m.apply(this,arguments)}function m(){return m=M()(_()().mark(function r(L){return _()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,s.request)("/api/system/role",{method:"PUT",headers:{"Content-Type":"application/json;charset=UTF-8"},data:L}));case 1:case"end":return h.stop()}},r)})),m.apply(this,arguments)}function u(r){return E.apply(this,arguments)}function E(){return E=M()(_()().mark(function r(L){return _()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,s.request)("/api/system/role/".concat(L),{method:"DELETE"}));case 1:case"end":return h.stop()}},r)})),E.apply(this,arguments)}function n(r){return(0,D.su)("/api/system/role/export",{params:r},"role_".concat(new Date().getTime(),".xlsx"))}function o(r){return(0,s.request)("/api/system/menu/roleMenuTreeselect/".concat(r),{method:"get"})}function g(r){return(0,s.request)("/api/system/role/dataScope",{method:"put",data:r})}function a(r,L){var d={roleId:r,status:L};return(0,s.request)("/api/system/role/changeStatus",{method:"put",data:d})}function J(r){return(0,s.request)("/api/system/role/authUser/allocatedList",{method:"get",params:r})}function S(r){return(0,s.request)("/api/system/role/authUser/unallocatedList",{method:"get",params:r})}function F(r){return(0,s.request)("/api/system/role/authUser/cancel",{method:"put",data:r})}function f(r){return(0,s.request)("/api/system/role/authUser/cancelAll",{method:"put",params:r})}function C(r){return(0,s.request)("/api/system/role/authUser/selectAll",{method:"put",params:r,headers:{"Content-Type":P.zc.FORM_URLENCODED}})}function W(r){return(0,s.request)("/api/system/role/deptTree/"+r,{method:"get"})}},71980:function(q,A,e){e.d(A,{C2:function(){return _},lt:function(){return t}});var O=e(77420);function _(j,M,P,s,D,i){var c={id:M||"id",name:P||"name",parentId:s||"parentId",parentName:D||"parentName",childrenList:i||"children"},l=[],U=[],p=[];j.forEach(function(m){var u=m,E=u[c.parentId];l[E]||(l[E]=[]),u.key=u[c.id],u.title=u[c.name],u.value=u[c.id],u[c.childrenList]=null,U[u[c.id]]=u,l[E].push(u)}),j.forEach(function(m){var u=m,E=u[c.parentId];U[E]||(u[c.parentName]="",p.push(u))});function T(m){var u=m;l[u[c.id]]&&(u[c.childrenList]||(u[c.childrenList]=[]),u[c.childrenList]=l[u[c.id]]),u[c.childrenList]&&u[c.childrenList].forEach(function(E){var n=E;n[c.parentName]=u[c.name],T(n)})}return p.forEach(function(m){T(m)}),p}var Z=function(){return parse(window.location.href.split("?")[1])};function t(j){var M=j.map(function(P){var s={id:P.id,title:P.label,key:"".concat(P.id),value:P.id};return P.children&&(s.children=t(P.children)),s});return M}}}]);
