"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9731],{39731:function(ie,S,e){e.r(S);var K=e(15558),h=e.n(K),k=e(90228),v=e.n(k),b=e(26068),x=e.n(b),V=e(87999),O=e.n(V),w=e(48305),B=e.n(w),U=e(75271),M=e(61032),Y=e(81114),I=e(2336),W=e(51162),E=e(79654),g=e(73320),F=e(6778),a=e(35609),m=e(48625),j=e(8797),n=e(57355),u=e(23102),he=e(10189),fe=e(21263),q=e(54584),Ee=e(86743),De=e(16621),de=e(73323),G=e(67627),ge=e(92203),Oe=e(23586),r=e(52676),ee=Y.Z.TextArea,ne=function(re){var Q=re.id,z=re.onCancel,ae=(0,M.useModel)("wms"),te=ae.warehouseMap,N=ae.areaMap,oe=ae.itemBrandMap,Ie=I.Z.useForm(),_e=B()(Ie,1),i=_e[0],je=(0,U.useRef)(),X=(0,U.useRef)(),Ce=(0,U.useState)(!1),J=B()(Ce,2),me=J[0],ce=J[1],Me=(0,U.useState)(!1),pe=B()(Me,2),ye=pe[0],Pe=pe[1],C=(0,U.useState)(!1),D=B()(C,2),p=D[0],y=D[1],T=(0,U.useState)([]),R=B()(T,2),L=R[0],$=R[1];(0,U.useEffect)(function(){if(Q)be(Q);else{var s=new Date().getTime();i.setFieldsValue({movementOrderNo:"YK".concat(s),movementOrderStatus:0,totalQuantity:0,details:[]})}},[Q]);var be=function(){var s=O()(v()().mark(function _(l){var t,d,c;return v()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return ce(!0),A.prev=1,A.next=4,(0,G.fp)(l);case 4:d=A.sent,c=d.data,(t=c.details)!==null&&t!==void 0&&t.length&&(c.details=c.details.map(function(o){var f,H;return x()(x()({},o),{},{sourceAreaName:(f=N.get(o.sourceAreaId))===null||f===void 0?void 0:f.areaName,targetAreaName:(H=N.get(o.targetAreaId))===null||H===void 0?void 0:H.areaName,itemSku:x()(x()({},o.itemSku),{},{item:o.itemSku.item}),remainQuantity:o.quantity})}),$(c.details.map(function(o){return{id:o.inventoryDetailId,areaId:o.sourceAreaId}}))),i.setFieldsValue(c);case 8:return A.prev=8,ce(!1),A.finish(8);case 11:case"end":return A.stop()}},_,null,[[1,,8,11]])}));return function(l){return s.apply(this,arguments)}}(),Z=function(_){i.setFieldsValue({sourceAreaId:void 0,details:[]}),$([])},ue=function(_){i.setFieldsValue({details:i.getFieldValue("details").filter(function(l){return l.sourceAreaId===_})}),$(L.filter(function(l){return l.areaId===_}))},se=function(_){i.setFieldsValue({targetAreaId:void 0,details:i.getFieldValue("details").map(function(l){return x()(x()({},l),{},{targetWarehouseId:_,targetAreaId:void 0})})})},le=function(_){i.setFieldsValue({details:i.getFieldValue("details").map(function(l){return x()(x()({},l),{},{targetAreaId:_})})})},Ae=function(){var _=i.getFieldValue("details")||[],l=0;_.forEach(function(t){t.quantity&&(l+=Number(t.quantity))}),i.setFieldsValue({totalQuantity:l})},Fe=function(){var s=O()(v()().mark(function _(l,t){var d;return v()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:l.id?W.Z.confirm({title:"\u786E\u8BA4\u5220\u9664\u672C\u6761\u5546\u54C1\u660E\u7EC6\u5417\uFF1F",content:"\u5982\u786E\u8BA4\u4F1A\u7ACB\u5373\u6267\u884C\uFF01",onOk:function(){var A=O()(v()().mark(function f(){var H;return v()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.next=2,(0,ge.I0)(l.id);case 2:H=i.getFieldValue("details"),H.splice(t,1),i.setFieldsValue({details:H}),E.ZP.success("\u5220\u9664\u6210\u529F"),Ae();case 7:case"end":return ve.stop()}},f)}));function o(){return A.apply(this,arguments)}return o}()}):(d=i.getFieldValue("details"),d.splice(t,1),i.setFieldsValue({details:d}),$(L.filter(function(A){return A.id!==l.inventoryDetailId})),Ae());case 1:case"end":return P.stop()}},_)}));return function(l,t){return s.apply(this,arguments)}}(),Re=function(){var _;if(!i.getFieldValue("sourceWarehouseId")||!i.getFieldValue("targetWarehouseId")){E.ZP.warning("\u8BF7\u5148\u9009\u62E9\u6E90\u4ED3\u5E93\u548C\u76EE\u6807\u4ED3\u5E93\uFF01");return}(_=X.current)===null||_===void 0||_.getList(),y(!0)},Be=function(_){y(!1),$(h()(_));var l=i.getFieldValue("details")||[],t=_.filter(function(d){return!l.find(function(c){return c.inventoryDetailId===d.id})}).map(function(d){var c;return{itemSku:x()(x()({},d.itemSku),{},{item:d.item}),skuId:d.skuId,quantity:void 0,remainQuantity:d.remainQuantity,batchNo:d.batchNo,productionDate:d.productionDate,expirationDate:d.expirationDate,sourceWarehouseId:i.getFieldValue("sourceWarehouseId"),sourceAreaId:i.getFieldValue("sourceAreaId")||d.areaId,inventoryDetailId:d.id,targetAreaId:i.getFieldValue("targetAreaId"),sourceAreaName:(c=N.get(i.getFieldValue("sourceAreaId")||d.areaId))===null||c===void 0?void 0:c.areaName}});i.setFieldsValue({details:[].concat(h()(l),h()(t))})},Te=function(){var s=O()(v()().mark(function _(){var l,t,d,c,P=arguments;return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return l=P.length>0&&P[0]!==void 0?P[0]:0,o.prev=1,o.next=4,i.validateFields();case 4:if(t=i.getFieldsValue(),d=(t.details||[]).map(function(f){return{id:f.id,movementOrderId:t.id,skuId:f.skuId,quantity:f.quantity,batchNo:f.batchNo,productionDate:f.productionDate,expirationDate:f.expirationDate,inventoryDetailId:f.inventoryDetailId,sourceWarehouseId:t.sourceWarehouseId,sourceAreaId:f.sourceAreaId,targetWarehouseId:t.targetWarehouseId,targetAreaId:f.targetAreaId}}),c=x()(x()({},t),{},{movementOrderStatus:l,details:d}),!t.id){o.next=12;break}return o.next=10,(0,G.qn)(c);case 10:o.next=14;break;case 12:return o.next=14,(0,G.ny)(c);case 14:E.ZP.success("\u64CD\u4F5C\u6210\u529F"),z(),o.next=22;break;case 18:o.prev=18,o.t0=o.catch(1),console.error("Save error:",o.t0),E.ZP.error("\u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F");case 22:case"end":return o.stop()}},_,null,[[1,18]])}));return function(){return s.apply(this,arguments)}}(),Ue=function(){var s=O()(v()().mark(function _(){var l,t,d,c,P;return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,i.validateFields();case 3:if(t=i.getFieldsValue(),(l=t.details)!==null&&l!==void 0&&l.length){o.next=7;break}return E.ZP.error("\u8BF7\u9009\u62E9\u5546\u54C1"),o.abrupt("return");case 7:if(d=t.details.filter(function(f){return!f.quantity}),!(d!=null&&d.length)){o.next=11;break}return E.ZP.error("\u8BF7\u9009\u62E9\u79FB\u5E93\u6570\u91CF"),o.abrupt("return");case 11:return c=(t.details||[]).map(function(f){return{id:f.id,movementOrderId:t.id,skuId:f.skuId,quantity:f.quantity,batchNo:f.batchNo,productionDate:f.productionDate,expirationDate:f.expirationDate,inventoryDetailId:f.inventoryDetailId,sourceWarehouseId:t.sourceWarehouseId,sourceAreaId:f.sourceAreaId,targetWarehouseId:t.targetWarehouseId,targetAreaId:f.targetAreaId}}),P=x()(x()({},t),{},{details:c}),o.next=15,(0,G.tb)(P);case 15:E.ZP.success("\u79FB\u5E93\u6210\u529F"),z(),o.next=23;break;case 19:o.prev=19,o.t0=o.catch(0),console.error("Movement error:",o.t0),E.ZP.error("\u64CD\u4F5C\u5931\u8D25");case 23:case"end":return o.stop()}},_,null,[[0,19]])}));return function(){return s.apply(this,arguments)}}(),We=function(){var s=O()(v()().mark(function _(){return v()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:W.Z.confirm({title:"\u786E\u8BA4\u4F5C\u5E9F\u79FB\u5E93\u5355\u5417\uFF1F",onOk:function(){return Te(-1)}});case 1:case"end":return t.stop()}},_)}));return function(){return s.apply(this,arguments)}}(),Se=function(){return W.Z.info({title:"\u7CFB\u7EDF\u63D0\u793A",content:"\u4E00\u7269\u4E00\u7801/SN\u6A21\u5F0F\u8BF7\u53BBSaas\u7248\u672C\u4F53\u9A8C\uFF01"}),!1},we=[{title:"\u5546\u54C1\u4FE1\u606F",dataIndex:["itemSku","item","itemName"],render:function(_,l){var t,d,c,P;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:[(t=l.itemSku)===null||t===void 0||(t=t.item)===null||t===void 0?void 0:t.itemName,((d=l.itemSku)===null||d===void 0||(d=d.item)===null||d===void 0?void 0:d.itemCode)&&"(".concat(l.itemSku.item.itemCode,")")]}),((c=l.itemSku)===null||c===void 0||(c=c.item)===null||c===void 0?void 0:c.itemBrand)&&(0,r.jsxs)("div",{children:["\u54C1\u724C\uFF1A",(P=oe.get(l.itemSku.item.itemBrand))===null||P===void 0?void 0:P.brandName]})]})}},{title:"\u89C4\u683C\u4FE1\u606F",render:function(_,l){var t,d;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:(t=l.itemSku)===null||t===void 0?void 0:t.skuName}),((d=l.itemSku)===null||d===void 0?void 0:d.barcode)&&(0,r.jsxs)("div",{children:["\u6761\u7801\uFF1A",l.itemSku.barcode]})]})}},{title:"\u6E90\u5E93\u533A",dataIndex:"sourceAreaName"},{title:"\u76EE\u6807\u5E93\u533A",render:function(_,l){return(0,r.jsx)(g.Z,{value:l.targetAreaId,onChange:function(d){var c=i.getFieldValue("details"),P=c.findIndex(function(o){return o.inventoryDetailId===l.inventoryDetailId});if(P!==-1){var A;c[P].targetAreaId=d,c[P].targetAreaName=(A=N.get(d))===null||A===void 0?void 0:A.areaName,i.setFieldsValue({details:c})}},disabled:!!i.getFieldValue("targetAreaId"),style:{width:"100%"},children:Array.from(N.values()).filter(function(t){return t.warehouseId===i.getFieldValue("targetWarehouseId")}).map(function(t){return(0,r.jsx)(g.Z.Option,{value:t.id,children:t.areaName},t.id)})})}},{title:"\u6279\u53F7",dataIndex:"batchNo"},{title:"\u751F\u4EA7\u65E5\u671F",dataIndex:"productionDate",render:function(_){return _?_.substring(0,10):"-"}},{title:"\u8FC7\u671F\u65E5\u671F",dataIndex:"expirationDate",render:function(_){return _?_.substring(0,10):"-"}},{title:"\u5269\u4F59\u5E93\u5B58",render:function(_,l){return(0,r.jsx)(F.Z,{value:Number(l.remainQuantity),precision:0})}},{title:"\u79FB\u5E93\u6570\u91CF",render:function(_,l){return(0,r.jsx)(a.Z,{value:l.quantity,onChange:function(d){var c=i.getFieldValue("details"),P=c.findIndex(function(A){return A.inventoryDetailId===l.inventoryDetailId});P!==-1&&(c[P].quantity=d,i.setFieldsValue({details:c}),Ae())},min:1,max:l.remainQuantity,precision:0,style:{width:"100%"}})}},{title:"\u64CD\u4F5C",render:function(_,l,t){return(0,r.jsx)(m.ZP,{icon:(0,r.jsx)(Ee.Z,{}),type:"link",danger:!0,onClick:function(){return Fe(l,t)},children:"\u5220\u9664"})}}];return(0,r.jsxs)(de._z,{children:[(0,r.jsxs)("div",{className:"app-container",style:{marginBottom:60},children:[(0,r.jsx)(j.Z,{title:"\u79FB\u5E93\u5355\u57FA\u672C\u4FE1\u606F",loading:me,children:(0,r.jsxs)(I.Z,{form:i,layout:"horizontal",labelCol:{span:6},wrapperCol:{span:18},children:[(0,r.jsxs)(n.Z,{gutter:24,children:[(0,r.jsx)(u.Z,{span:8,children:(0,r.jsx)(I.Z.Item,{label:"\u79FB\u5E93\u5355\u53F7",name:"movementOrderNo",rules:[{required:!0,message:"\u79FB\u5E93\u5355\u53F7\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,r.jsx)(Y.Z,{disabled:!!Q})})}),(0,r.jsx)(u.Z,{span:8,children:(0,r.jsx)(I.Z.Item,{label:"\u6E90\u4ED3\u5E93",name:"sourceWarehouseId",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6E90\u4ED3\u5E93"}],children:(0,r.jsx)(g.Z,{placeholder:"\u8BF7\u9009\u62E9\u6E90\u4ED3\u5E93",onChange:Z,children:Array.from(te.values()).map(function(s){return(0,r.jsx)(g.Z.Option,{value:s.id,children:s.warehouseName},s.id)})})})}),(0,r.jsx)(u.Z,{span:8,children:(0,r.jsx)(I.Z.Item,{label:"\u6E90\u5E93\u533A",name:"sourceAreaId",children:(0,r.jsx)(g.Z,{placeholder:"\u8BF7\u9009\u62E9\u6E90\u5E93\u533A",disabled:!i.getFieldValue("sourceWarehouseId"),onChange:ue,allowClear:!0,children:Array.from(N.values()).filter(function(s){return s.warehouseId===i.getFieldValue("sourceWarehouseId")}).map(function(s){return(0,r.jsx)(g.Z.Option,{value:s.id,children:s.areaName},s.id)})})})})]}),(0,r.jsxs)(n.Z,{gutter:24,children:[(0,r.jsx)(u.Z,{span:8,children:(0,r.jsx)(I.Z.Item,{label:"\u76EE\u6807\u4ED3\u5E93",name:"targetWarehouseId",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u76EE\u6807\u4ED3\u5E93"}],children:(0,r.jsx)(g.Z,{placeholder:"\u8BF7\u9009\u62E9\u76EE\u6807\u4ED3\u5E93",onChange:se,children:Array.from(te.values()).map(function(s){return(0,r.jsx)(g.Z.Option,{value:s.id,children:s.warehouseName},s.id)})})})}),(0,r.jsx)(u.Z,{span:8,children:(0,r.jsx)(I.Z.Item,{label:"\u76EE\u6807\u5E93\u533A",name:"targetAreaId",children:(0,r.jsx)(g.Z,{placeholder:"\u8BF7\u9009\u62E9\u76EE\u6807\u5E93\u533A",disabled:!i.getFieldValue("targetWarehouseId"),onChange:le,allowClear:!0,children:Array.from(N.values()).filter(function(s){return s.warehouseId===i.getFieldValue("targetWarehouseId")}).map(function(s){return(0,r.jsx)(g.Z.Option,{value:s.id,children:s.areaName},s.id)})})})}),(0,r.jsx)(u.Z,{span:8,children:(0,r.jsx)(I.Z.Item,{label:"\u6570\u91CF",name:"totalQuantity",labelCol:{span:6},wrapperCol:{span:18},children:(0,r.jsx)(a.Z,{disabled:!0,precision:0,style:{width:"100%"}})})})]}),(0,r.jsx)(n.Z,{gutter:24,children:(0,r.jsx)(u.Z,{span:24,children:(0,r.jsx)(I.Z.Item,{label:"\u5907\u6CE8",name:"remark",labelCol:{span:2},wrapperCol:{span:22},children:(0,r.jsx)(ee,{placeholder:"\u5907\u6CE8...100\u4E2A\u5B57\u7B26\u4EE5\u5185",maxLength:100,rows:4,showCount:!0})})})})]})}),(0,r.jsxs)(j.Z,{title:"\u5546\u54C1\u660E\u7EC6",className:"mt10",loading:me,children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{children:"\u4E00\u7269\u4E00\u7801/SN\u6A21\u5F0F\uFF1A"}),(0,r.jsx)(he.Z,{checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED",checked:ye,onChange:function(){W.Z.info({title:"\u7CFB\u7EDF\u63D0\u793A",content:"\u4E00\u7269\u4E00\u7801/SN\u6A21\u5F0F\u8BF7\u53BBSaas\u7248\u672C\u4F53\u9A8C\uFF01"})},style:{margin:"0 8px"}})]}),(0,r.jsx)(fe.Z,{placement:"left",title:"\u63D0\u793A",content:"\u8BF7\u5148\u9009\u62E9\u6E90\u4ED3\u5E93\u548C\u76EE\u6807\u4ED3\u5E93\uFF01",open:!i.getFieldValue("sourceWarehouseId")||!i.getFieldValue("targetWarehouseId")?void 0:!1,children:(0,r.jsx)(m.ZP,{type:"primary",icon:(0,r.jsx)(De.Z,{}),onClick:Re,disabled:!i.getFieldValue("sourceWarehouseId")||!i.getFieldValue("targetWarehouseId"),children:"\u6DFB\u52A0\u5546\u54C1"})})]}),(0,r.jsx)(q.Z,{columns:we,dataSource:i.getFieldValue("details")||[],rowKey:"inventoryDetailId",pagination:!1,scroll:{x:"max-content"}})]}),(0,r.jsx)(Oe.default,{ref:X,open:p,onOk:Be,onCancel:function(){return y(!1)},width:"90%",selectWarehouseDisable:!1,selectAreaDisable:!!i.getFieldValue("sourceAreaId"),warehouseId:i.getFieldValue("sourceWarehouseId"),areaId:i.getFieldValue("sourceAreaId"),selectedInventory:L})]}),(0,r.jsxs)("div",{style:{position:"fixed",bottom:0,right:0,width:"100%",padding:"16px",background:"#fff",boxShadow:"0 -2px 8px rgba(0, 0, 0, 0.15)",display:"flex",justifyContent:"space-between"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m.ZP,{type:"primary",onClick:Ue,style:{marginRight:8},children:"\u5B8C\u6210\u79FB\u5E93"}),Q&&(0,r.jsx)(m.ZP,{danger:!0,onClick:We,children:"\u4F5C\u5E9F"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m.ZP,{type:"primary",onClick:function(){return Te(0)},style:{marginRight:8},children:"\u6682\u5B58"}),(0,r.jsx)(m.ZP,{onClick:z,children:"\u53D6\u6D88"})]})]})]})};S.default=ne},23586:function(ie,S,e){e.r(S);var K=e(90228),h=e.n(K),k=e(26068),v=e.n(k),b=e(87999),x=e.n(b),V=e(48305),O=e.n(V),w=e(75271),B=e(61032),U=e(18380),M=e(2336),Y=e(6778),I=e(1153),W=e(48625),E=e(81114),g=e(73320),F=e(17023),a=e(90607),m=e(90023),j=e(16483),n=e.n(j),u=e(52676),he=U.default.RangePicker,fe=(0,w.forwardRef)(function(q,Ee){var De=q.open,de=q.onCancel,G=q.selectedInventory,ge=G===void 0?[]:G,Oe=M.Z.useForm(),r=O()(Oe,1),ee=r[0],ne=(0,w.useRef)(),xe=(0,w.useState)([]),re=O()(xe,2),Q=re[0],z=re[1],ae=(0,w.useState)(!1),te=O()(ae,2),N=te[0],oe=te[1],Ie=(0,w.useState)(!1),_e=O()(Ie,2),i=_e[0],je=_e[1],X=(0,B.useModel)("wms"),Ce=X.warehouseMap,J=X.areaMap,me=X.itemBrandMap;(0,w.useImperativeHandle)(Ee,function(){return{setWarehouseIdAndAreaId:ce,getList:function(){var D;(D=ne.current)===null||D===void 0||D.reload()}}});var ce=function(D,p){ee.setFieldsValue({warehouseId:D,areaId:p}),je(!!p)},Me=function(D){return!ge.some(function(p){return p.id===D.id})},pe=[{title:"\u5E93\u533A",dataIndex:"areaName",render:function(D,p){var y;return(y=J.get(p.areaId))===null||y===void 0?void 0:y.areaName}},{title:"\u5546\u54C1\u4FE1\u606F",render:function(D,p){var y,T,R,L;return(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{children:(y=p.item)===null||y===void 0?void 0:y.itemName}),((T=p.item)===null||T===void 0?void 0:T.itemCode)&&(0,u.jsxs)("div",{children:["\u7F16\u53F7\uFF1A",p.item.itemCode]}),((R=p.item)===null||R===void 0?void 0:R.itemBrand)&&(0,u.jsxs)("div",{children:["\u54C1\u724C\uFF1A",(L=me.get(p.item.itemBrand))===null||L===void 0?void 0:L.brandName]})]})}},{title:"\u89C4\u683C\u4FE1\u606F",render:function(D,p){var y,T,R;return(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{children:(y=p.itemSku)===null||y===void 0?void 0:y.skuName}),((T=p.itemSku)===null||T===void 0?void 0:T.skuCode)&&(0,u.jsxs)("div",{children:["\u7F16\u53F7\uFF1A",p.itemSku.skuCode]}),((R=p.itemSku)===null||R===void 0?void 0:R.barcode)&&(0,u.jsxs)("div",{children:["\u6761\u7801\uFF1A",p.itemSku.barcode]})]})}},{title:"\u6279\u53F7",dataIndex:"batchNo",align:"left"},{title:"\u751F\u4EA7\u65E5\u671F/\u8FC7\u671F\u65E5\u671F",align:"left",width:180,render:function(D,p){return(0,u.jsxs)("div",{children:[p.productionDate&&(0,u.jsxs)("div",{children:["\u751F\u4EA7\u65E5\u671F\uFF1A",n()(p.productionDate).format("YYYY-MM-DD")]}),p.expirationDate&&(0,u.jsxs)("div",{children:["\u8FC7\u671F\u65E5\u671F\uFF1A",n()(p.expirationDate).format("YYYY-MM-DD")]})]})}},{title:"\u5165\u5E93\u65E5\u671F",align:"left",width:140,render:function(D,p){return(0,u.jsx)("div",{children:n()(p.createTime).format("YYYY-MM-DD")})}},{title:"\u5269\u4F59\u5E93\u5B58",align:"right",render:function(D,p){return(0,u.jsx)(Y.Z,{value:Number(p.remainQuantity),precision:0})}}],ye=function(){de(),z([])},Pe=function(){de(),z([])};return(0,u.jsxs)(I.Z,{title:"\u9009\u62E9\u5E93\u5B58",width:1200,open:De,onClose:Pe,destroyOnClose:!0,footer:(0,u.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,u.jsx)(W.ZP,{onClick:Pe,style:{marginRight:8},children:"\u53D6\u6D88"}),(0,u.jsx)(W.ZP,{type:"primary",onClick:ye,children:"\u786E\u8BA4"})]}),children:[(0,u.jsxs)(M.Z,{form:ee,layout:"inline",labelAlign:"left",children:[(0,u.jsx)(M.Z.Item,{label:"\u5546\u54C1\u540D\u79F0",name:"itemName",children:(0,u.jsx)(E.Z,{placeholder:"\u5546\u54C1\u540D\u79F0",allowClear:!0})}),(0,u.jsx)(M.Z.Item,{label:"\u5546\u54C1\u7F16\u53F7",name:"itemCode",children:(0,u.jsx)(E.Z,{placeholder:"\u5546\u54C1\u7F16\u53F7",allowClear:!0,style:{width:180}})}),(0,u.jsx)(M.Z.Item,{label:"\u5E93\u533A",name:"areaId",children:(0,u.jsx)(g.Z,{placeholder:"\u8BF7\u9009\u62E9\u5E93\u533A",disabled:i,allowClear:!0,style:{width:180},children:Array.from(J.values()).map(function(C){return(0,u.jsx)(g.Z.Option,{value:C.id,children:C.areaName},C.id)})})}),(0,u.jsx)(M.Z.Item,{label:"\u89C4\u683C\u540D\u79F0",name:"skuName",children:(0,u.jsx)(E.Z,{placeholder:"\u89C4\u683C\u540D\u79F0",allowClear:!0,style:{width:180}})}),(0,u.jsx)(M.Z.Item,{label:"\u89C4\u683C\u7F16\u53F7",name:"barcode",children:(0,u.jsx)(E.Z,{placeholder:"\u89C4\u683C\u7F16\u53F7",allowClear:!0,style:{width:180}})}),(0,u.jsx)(M.Z.Item,{label:"\u6279\u53F7",name:"batchNo",children:(0,u.jsx)(E.Z,{placeholder:"\u6279\u53F7",allowClear:!0,style:{width:180}})}),(0,u.jsx)(M.Z.Item,{label:"\u5165\u5E93\u65E5\u671F",name:"createTimeRange",children:(0,u.jsx)(he,{format:"YYYY-MM-DD",placeholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"]})}),(0,u.jsx)(M.Z.Item,{label:"\u591A\u5C11\u5929\u5185\u8FC7\u671F",name:"daysToExpires",children:(0,u.jsxs)(g.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,style:{width:120},children:[(0,u.jsx)(g.Z.Option,{value:30,children:"30\u5929\u5185"}),(0,u.jsx)(g.Z.Option,{value:60,children:"60\u5929\u5185"}),(0,u.jsx)(g.Z.Option,{value:90,children:"90\u5929\u5185"}),(0,u.jsx)(g.Z.Option,{value:120,children:"120\u5929\u5185"}),(0,u.jsx)(g.Z.Option,{value:180,children:"180\u5929\u5185"}),(0,u.jsx)(g.Z.Option,{value:365,children:"365\u5929\u5185"})]})}),(0,u.jsx)(M.Z.Item,{children:(0,u.jsx)(W.ZP,{type:"primary",icon:(0,u.jsx)(F.Z,{}),onClick:function(){var D;return(D=ne.current)===null||D===void 0?void 0:D.reload()},children:"\u67E5\u8BE2"})})]}),(0,u.jsx)(a.Z,{style:{marginTop:16},actionRef:ne,rowKey:"id",search:!1,options:!1,request:function(){var C=x()(h()().mark(function D(p){var y,T,R,L,$;return h()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return oe(!0),Z.prev=1,R=ee.getFieldsValue(),L=v()(v()({},R),{},{createStartTime:(y=R.createTimeRange)===null||y===void 0||(y=y[0])===null||y===void 0?void 0:y.format("YYYY-MM-DD HH:mm:ss"),createEndTime:(T=R.createTimeRange)===null||T===void 0||(T=T[1])===null||T===void 0?void 0:T.format("YYYY-MM-DD HH:mm:ss"),pageNum:p.current,pageSize:p.pageSize}),Z.next=6,(0,m.fN)(L);case 6:return $=Z.sent,Z.abrupt("return",{data:$.rows.map(function(ue){var se,le;return v()(v()({},ue),{},{warehouseName:(se=Ce.get(ue.warehouseId))===null||se===void 0?void 0:se.warehouseName,areaName:(le=J.get(ue.areaId))===null||le===void 0?void 0:le.areaName})}),total:$.total,success:!0});case 8:return Z.prev=8,oe(!1),Z.finish(8);case 11:case"end":return Z.stop()}},D,null,[[1,,8,11]])}));return function(D){return C.apply(this,arguments)}}(),columns:pe,rowSelection:{selectedRowKeys:Q.map(function(C){return C.id}),onChange:function(D,p){return z(p)},getCheckboxProps:function(D){return{disabled:!Me(D)}}},loading:N,pagination:{showSizeChanger:!0}})]})});S.default=fe},90023:function(ie,S,e){e.d(S,{fN:function(){return V},tB:function(){return w}});var K=e(90228),h=e.n(K),k=e(87999),v=e.n(k),b=e(61032),x=e(18606);function V(a){return O.apply(this,arguments)}function O(){return O=v()(h()().mark(function a(m){return h()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,b.request)("/api/wms/inventoryDetail/list",{method:"GET",params:m}));case 1:case"end":return n.stop()}},a)})),O.apply(this,arguments)}function w(a){return B.apply(this,arguments)}function B(){return B=v()(h()().mark(function a(m){return h()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,b.request)("/api/wms/inventoryDetail/listNoPage",{method:"GET",params:m}));case 1:case"end":return n.stop()}},a)})),B.apply(this,arguments)}function U(a,m){return downLoadXlsx("/api/wms/inventoryDetail/export",{params:a},"inventoryDetail_".concat(new Date().getTime(),".xlsx"))}function M(a){return request("/api/wms/inventoryDetail/".concat(a),{method:"GET"})}function Y(a){return I.apply(this,arguments)}function I(){return I=_asyncToGenerator(_regeneratorRuntime().mark(function a(m){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/wms/inventoryDetail",{method:"POST",data:m}));case 1:case"end":return n.stop()}},a)})),I.apply(this,arguments)}function W(a){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime().mark(function a(m){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/wms/inventoryDetail",{method:"PUT",data:m}));case 1:case"end":return n.stop()}},a)})),E.apply(this,arguments)}function g(a){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime().mark(function a(m){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/wms/inventoryDetail/".concat(m),{method:"DELETE"}));case 1:case"end":return n.stop()}},a)})),F.apply(this,arguments)}},67627:function(ie,S,e){e.d(S,{K:function(){return V},fp:function(){return B},ny:function(){return U},qn:function(){return Y},tb:function(){return W},w2:function(){return g}});var K=e(90228),h=e.n(K),k=e(87999),v=e.n(k),b=e(61032),x=e(18606);function V(a){return O.apply(this,arguments)}function O(){return O=v()(h()().mark(function a(m){return h()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,b.request)("/api/wms/movementOrder/list",{method:"GET",params:m}));case 1:case"end":return n.stop()}},a)})),O.apply(this,arguments)}function w(a,m){return downLoadXlsx("/api/wms/movementOrder/export",{params:a},"movementOrder_".concat(new Date().getTime(),".xlsx"))}function B(a){return(0,b.request)("/api/wms/movementOrder/".concat(a),{method:"GET"})}function U(a){return M.apply(this,arguments)}function M(){return M=v()(h()().mark(function a(m){return h()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,b.request)("/api/wms/movementOrder",{method:"POST",data:m}));case 1:case"end":return n.stop()}},a)})),M.apply(this,arguments)}function Y(a){return I.apply(this,arguments)}function I(){return I=v()(h()().mark(function a(m){return h()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,b.request)("/api/wms/movementOrder",{method:"PUT",data:m}));case 1:case"end":return n.stop()}},a)})),I.apply(this,arguments)}function W(a){return E.apply(this,arguments)}function E(){return E=v()(h()().mark(function a(m){return h()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,b.request)("/api/wms/movementOrder/move",{method:"POST",data:m}));case 1:case"end":return n.stop()}},a)})),E.apply(this,arguments)}function g(a){return F.apply(this,arguments)}function F(){return F=v()(h()().mark(function a(m){return h()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,b.request)("/api/wms/movementOrder/".concat(m),{method:"DELETE"}));case 1:case"end":return n.stop()}},a)})),F.apply(this,arguments)}},92203:function(ie,S,e){e.d(S,{I0:function(){return W},hS:function(){return g}});var K=e(90228),h=e.n(K),k=e(87999),v=e.n(k),b=e(61032),x=e(18606);function V(a){return O.apply(this,arguments)}function O(){return O=_asyncToGenerator(_regeneratorRuntime().mark(function a(m){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/wms/movementOrderDetail/list",{method:"GET",params:m}));case 1:case"end":return n.stop()}},a)})),O.apply(this,arguments)}function w(a,m){return downLoadXlsx("/api/wms/movementOrderDetail/export",{params:a},"movementOrderDetail_".concat(new Date().getTime(),".xlsx"))}function B(a){return request("/api/wms/movementOrderDetail/".concat(a),{method:"GET"})}function U(a){return M.apply(this,arguments)}function M(){return M=_asyncToGenerator(_regeneratorRuntime().mark(function a(m){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/wms/movementOrderDetail",{method:"POST",data:m}));case 1:case"end":return n.stop()}},a)})),M.apply(this,arguments)}function Y(a){return I.apply(this,arguments)}function I(){return I=_asyncToGenerator(_regeneratorRuntime().mark(function a(m){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/wms/movementOrderDetail",{method:"PUT",data:m}));case 1:case"end":return n.stop()}},a)})),I.apply(this,arguments)}function W(a){return E.apply(this,arguments)}function E(){return E=v()(h()().mark(function a(m){return h()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,b.request)("/api/wms/movementOrderDetail/".concat(m),{method:"DELETE"}));case 1:case"end":return n.stop()}},a)})),E.apply(this,arguments)}function g(a){return F.apply(this,arguments)}function F(){return F=v()(h()().mark(function a(m){return h()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,b.request)("/api/wms/movementOrderDetail/list/".concat(m),{method:"GET"}));case 1:case"end":return n.stop()}},a)})),F.apply(this,arguments)}}}]);
