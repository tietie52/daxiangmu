"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3586,6778,6422],{23586:function(fe,N,t){t.r(N);var v=t(90228),S=t.n(v),Y=t(26068),T=t.n(Y),B=t(87999),X=t.n(B),k=t(48305),b=t.n(k),R=t(75271),U=t(61032),Q=t(18380),g=t(2336),J=t(6778),w=t(1153),L=t(48625),P=t(81114),O=t(73320),Z=t(17023),d=t(90607),D=t(90023),A=t(16483),s=t.n(A),e=t(52676),ee=Q.default.RangePicker,te=(0,R.forwardRef)(function(z,ne){var ae=z.open,a=z.onCancel,r=z.selectedInventory,i=r===void 0?[]:r,n=g.Z.useForm(),o=b()(n,1),h=o[0],E=(0,R.useRef)(),m=(0,R.useState)([]),p=b()(m,2),y=p[0],x=p[1],M=(0,R.useState)(!1),c=b()(M,2),$=c[0],W=c[1],re=(0,R.useState)(!1),q=b()(re,2),le=q[0],se=q[1],H=(0,U.useModel)("wms"),oe=H.warehouseMap,G=H.areaMap,ie=H.itemBrandMap;(0,R.useImperativeHandle)(ne,function(){return{setWarehouseIdAndAreaId:I,getList:function(){var u;(u=E.current)===null||u===void 0||u.reload()}}});var I=function(u,l){h.setFieldsValue({warehouseId:u,areaId:l}),se(!!l)},ue=function(u){return!i.some(function(l){return l.id===u.id})},de=[{title:"\u5E93\u533A",dataIndex:"areaName",render:function(u,l){var f;return(f=G.get(l.areaId))===null||f===void 0?void 0:f.areaName}},{title:"\u5546\u54C1\u4FE1\u606F",render:function(u,l){var f,C,j,K;return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(f=l.item)===null||f===void 0?void 0:f.itemName}),((C=l.item)===null||C===void 0?void 0:C.itemCode)&&(0,e.jsxs)("div",{children:["\u7F16\u53F7\uFF1A",l.item.itemCode]}),((j=l.item)===null||j===void 0?void 0:j.itemBrand)&&(0,e.jsxs)("div",{children:["\u54C1\u724C\uFF1A",(K=ie.get(l.item.itemBrand))===null||K===void 0?void 0:K.brandName]})]})}},{title:"\u89C4\u683C\u4FE1\u606F",render:function(u,l){var f,C,j;return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(f=l.itemSku)===null||f===void 0?void 0:f.skuName}),((C=l.itemSku)===null||C===void 0?void 0:C.skuCode)&&(0,e.jsxs)("div",{children:["\u7F16\u53F7\uFF1A",l.itemSku.skuCode]}),((j=l.itemSku)===null||j===void 0?void 0:j.barcode)&&(0,e.jsxs)("div",{children:["\u6761\u7801\uFF1A",l.itemSku.barcode]})]})}},{title:"\u6279\u53F7",dataIndex:"batchNo",align:"left"},{title:"\u751F\u4EA7\u65E5\u671F/\u8FC7\u671F\u65E5\u671F",align:"left",width:180,render:function(u,l){return(0,e.jsxs)("div",{children:[l.productionDate&&(0,e.jsxs)("div",{children:["\u751F\u4EA7\u65E5\u671F\uFF1A",s()(l.productionDate).format("YYYY-MM-DD")]}),l.expirationDate&&(0,e.jsxs)("div",{children:["\u8FC7\u671F\u65E5\u671F\uFF1A",s()(l.expirationDate).format("YYYY-MM-DD")]})]})}},{title:"\u5165\u5E93\u65E5\u671F",align:"left",width:140,render:function(u,l){return(0,e.jsx)("div",{children:s()(l.createTime).format("YYYY-MM-DD")})}},{title:"\u5269\u4F59\u5E93\u5B58",align:"right",render:function(u,l){return(0,e.jsx)(J.Z,{value:Number(l.remainQuantity),precision:0})}}],ce=function(){a(),x([])},V=function(){a(),x([])};return(0,e.jsxs)(w.Z,{title:"\u9009\u62E9\u5E93\u5B58",width:1200,open:ae,onClose:V,destroyOnClose:!0,footer:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,e.jsx)(L.ZP,{onClick:V,style:{marginRight:8},children:"\u53D6\u6D88"}),(0,e.jsx)(L.ZP,{type:"primary",onClick:ce,children:"\u786E\u8BA4"})]}),children:[(0,e.jsxs)(g.Z,{form:h,layout:"inline",labelAlign:"left",children:[(0,e.jsx)(g.Z.Item,{label:"\u5546\u54C1\u540D\u79F0",name:"itemName",children:(0,e.jsx)(P.Z,{placeholder:"\u5546\u54C1\u540D\u79F0",allowClear:!0})}),(0,e.jsx)(g.Z.Item,{label:"\u5546\u54C1\u7F16\u53F7",name:"itemCode",children:(0,e.jsx)(P.Z,{placeholder:"\u5546\u54C1\u7F16\u53F7",allowClear:!0,style:{width:180}})}),(0,e.jsx)(g.Z.Item,{label:"\u5E93\u533A",name:"areaId",children:(0,e.jsx)(O.Z,{placeholder:"\u8BF7\u9009\u62E9\u5E93\u533A",disabled:le,allowClear:!0,style:{width:180},children:Array.from(G.values()).map(function(_){return(0,e.jsx)(O.Z.Option,{value:_.id,children:_.areaName},_.id)})})}),(0,e.jsx)(g.Z.Item,{label:"\u89C4\u683C\u540D\u79F0",name:"skuName",children:(0,e.jsx)(P.Z,{placeholder:"\u89C4\u683C\u540D\u79F0",allowClear:!0,style:{width:180}})}),(0,e.jsx)(g.Z.Item,{label:"\u89C4\u683C\u7F16\u53F7",name:"barcode",children:(0,e.jsx)(P.Z,{placeholder:"\u89C4\u683C\u7F16\u53F7",allowClear:!0,style:{width:180}})}),(0,e.jsx)(g.Z.Item,{label:"\u6279\u53F7",name:"batchNo",children:(0,e.jsx)(P.Z,{placeholder:"\u6279\u53F7",allowClear:!0,style:{width:180}})}),(0,e.jsx)(g.Z.Item,{label:"\u5165\u5E93\u65E5\u671F",name:"createTimeRange",children:(0,e.jsx)(ee,{format:"YYYY-MM-DD",placeholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"]})}),(0,e.jsx)(g.Z.Item,{label:"\u591A\u5C11\u5929\u5185\u8FC7\u671F",name:"daysToExpires",children:(0,e.jsxs)(O.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,style:{width:120},children:[(0,e.jsx)(O.Z.Option,{value:30,children:"30\u5929\u5185"}),(0,e.jsx)(O.Z.Option,{value:60,children:"60\u5929\u5185"}),(0,e.jsx)(O.Z.Option,{value:90,children:"90\u5929\u5185"}),(0,e.jsx)(O.Z.Option,{value:120,children:"120\u5929\u5185"}),(0,e.jsx)(O.Z.Option,{value:180,children:"180\u5929\u5185"}),(0,e.jsx)(O.Z.Option,{value:365,children:"365\u5929\u5185"})]})}),(0,e.jsx)(g.Z.Item,{children:(0,e.jsx)(L.ZP,{type:"primary",icon:(0,e.jsx)(Z.Z,{}),onClick:function(){var u;return(u=E.current)===null||u===void 0?void 0:u.reload()},children:"\u67E5\u8BE2"})})]}),(0,e.jsx)(d.Z,{style:{marginTop:16},actionRef:E,rowKey:"id",search:!1,options:!1,request:function(){var _=X()(S()().mark(function u(l){var f,C,j,K,_e;return S()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return W(!0),F.prev=1,j=h.getFieldsValue(),K=T()(T()({},j),{},{createStartTime:(f=j.createTimeRange)===null||f===void 0||(f=f[0])===null||f===void 0?void 0:f.format("YYYY-MM-DD HH:mm:ss"),createEndTime:(C=j.createTimeRange)===null||C===void 0||(C=C[1])===null||C===void 0?void 0:C.format("YYYY-MM-DD HH:mm:ss"),pageNum:l.current,pageSize:l.pageSize}),F.next=6,(0,D.fN)(K);case 6:return _e=F.sent,F.abrupt("return",{data:_e.rows.map(function(me){var pe,ve;return T()(T()({},me),{},{warehouseName:(pe=oe.get(me.warehouseId))===null||pe===void 0?void 0:pe.warehouseName,areaName:(ve=G.get(me.areaId))===null||ve===void 0?void 0:ve.areaName})}),total:_e.total,success:!0});case 8:return F.prev=8,W(!1),F.finish(8);case 11:case"end":return F.stop()}},u,null,[[1,,8,11]])}));return function(u){return _.apply(this,arguments)}}(),columns:de,rowSelection:{selectedRowKeys:y.map(function(_){return _.id}),onChange:function(u,l){return x(l)},getCheckboxProps:function(u){return{disabled:!ue(u)}}},loading:$,pagination:{showSizeChanger:!0}})]})});N.default=te},90023:function(fe,N,t){t.d(N,{fN:function(){return k},tB:function(){return R}});var v=t(90228),S=t.n(v),Y=t(87999),T=t.n(Y),B=t(61032),X=t(18606);function k(d){return b.apply(this,arguments)}function b(){return b=T()(S()().mark(function d(D){return S()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,B.request)("/api/wms/inventoryDetail/list",{method:"GET",params:D}));case 1:case"end":return s.stop()}},d)})),b.apply(this,arguments)}function R(d){return U.apply(this,arguments)}function U(){return U=T()(S()().mark(function d(D){return S()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,B.request)("/api/wms/inventoryDetail/listNoPage",{method:"GET",params:D}));case 1:case"end":return s.stop()}},d)})),U.apply(this,arguments)}function Q(d,D){return downLoadXlsx("/api/wms/inventoryDetail/export",{params:d},"inventoryDetail_".concat(new Date().getTime(),".xlsx"))}function g(d){return request("/api/wms/inventoryDetail/".concat(d),{method:"GET"})}function J(d){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime().mark(function d(D){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("/api/wms/inventoryDetail",{method:"POST",data:D}));case 1:case"end":return s.stop()}},d)})),w.apply(this,arguments)}function L(d){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function d(D){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("/api/wms/inventoryDetail",{method:"PUT",data:D}));case 1:case"end":return s.stop()}},d)})),P.apply(this,arguments)}function O(d){return Z.apply(this,arguments)}function Z(){return Z=_asyncToGenerator(_regeneratorRuntime().mark(function d(D){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("/api/wms/inventoryDetail/".concat(D),{method:"DELETE"}));case 1:case"end":return s.stop()}},d)})),Z.apply(this,arguments)}},6778:function(fe,N,t){t.d(N,{Z:function(){return ae}});var v=t(75271),S=t(18402),Y=t(94787),T=t(82187),B=t.n(T),X=t(71305),k=t(46323),b=t(5013),U=a=>{const{value:r,formatter:i,precision:n,decimalSeparator:o,groupSeparator:h="",prefixCls:E}=a;let m;if(typeof i=="function")m=i(r);else{const p=String(r),y=p.match(/^(-?)(\d*)(\.(\d+))?$/);if(!y||p==="-")m=p;else{const x=y[1];let M=y[2]||"0",c=y[4]||"";M=M.replace(/\B(?=(\d{3})+(?!\d))/g,h),typeof n=="number"&&(c=c.padEnd(n,"0").slice(0,n>0?n:0)),c&&(c=`${o}${c}`),m=[v.createElement("span",{key:"int",className:`${E}-content-value-int`},x,M),c&&v.createElement("span",{key:"decimal",className:`${E}-content-value-decimal`},c)]}}return v.createElement("span",{className:`${E}-content-value`},m)},Q=t(38224),g=t(37951),J=t(83509);const w=a=>{const{componentCls:r,marginXXS:i,padding:n,colorTextDescription:o,titleFontSize:h,colorTextHeading:E,contentFontSize:m,fontFamily:p}=a;return{[r]:Object.assign(Object.assign({},(0,Q.Wf)(a)),{[`${r}-title`]:{marginBottom:i,color:o,fontSize:h},[`${r}-skeleton`]:{paddingTop:n},[`${r}-content`]:{color:E,fontSize:m,fontFamily:p,[`${r}-content-value`]:{display:"inline-block",direction:"ltr"},[`${r}-content-prefix, ${r}-content-suffix`]:{display:"inline-block"},[`${r}-content-prefix`]:{marginInlineEnd:i},[`${r}-content-suffix`]:{marginInlineStart:i}}})}},L=a=>{const{fontSizeHeading3:r,fontSize:i}=a;return{titleFontSize:i,contentFontSize:r}};var P=(0,g.I$)("Statistic",a=>{const r=(0,J.IX)(a,{});return[w(r)]},L),O=function(a,r){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&r.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(a);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(a,n[o])&&(i[n[o]]=a[n[o]]);return i},d=a=>{const{prefixCls:r,className:i,rootClassName:n,style:o,valueStyle:h,value:E=0,title:m,valueRender:p,prefix:y,suffix:x,loading:M=!1,formatter:c,precision:$,decimalSeparator:W=".",groupSeparator:re=",",onMouseEnter:q,onMouseLeave:le}=a,se=O(a,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:H,direction:oe,className:G,style:ie}=(0,k.dj)("statistic"),I=H("statistic",r),[ue,de,ce]=P(I),V=v.createElement(U,{decimalSeparator:W,groupSeparator:re,prefixCls:I,formatter:c,precision:$,value:E}),_=B()(I,{[`${I}-rtl`]:oe==="rtl"},G,i,n,de,ce),u=(0,X.Z)(se,{aria:!0,data:!0});return ue(v.createElement("div",Object.assign({},u,{className:_,style:Object.assign(Object.assign({},ie),o),onMouseEnter:q,onMouseLeave:le}),m&&v.createElement("div",{className:`${I}-title`},m),v.createElement(b.Z,{paragraph:!1,loading:M,className:`${I}-skeleton`},v.createElement("div",{style:h,className:`${I}-content`},y&&v.createElement("span",{className:`${I}-content-prefix`},y),p?p(V):V,x&&v.createElement("span",{className:`${I}-content-suffix`},x)))))};const D=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function A(a,r){let i=a;const n=/\[[^\]]*]/g,o=(r.match(n)||[]).map(p=>p.slice(1,-1)),h=r.replace(n,"[]"),E=D.reduce((p,y)=>{let[x,M]=y;if(p.includes(x)){const c=Math.floor(i/M);return i-=c*M,p.replace(new RegExp(`${x}+`,"g"),$=>{const W=$.length;return c.toString().padStart(W,"0")})}return p},h);let m=0;return E.replace(n,()=>{const p=o[m];return m+=1,p})}function s(a,r){const{format:i=""}=r,n=new Date(a).getTime(),o=Date.now(),h=Math.max(n-o,0);return A(h,i)}var e=function(a,r){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&r.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(a);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(a,n[o])&&(i[n[o]]=a[n[o]]);return i};const ee=1e3/30;function te(a){return new Date(a).getTime()}const z=a=>{const{value:r,format:i="HH:mm:ss",onChange:n,onFinish:o}=a,h=e(a,["value","format","onChange","onFinish"]),E=(0,S.Z)(),m=v.useRef(null),p=()=>{o==null||o(),m.current&&(clearInterval(m.current),m.current=null)},y=()=>{const c=te(r);c>=Date.now()&&(m.current=setInterval(()=>{E(),n==null||n(c-Date.now()),c<Date.now()&&p()},ee))};v.useEffect(()=>(y(),()=>{m.current&&(clearInterval(m.current),m.current=null)}),[r]);const x=(c,$)=>s(c,Object.assign(Object.assign({},$),{format:i})),M=c=>(0,Y.Tm)(c,{title:void 0});return v.createElement(d,Object.assign({},h,{value:r,valueRender:M,formatter:x}))};var ne=v.memo(z);d.Countdown=ne;var ae=d}}]);
