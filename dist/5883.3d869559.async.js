"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5883],{75883:function(z,R,r){r.r(R);var w=r(26068),m=r.n(w),I=r(90228),u=r.n(I),g=r(87999),o=r.n(g),U=r(48305),f=r.n(U),p=r(75271),B=r(61032),v=r(79654),h=r(48625),j=r(51162),P=r(1153),A=r(16621),k=r(30426),W=r(90607),O=r(54936),e=r(52676),c=(0,p.forwardRef)(function(D,n){var H=D.open,J=D.checkOrderNo,V=D.onCancel,X=(0,p.useState)(),K=f()(X,2),L=K[0],Y=K[1],M=(0,p.useRef)(),q=(0,p.useState)([]),x=f()(q,2),y=x[0],S=x[1],ee=(0,p.useState)(),Z=f()(ee,2),_e=Z[0],$=Z[1],re=(0,p.useState)(!1),G=f()(re,2),ne=G[0],N=G[1],T=(0,B.useAccess)(),ae=(0,B.useModel)("wms"),te=ae.areaMap;(0,p.useImperativeHandle)(n,function(){return{setCheckOrderId:Y,handleQuery:function(){var s;(s=M.current)===null||s===void 0||s.reload()}}});var Q=function(){var d=o()(u()().mark(function s(a){var t,_;return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=v.ZP.loading("\u6B63\u5728\u5220\u9664"),a){l.next=3;break}return l.abrupt("return",!0);case 3:return l.prev=3,l.next=6,(0,O.mQ)(a.map(function(C){return C.id}).join(","));case 6:return _=l.sent,t(),_.code===200?v.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):v.ZP.error(_.msg),l.abrupt("return",!0);case 12:return l.prev=12,l.t0=l.catch(3),t(),v.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),l.abrupt("return",!1);case 17:case"end":return l.stop()}},s,null,[[3,12]])}));return function(a){return d.apply(this,arguments)}}(),ue=function(){var d=o()(u()().mark(function s(){var a;return u()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return a=v.ZP.loading("\u6B63\u5728\u5BFC\u51FA"),_.prev=1,_.next=4,(0,O.kW)({checkOrderId:L});case 4:return a(),v.ZP.success("\u5BFC\u51FA\u6210\u529F"),_.abrupt("return",!0);case 9:return _.prev=9,_.t0=_.catch(1),a(),v.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),_.abrupt("return",!1);case 14:case"end":return _.stop()}},s,null,[[1,9]])}));return function(){return d.apply(this,arguments)}}(),se=[{title:"\u5546\u54C1\u540D\u79F0",dataIndex:["itemSku","item","itemName"],valueType:"text"},{title:"\u89C4\u683C\u540D\u79F0",dataIndex:["itemSku","skuName"],valueType:"text"},{title:"\u5E93\u533A",dataIndex:"areaName",valueType:"text",render:function(s,a){var t;return(t=te.get(a.areaId))===null||t===void 0?void 0:t.areaName}},{title:"\u6279\u53F7",dataIndex:"batchNo",valueType:"text"},{title:"\u8D26\u9762\u5E93\u5B58",dataIndex:"quantity",valueType:"digit",align:"right"},{title:"\u76C8\u4E8F\u6570",valueType:"digit",align:"right",render:function(s,a){var t=a.checkQuantity/1,_=a.quantity/1;return t-_}},{title:"\u5B9E\u9645\u5E93\u5B58",dataIndex:"checkQuantity",valueType:"digit",align:"right"},{title:"\u64CD\u4F5C",dataIndex:"option",width:"180px",valueType:"option",render:function(s,a){return[(0,e.jsx)(h.ZP,{type:"link",size:"small",hidden:!T.hasPerms("wms:checkOrderDetail:edit"),onClick:function(){$(a)},children:"\u4FEE\u6539"},"edit"),(0,e.jsx)(h.ZP,{type:"link",size:"small",danger:!0,hidden:!T.hasPerms("wms:checkOrderDetail:remove"),onClick:o()(u()().mark(function t(){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:j.Z.confirm({title:"\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u8BE5\u76D8\u70B9\u660E\u7EC6\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var l=o()(u()().mark(function F(){var E;return u()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,Q([a]);case 2:E=b.sent,E&&M.current&&M.current.reload();case 4:case"end":return b.stop()}},F)}));function C(){return l.apply(this,arguments)}return C}()});case 1:case"end":return i.stop()}},t)})),children:"\u5220\u9664"},"delete")]}}];return(0,e.jsxs)(P.Z,{title:"\u76D8\u70B9\u5355\u660E\u7EC6 - ".concat(J),width:1350,open:H,onClose:V,destroyOnClose:!0,children:[(0,e.jsx)(W.Z,{headerTitle:"\u76D8\u70B9\u660E\u7EC6\u5217\u8868",actionRef:M,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsxs)(h.ZP,{type:"primary",hidden:!T.hasPerms("wms:checkOrderDetail:add"),onClick:function(){$(void 0)},children:[(0,e.jsx)(A.Z,{})," \u65B0\u589E"]},"add"),(0,e.jsxs)(h.ZP,{type:"primary",hidden:!T.hasPerms("wms:checkOrderDetail:export"),onClick:o()(u()().mark(function s(){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ue();case 2:case"end":return t.stop()}},s)})),children:[(0,e.jsx)(k.Z,{})," \u5BFC\u51FA"]},"export")]},request:function(){var d=o()(u()().mark(function s(a){var t;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(L){i.next=2;break}return i.abrupt("return",{data:[],success:!0});case 2:return N(!0),i.prev=3,i.next=6,(0,O.al)(m()(m()({},a),{},{checkOrderId:L}));case 6:return t=i.sent,i.abrupt("return",{data:t.rows,total:t.total,success:!0});case 8:return i.prev=8,N(!1),i.finish(8);case 11:case"end":return i.stop()}},s,null,[[3,,8,11]])}));return function(s){return d.apply(this,arguments)}}(),columns:se,rowSelection:{onChange:function(s,a){S(a)}},loading:ne}),(y==null?void 0:y.length)>0&&(0,e.jsx)("div",{style:{position:"fixed",bottom:0,right:0,width:"100%",padding:"16px",background:"#fff",boxShadow:"0 -2px 8px rgba(0, 0, 0, 0.15)"},children:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,e.jsxs)("div",{children:["\u5DF2\u9009\u62E9 ",(0,e.jsx)("a",{style:{fontWeight:600},children:y.length})," \u9879"]}),(0,e.jsx)(h.ZP,{danger:!0,hidden:!T.hasPerms("wms:checkOrderDetail:remove"),onClick:o()(u()().mark(function d(){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:j.Z.confirm({title:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u6240\u9009\u6570\u636E\u9879?",icon:(0,e.jsx)(ExclamationCircleOutlined,{}),content:"\u8BF7\u8C28\u614E\u64CD\u4F5C",onOk:function(){return o()(u()().mark(function _(){var i,l,C;return u()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,Q(y);case 2:i=E.sent,i&&(S([]),(l=M.current)===null||l===void 0||(C=l.reloadAndRest)===null||C===void 0||C.call(l));case 4:case"end":return E.stop()}},_)}))()},onCancel:function(){}});case 1:case"end":return a.stop()}},d)})),children:"\u6279\u91CF\u5220\u9664"},"batchRemove")]})})]})});R.default=c},54936:function(z,R,r){r.d(R,{WB:function(){return W},al:function(){return U},kW:function(){return p},mQ:function(){return A}});var w=r(90228),m=r.n(w),I=r(87999),u=r.n(I),g=r(61032),o=r(18606);function U(e){return f.apply(this,arguments)}function f(){return f=u()(m()().mark(function e(c){return m()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,g.request)("/api/wms/checkOrderDetail/list",{method:"GET",params:c}));case 1:case"end":return n.stop()}},e)})),f.apply(this,arguments)}function p(e,c){return(0,o.su)("/api/wms/checkOrderDetail/export",{params:e},"checkOrderDetail_".concat(new Date().getTime(),".xlsx"))}function B(e){return request("/api/wms/checkOrderDetail/".concat(e),{method:"GET"})}function v(e){return h.apply(this,arguments)}function h(){return h=_asyncToGenerator(_regeneratorRuntime().mark(function e(c){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/wms/checkOrderDetail",{method:"POST",data:c}));case 1:case"end":return n.stop()}},e)})),h.apply(this,arguments)}function j(e){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function e(c){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/wms/checkOrderDetail",{method:"PUT",data:c}));case 1:case"end":return n.stop()}},e)})),P.apply(this,arguments)}function A(e){return k.apply(this,arguments)}function k(){return k=u()(m()().mark(function e(c){return m()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,g.request)("/api/wms/checkOrderDetail/".concat(c),{method:"DELETE"}));case 1:case"end":return n.stop()}},e)})),k.apply(this,arguments)}function W(e){return O.apply(this,arguments)}function O(){return O=u()(m()().mark(function e(c){return m()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,g.request)("/api/wms/checkOrderDetail/list/".concat(c),{method:"GET"}));case 1:case"end":return n.stop()}},e)})),O.apply(this,arguments)}}}]);
