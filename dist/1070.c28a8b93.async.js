"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1070],{81070:function(W,b,n){n.r(b);var B=n(15558),o=n.n(B),F=n(90228),g=n.n(F),O=n(26068),A=n.n(O),w=n(87999),P=n.n(w),K=n(48305),C=n.n(K),Z=n(75271),v=n(81114),f=n(2336),x=n(79654),T=n(51162),L=n(1153),k=n(48625),y=n(8797),m=n(57355),d=n(23102),i=n(86015),r=n(73320),D=n(54584),u=n(35609),$=n(16621),ie=n(86743),V=n(17254),le=n(88223),X=n(10392),c=n(81704),e=n(52676),Be=v.Z.TextArea,_e=function(S){var me=S.visible,z=S.onClose,oe=S.title,I=S.formData,H=S.categoryTreeSelect,J=S.onSuccess,de=f.Z.useForm(),ce=C()(de,1),Y=ce[0],pe=f.Z.useForm(),he=C()(pe,1),Q=he[0],Ce=f.Z.useForm(),fe=C()(Ce,1),N=fe[0],ge=(0,Z.useState)({itemSkuList:(I==null?void 0:I.sku)||[{skuName:"",barcode:"",skuCode:"",length:void 0,width:void 0,height:void 0,grossWeight:void 0,netWeight:void 0,costPrice:void 0,sellingPrice:void 0}]}),q=C()(ge,2),E=q[0],j=q[1],Ee=(0,Z.useState)(!1),ee=C()(Ee,2),ve=ee[0],R=ee[1],De=(0,Z.useState)(""),ne=C()(De,2),Pe=ne[0],je=ne[1],xe=(0,Z.useState)(!1),te=C()(xe,2),ke=te[0],ye=te[1],Me=(0,Z.useState)(!1),re=C()(Me,2),ue=re[0],U=re[1],Oe=function(){var h=P()(g()().mark(function p(){var s,_;return g()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Y.validateFields();case 3:return s=t.sent,t.next=6,Q.validateFields();case 6:if(E.itemSkuList.length!==0){t.next=9;break}return x.ZP.error("\u81F3\u5C11\u5305\u542B\u4E00\u4E2A\u5546\u54C1\u89C4\u683C"),t.abrupt("return");case 9:if(U(!0),_=A()(A()({},s),{},{sku:E.itemSkuList}),!I.id){t.next=16;break}return t.next=14,(0,V.$G)(_);case 14:t.next=18;break;case 16:return t.next=18,(0,V.jX)(_);case 18:x.ZP.success("\u64CD\u4F5C\u6210\u529F"),J(),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(0),console.error("\u8868\u5355\u9A8C\u8BC1\u5931\u8D25:",t.t0);case 25:return t.prev=25,U(!1),t.finish(25);case 28:case"end":return t.stop()}},p,null,[[0,22,25,28]])}));return function(){return h.apply(this,arguments)}}(),Le=function(p){je("\u65B0\u589E\u5546\u54C1\u5206\u7C7B"),ye(p),p&&N.setFieldsValue({parentId:void 0}),R(!0)},be=function(){var h=P()(g()().mark(function p(){var s;return g()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,N.validateFields();case 3:if(s=l.sent,U(!0),!s.id){l.next=10;break}return l.next=8,(0,X.M3)(s);case 8:l.next=12;break;case 10:return l.next=12,(0,X.Sp)(s);case 12:x.ZP.success(s.id?"\u4FEE\u6539\u6210\u529F":"\u65B0\u589E\u6210\u529F"),R(!1),J(),l.next=20;break;case 17:l.prev=17,l.t0=l.catch(0),console.error("\u5206\u7C7B\u8868\u5355\u9A8C\u8BC1\u5931\u8D25:",l.t0);case 20:return l.prev=20,U(!1),l.finish(20);case 23:case"end":return l.stop()}},p,null,[[0,17,20,23]])}));return function(){return h.apply(this,arguments)}}(),Ze=function(){j(function(p){return{itemSkuList:[].concat(o()(p.itemSkuList),[{skuName:"",barcode:"",skuCode:"",length:void 0,width:void 0,height:void 0,grossWeight:void 0,netWeight:void 0,costPrice:void 0,sellingPrice:void 0}])}})},Te=function(){var h=P()(g()().mark(function p(s,_){return g()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s.id){t.next=3;break}return j(function(a){return{itemSkuList:a.itemSkuList.filter(function(se,G){return G!==_})}}),t.abrupt("return");case 3:if(E.itemSkuList.length!==1){t.next=6;break}return x.ZP.error("\u81F3\u5C11\u5305\u542B\u4E00\u4E2A\u5546\u54C1\u89C4\u683C"),t.abrupt("return");case 6:T.Z.confirm({title:"\u786E\u8BA4\u5220\u9664\u89C4\u683C\u3010".concat(s.skuName,"\u3011\u5417\uFF1F"),onOk:function(){var a=P()(g()().mark(function G(){var ae;return g()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.prev=0,M.next=3,(0,le.pe)(s.id);case 3:x.ZP.success("\u5220\u9664\u6210\u529F"),ae=E.itemSkuList.filter(function(Ae,Se){return Se!==_}),j({itemSkuList:ae}),M.next=11;break;case 8:M.prev=8,M.t0=M.catch(0),M.t0===409&&T.Z.error({title:"\u7CFB\u7EDF\u63D0\u793A",content:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{children:["\u89C4\u683C\u3010",s.skuName,"\u3011\u5DF2\u6709\u4E1A\u52A1\u6570\u636E\u5173\u8054\uFF0C\u4E0D\u80FD\u5220\u9664\uFF01"]}),(0,e.jsx)("div",{children:"\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5904\u7406\uFF01"})]})});case 11:case"end":return M.stop()}},G,null,[[0,8]])}));function se(){return a.apply(this,arguments)}return se}()});case 7:case"end":return t.stop()}},p)}));return function(s,_){return h.apply(this,arguments)}}();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(L.Z,{title:oe,width:"80%",open:me,onClose:z,footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(k.ZP,{onClick:z,style:{marginRight:8},children:"\u53D6\u6D88"}),(0,e.jsx)(k.ZP,{type:"primary",loading:ue,onClick:Oe,children:"\u786E\u5B9A"})]}),children:[(0,e.jsx)(y.Z,{children:(0,e.jsxs)(f.Z,{form:Y,layout:"vertical",initialValues:I,children:[(0,e.jsxs)(m.Z,{gutter:24,children:[(0,e.jsx)(d.Z,{span:12,children:(0,e.jsx)(f.Z.Item,{label:"\u5546\u54C1\u540D\u79F0",name:"itemName",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"}],children:(0,e.jsx)(v.Z,{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"})})}),(0,e.jsx)(d.Z,{span:10,children:(0,e.jsx)(f.Z.Item,{label:"\u5546\u54C1\u5206\u7C7B",name:"itemCategory",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B"}],children:(0,e.jsx)(i.Z,{treeData:H,placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",style:{width:"100%"},fieldNames:{label:"title",value:"key",children:"children"}})})}),(0,e.jsx)(d.Z,{span:1,children:(0,e.jsx)(k.ZP,{type:"link",icon:(0,e.jsx)($.Z,{}),style:{height:32,lineHeight:"32px"},onClick:function(){return Le(!0)},children:"\u65B0\u589E\u5206\u7C7B"})})]}),(0,e.jsxs)(m.Z,{gutter:24,children:[(0,e.jsx)(d.Z,{span:12,children:(0,e.jsx)(f.Z.Item,{label:"\u5546\u54C1\u7F16\u53F7",name:"itemCode",children:(0,e.jsx)(v.Z,{placeholder:"\u8BF7\u8F93\u5165\u7F16\u53F7"})})}),(0,e.jsx)(d.Z,{span:12,children:(0,e.jsx)(f.Z.Item,{label:"\u5546\u54C1\u5355\u4F4D",name:"unit",children:(0,e.jsx)(v.Z,{placeholder:"\u8BF7\u8F93\u5165\u5355\u4F4D\u7C7B\u522B"})})})]}),(0,e.jsx)(m.Z,{gutter:24,children:(0,e.jsx)(d.Z,{span:12,children:(0,e.jsx)(f.Z.Item,{label:"\u5546\u54C1\u54C1\u724C",name:"itemBrand",children:(0,e.jsx)(r.Z,{placeholder:"\u8BF7\u9009\u62E9\u5546\u54C1\u54C1\u724C",style:{width:"100%"},allowClear:!0,showSearch:!0})})})})]})}),(0,e.jsx)(y.Z,{title:"\u89C4\u683C",className:c.Z.mt20,children:(0,e.jsx)(f.Z,{form:Q,children:(0,e.jsxs)(D.Z,{dataSource:E.itemSkuList,bordered:!0,pagination:!1,footer:function(){return(0,e.jsx)("div",{style:{padding:"6px 2px",textAlign:"center"},children:(0,e.jsx)(k.ZP,{type:"link",icon:(0,e.jsx)($.Z,{}),onClick:Ze,children:"\u6DFB\u52A0\u5546\u54C1\u89C4\u683C"})})},children:[(0,e.jsx)(D.Z.Column,{title:"\u89C4\u683C\u540D\u79F0",dataIndex:"skuName",render:function(p,s,_){return(0,e.jsx)(f.Z.Item,{name:["itemSkuList",_,"skuName"],rules:[{required:!0,message:"\u89C4\u683C\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}],style:{marginBottom:0},children:(0,e.jsx)(v.Z,{placeholder:"\u8BF7\u8F93\u5165\u89C4\u683C\u540D\u79F0"})})}}),(0,e.jsx)(D.Z.Column,{title:"\u7F16\u53F7/\u6761\u7801",width:250,render:function(p,s,_){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:c.Z.flexCenter,children:[(0,e.jsx)("span",{className:c.Z.mr5,style:{width:50},children:"\u7F16\u53F7"}),(0,e.jsx)(v.Z,{value:s.skuCode,onChange:function(t){var a=o()(E.itemSkuList);a[_].skuCode=t.target.value,j({itemSkuList:a})}})]}),(0,e.jsxs)("div",{className:c.Z.flexCenter,style:{marginTop:5},children:[(0,e.jsx)("span",{className:c.Z.mr5,style:{width:50},children:"\u6761\u7801"}),(0,e.jsx)(v.Z,{value:s.barcode,onChange:function(t){var a=o()(E.itemSkuList);a[_].barcode=t.target.value,j({itemSkuList:a})}})]})]})}}),(0,e.jsx)(D.Z.Column,{title:"\u957F/\u5BBD/\u9AD8(cm)",width:200,render:function(p,s,_){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:c.Z.flexCenter,children:[(0,e.jsx)("span",{className:c.Z.mr5,children:"\u957F"}),(0,e.jsx)(u.Z,{min:0,precision:1,style:{width:"100%"},value:s.length,onChange:function(t){var a=o()(E.itemSkuList);a[_].length=t,j({itemSkuList:a})}})]}),(0,e.jsxs)("div",{className:c.Z.flexCenter,style:{marginTop:5},children:[(0,e.jsx)("span",{className:c.Z.mr5,children:"\u5BBD"}),(0,e.jsx)(u.Z,{min:0,precision:1,style:{width:"100%"},value:s.width,onChange:function(t){var a=o()(E.itemSkuList);a[_].width=t,j({itemSkuList:a})}})]}),(0,e.jsxs)("div",{className:c.Z.flexCenter,style:{marginTop:5},children:[(0,e.jsx)("span",{className:c.Z.mr5,children:"\u9AD8"}),(0,e.jsx)(u.Z,{min:0,precision:1,style:{width:"100%"},value:s.height,onChange:function(t){var a=o()(E.itemSkuList);a[_].height=t,j({itemSkuList:a})}})]})]})}}),(0,e.jsx)(D.Z.Column,{title:"\u51C0\u91CD/\u6BDB\u91CD(kg)",width:240,render:function(p,s,_){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:c.Z.flexCenter,children:[(0,e.jsx)("span",{className:c.Z.mr5,children:"\u51C0\u91CD"}),(0,e.jsx)(u.Z,{min:0,precision:3,style:{width:"100%"},value:s.netWeight,onChange:function(t){var a=o()(E.itemSkuList);a[_].netWeight=t,j({itemSkuList:a})}})]}),(0,e.jsxs)("div",{className:c.Z.flexCenter,style:{marginTop:5},children:[(0,e.jsx)("span",{className:c.Z.mr5,children:"\u6BDB\u91CD"}),(0,e.jsx)(u.Z,{min:0,precision:3,style:{width:"100%"},value:s.grossWeight,onChange:function(t){var a=o()(E.itemSkuList);a[_].grossWeight=t,j({itemSkuList:a})}})]})]})}}),(0,e.jsx)(D.Z.Column,{title:"\u6210\u672C\u4EF7/\u9500\u552E\u4EF7(\u5143)",width:240,render:function(p,s,_){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:c.Z.flexCenter,children:[(0,e.jsx)("span",{className:c.Z.mr5,children:"\u6210\u672C\u4EF7"}),(0,e.jsx)(u.Z,{min:0,precision:2,style:{width:"100%"},value:s.costPrice,onChange:function(t){var a=o()(E.itemSkuList);a[_].costPrice=t,j({itemSkuList:a})}})]}),(0,e.jsxs)("div",{className:c.Z.flexCenter,style:{marginTop:5},children:[(0,e.jsx)("span",{className:c.Z.mr5,children:"\u9500\u552E\u4EF7"}),(0,e.jsx)(u.Z,{min:0,precision:2,style:{width:"100%"},value:s.sellingPrice,onChange:function(t){var a=o()(E.itemSkuList);a[_].sellingPrice=t,j({itemSkuList:a})}})]})]})}}),(0,e.jsx)(D.Z.Column,{title:"\u64CD\u4F5C",width:80,align:"right",render:function(p,s,_){return(0,e.jsx)(k.ZP,{type:"link",icon:(0,e.jsx)(ie.Z,{}),onClick:function(){return Te(s,_)}})}})]})})})]}),(0,e.jsx)(T.Z,{title:Pe,width:500,open:ve,onCancel:function(){return R(!1)},footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(k.ZP,{onClick:function(){return R(!1)},style:{marginRight:8},children:"\u53D6\u6D88"}),(0,e.jsx)(k.ZP,{type:"primary",loading:ue,onClick:be,children:"\u786E\u5B9A"})]}),children:(0,e.jsxs)(f.Z,{form:N,layout:"vertical",children:[(0,e.jsx)(f.Z.Item,{label:"\u4E0A\u7EA7\u5206\u7C7B",name:"parentId",children:(0,e.jsx)(i.Z,{treeData:H,placeholder:"\u4E0A\u7EA7\u5206\u7C7B",style:{width:"100%"},fieldNames:{label:"title",value:"key",children:"children"},disabled:!ke})}),(0,e.jsx)(f.Z.Item,{label:"\u5546\u54C1\u5206\u7C7B\u540D\u79F0",name:"categoryName",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1\u5206\u7C7B\u540D\u79F0"}],children:(0,e.jsx)(v.Z,{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u5206\u7C7B\u540D\u79F0"})})]})})]})};b.default=_e},17254:function(W,b,n){n.d(b,{$G:function(){return k},Ry:function(){return m},jX:function(){return T},rV:function(){return x}});var B=n(90228),o=n.n(B),F=n(87999),g=n.n(F),O=n(61032),A=n(18606);function w(i){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function i(r){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/wms/item/list",{method:"GET",params:r}));case 1:case"end":return u.stop()}},i)})),P.apply(this,arguments)}function K(i){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function i(r){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/wms/item/listNoPage",{method:"GET",params:r}));case 1:case"end":return u.stop()}},i)})),C.apply(this,arguments)}function Z(i){return v.apply(this,arguments)}function v(){return v=_asyncToGenerator(_regeneratorRuntime().mark(function i(r){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/wms/itemSku/selectList",{method:"GET",params:r}));case 1:case"end":return u.stop()}},i)})),v.apply(this,arguments)}function f(i,r){return downLoadXlsx("/api/wms/item/export",{params:i},"item_".concat(new Date().getTime(),".xlsx"))}function x(i){return(0,O.request)("/api/wms/item/".concat(i),{method:"GET"})}function T(i){return L.apply(this,arguments)}function L(){return L=g()(o()().mark(function i(r){return o()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,O.request)("/api/wms/item",{method:"POST",data:r}));case 1:case"end":return u.stop()}},i)})),L.apply(this,arguments)}function k(i){return y.apply(this,arguments)}function y(){return y=g()(o()().mark(function i(r){return o()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,O.request)("/api/wms/item",{method:"PUT",data:r}));case 1:case"end":return u.stop()}},i)})),y.apply(this,arguments)}function m(i){return d.apply(this,arguments)}function d(){return d=g()(o()().mark(function i(r){return o()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,O.request)("/api/wms/item/".concat(r),{method:"DELETE"}));case 1:case"end":return u.stop()}},i)})),d.apply(this,arguments)}},88223:function(W,b,n){n.d(b,{pe:function(){return k},uE:function(){return w}});var B=n(90228),o=n.n(B),F=n(87999),g=n.n(F),O=n(61032),A=n(18606);function w(m){return P.apply(this,arguments)}function P(){return P=g()(o()().mark(function m(d){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,O.request)("/api/wms/itemSku/list",{method:"GET",params:d}));case 1:case"end":return r.stop()}},m)})),P.apply(this,arguments)}function K(m){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function m(d){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/wms/itemSku/listNoPage",{method:"GET",params:d}));case 1:case"end":return r.stop()}},m)})),C.apply(this,arguments)}function Z(m,d){return downLoadXlsx("/api/wms/itemSku/export",{params:m},"itemSku_".concat(new Date().getTime(),".xlsx"))}function v(m){return request("/api/wms/itemSku/".concat(m),{method:"GET"})}function f(m){return x.apply(this,arguments)}function x(){return x=_asyncToGenerator(_regeneratorRuntime().mark(function m(d){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/wms/itemSku",{method:"POST",data:d}));case 1:case"end":return r.stop()}},m)})),x.apply(this,arguments)}function T(m){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime().mark(function m(d){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/wms/itemSku",{method:"PUT",data:d}));case 1:case"end":return r.stop()}},m)})),L.apply(this,arguments)}function k(m){return y.apply(this,arguments)}function y(){return y=g()(o()().mark(function m(d){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,O.request)("/api/wms/itemSku/".concat(d),{method:"DELETE"}));case 1:case"end":return r.stop()}},m)})),y.apply(this,arguments)}},81704:function(W,b){b.Z={appContainer:"appContainer___wvvxK",mt20:"mt20___z4Ygz",mr10:"mr10___G6Gvv",flexSpaceBetween:"flexSpaceBetween___HgehM",flexCenter:"flexCenter___bf7Eo",customTreeNode:"customTreeNode___gqrNv","ant-btn":"ant-btn___WJ3od",myCell:"myCell___vfuzR"}}}]);
