"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2969,2151],{59472:function(Q,j,e){var T=e(99426),h=e(99960),U=e(67867),u=e(75271),K=e(61511),b=e(50241),S=e(52676),v=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],i=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],f=function(P,t){var Z=P.fieldProps,o=P.children,r=P.params,F=P.proFieldProps,a=P.mode,B=P.valueEnum,A=P.request,R=P.showSearch,E=P.options,L=(0,h.Z)(P,v),C=(0,u.useContext)(K.Z);return(0,S.jsx)(b.Z,(0,T.Z)((0,T.Z)({valueEnum:(0,U.h)(B),request:A,params:r,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,T.Z)({options:E,mode:a,showSearch:R,getPopupContainer:C.getPopupContainer},Z),ref:t,proFieldProps:F},L),{},{children:o}))},m=u.forwardRef(function(D,P){var t=D.fieldProps,Z=D.children,o=D.params,r=D.proFieldProps,F=D.mode,a=D.valueEnum,B=D.request,A=D.options,R=(0,h.Z)(D,i),E=(0,T.Z)({options:A,mode:F||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},t),L=(0,u.useContext)(K.Z);return(0,S.jsx)(b.Z,(0,T.Z)((0,T.Z)({valueEnum:(0,U.h)(a),request:B,params:o,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,T.Z)({getPopupContainer:L.getPopupContainer},E),ref:P,proFieldProps:r},R),{},{children:Z}))}),I=u.forwardRef(f),M=m,_=I;_.SearchSelect=M,_.displayName="ProFormComponent",j.Z=_},68834:function(Q,j,e){var T=e(75611),h=e(99426),U=e(99960),u=e(93954),K=e(2336),b=e(21263),S=e(18051),v=e(75271),i=e(50241),f=e(52676),m=["fieldProps","proFieldProps"],I=["fieldProps","proFieldProps"],M="text",_=function(o){var r=o.fieldProps,F=o.proFieldProps,a=(0,U.Z)(o,m);return(0,f.jsx)(i.Z,(0,h.Z)({valueType:M,fieldProps:r,filedConfig:{valueType:M},proFieldProps:F},a))},D=function(o){var r=(0,u.Z)(o.open||!1,{value:o.open,onChange:o.onOpenChange}),F=(0,T.Z)(r,2),a=F[0],B=F[1];return(0,f.jsx)(K.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(R){var E,L=R.getFieldValue(o.name||[]);return(0,f.jsx)(b.Z,(0,h.Z)((0,h.Z)({getPopupContainer:function(s){return s&&s.parentNode?s.parentNode:s},onOpenChange:function(s){return B(s)},content:(0,f.jsxs)("div",{style:{padding:"4px 0"},children:[(E=o.statusRender)===null||E===void 0?void 0:E.call(o,L),o.strengthText?(0,f.jsx)("div",{style:{marginTop:10},children:(0,f.jsx)("span",{children:o.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},o.popoverProps),{},{open:a,children:o.children}))}})},P=function(o){var r=o.fieldProps,F=o.proFieldProps,a=(0,U.Z)(o,I),B=(0,v.useState)(!1),A=(0,T.Z)(B,2),R=A[0],E=A[1];return r!=null&&r.statusRender&&a.name?(0,f.jsx)(D,{name:a.name,statusRender:r==null?void 0:r.statusRender,popoverProps:r==null?void 0:r.popoverProps,strengthText:r==null?void 0:r.strengthText,open:R,onOpenChange:E,children:(0,f.jsx)("div",{children:(0,f.jsx)(i.Z,(0,h.Z)({valueType:"password",fieldProps:(0,h.Z)((0,h.Z)({},(0,S.Z)(r,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(C){var s;r==null||(s=r.onBlur)===null||s===void 0||s.call(r,C),E(!1)},onClick:function(C){var s;r==null||(s=r.onClick)===null||s===void 0||s.call(r,C),E(!0)}}),proFieldProps:F,filedConfig:{valueType:M}},a))})}):(0,f.jsx)(i.Z,(0,h.Z)({valueType:"password",fieldProps:r,proFieldProps:F,filedConfig:{valueType:M}},a))},t=_;t.Password=P,t.displayName="ProFormComponent",j.Z=t},62151:function(Q,j,e){e.r(j);var T=e(90228),h=e.n(T),U=e(87999),u=e.n(U),K=e(48305),b=e.n(K),S=e(75271),v=e(54733),i=e(68834),f=e(59472),m=e(2336),I=e(1153),M=e(48625),_=e(52676),D=function(t){var Z=m.Z.useForm(),o=b()(Z,1),r=o[0];(0,S.useEffect)(function(){r.resetFields(),r.setFieldsValue({id:t.values.id,merchantCode:t.values.merchantCode,merchantName:t.values.merchantName,merchantType:t.values.merchantType,merchantLevel:t.values.merchantLevel,bankName:t.values.bankName,bankAccount:t.values.bankAccount,address:t.values.address,mobile:t.values.mobile,tel:t.values.tel,contactPerson:t.values.contactPerson,email:t.values.email,remark:t.values.remark})},[r,t]);var F=function(){var a=u()(h()().mark(function B(A){return h()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:t.onSubmit(A);case 1:case"end":return E.stop()}},B)}));return function(A){return a.apply(this,arguments)}}();return(0,_.jsx)(I.Z,{width:600,title:t.values.id?"\u4FEE\u6539\u5F80\u6765\u5355\u4F4D":"\u6DFB\u52A0\u5F80\u6765\u5355\u4F4D",open:t.visible,onClose:t.onClose,destroyOnClose:!0,footer:(0,_.jsxs)("div",{style:{textAlign:"right"},children:[(0,_.jsx)(M.ZP,{onClick:t.onClose,style:{marginRight:8},children:"\u53D6\u6D88"}),(0,_.jsx)(M.ZP,{type:"primary",onClick:function(){return r.submit()},children:"\u786E\u5B9A"})]}),children:(0,_.jsxs)(v.A,{form:r,submitter:!1,layout:"horizontal",onFinish:F,children:[(0,_.jsx)(i.Z,{name:"id",label:"ID",hidden:!0,disabled:!0}),(0,_.jsx)(i.Z,{name:"merchantCode",label:"\u7F16\u53F7",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u7F16\u53F7",rules:[{required:!0,message:"\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,_.jsx)(i.Z,{name:"merchantName",label:"\u540D\u79F0",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",rules:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,_.jsx)(f.Z,{name:"merchantType",label:"\u4F01\u4E1A\u7C7B\u578B",width:"xl",placeholder:"\u8BF7\u9009\u62E9\u4F01\u4E1A\u7C7B\u578B",options:[{label:"\u7C7B\u578B1",value:1},{label:"\u7C7B\u578B2",value:2}],rules:[{required:!0,message:"\u4F01\u4E1A\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,_.jsx)(i.Z,{name:"merchantLevel",label:"\u7EA7\u522B",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u7EA7\u522B"}),(0,_.jsx)(i.Z,{name:"bankName",label:"\u5F00\u6237\u884C",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u5F00\u6237\u884C"}),(0,_.jsx)(i.Z,{name:"bankAccount",label:"\u94F6\u884C\u8D26\u6237",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u94F6\u884C\u8D26\u6237"}),(0,_.jsx)(i.Z,{name:"address",label:"\u5730\u5740",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u5730\u5740"}),(0,_.jsx)(i.Z,{name:"mobile",label:"\u624B\u673A\u53F7",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"}),(0,_.jsx)(i.Z,{name:"tel",label:"\u5EA7\u673A\u53F7",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u5EA7\u673A\u53F7"}),(0,_.jsx)(i.Z,{name:"contactPerson",label:"\u8054\u7CFB\u4EBA",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA"}),(0,_.jsx)(i.Z,{name:"email",label:"Email",width:"xl",placeholder:"\u8BF7\u8F93\u5165Email"}),(0,_.jsx)(i.Z,{name:"remark",label:"\u5907\u6CE8",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"})]})})};j.default=D},92969:function(Q,j,e){e.r(j);var T=e(48305),h=e.n(T),U=e(90228),u=e.n(U),K=e(26068),b=e.n(K),S=e(87999),v=e.n(S),i=e(75271),f=e(61032),m=e(79654),I=e(51162),M=e(48625),_=e(73323),D=e(90607),P=e(49026),t=e(16621),Z=e(30426),o=e(20860),r=e(6438),F=e(62151),a=e(52676),B=function(){var C=v()(u()().mark(function s(O){var g,l;return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return g=m.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),n.prev=1,n.next=4,(0,r.tm)(b()({},O));case 4:return l=n.sent,g(),l.code===200?m.ZP.success("\u6DFB\u52A0\u6210\u529F"):m.ZP.error(l.msg),n.abrupt("return",!0);case 10:return n.prev=10,n.t0=n.catch(1),g(),m.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),n.abrupt("return",!1);case 15:case"end":return n.stop()}},s,null,[[1,10]])}));return function(O){return C.apply(this,arguments)}}(),A=function(){var C=v()(u()().mark(function s(O){var g,l;return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return g=m.ZP.loading("\u6B63\u5728\u66F4\u65B0"),n.prev=1,n.next=4,(0,r.Dn)(O);case 4:return l=n.sent,g(),l.code===200?m.ZP.success("\u66F4\u65B0\u6210\u529F"):m.ZP.error(l.msg),n.abrupt("return",!0);case 10:return n.prev=10,n.t0=n.catch(1),g(),m.ZP.error("\u66F4\u65B0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),n.abrupt("return",!1);case 15:case"end":return n.stop()}},s,null,[[1,10]])}));return function(O){return C.apply(this,arguments)}}(),R=function(){var C=v()(u()().mark(function s(O){var g,l;return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(g=m.ZP.loading("\u6B63\u5728\u5220\u9664"),O){n.next=3;break}return n.abrupt("return",!0);case 3:return n.prev=3,n.next=6,(0,r.fT)(O.map(function(G){return G.id}).join(","));case 6:return l=n.sent,g(),l.code===200?m.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):m.ZP.error(l.msg),n.abrupt("return",!0);case 12:return n.prev=12,n.t0=n.catch(3),g(),n.t0===409?I.Z.error({title:"\u7CFB\u7EDF\u63D0\u793A",content:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:"\u5F80\u6765\u5355\u4F4D\u5DF2\u6709\u4E1A\u52A1\u6570\u636E\u5173\u8054\uFF0C\u4E0D\u80FD\u5220\u9664\uFF01"}),(0,a.jsx)("div",{children:"\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5904\u7406\uFF01"})]})}):m.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),n.abrupt("return",!1);case 17:case"end":return n.stop()}},s,null,[[3,12]])}));return function(O){return C.apply(this,arguments)}}(),E=function(){var C=v()(u()().mark(function s(){var O;return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return O=m.ZP.loading("\u6B63\u5728\u5BFC\u51FA"),l.prev=1,l.next=4,(0,r.Jf)();case 4:return O(),m.ZP.success("\u5BFC\u51FA\u6210\u529F"),l.abrupt("return",!0);case 9:return l.prev=9,l.t0=l.catch(1),O(),m.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),l.abrupt("return",!1);case 14:case"end":return l.stop()}},s,null,[[1,9]])}));return function(){return C.apply(this,arguments)}}(),L=function(){var s=(0,i.useState)(!1),O=h()(s,2),g=O[0],l=O[1],W=(0,i.useRef)(),n=(0,i.useState)(),G=h()(n,2),ee=G[0],J=G[1],re=(0,i.useState)([]),X=h()(re,2),k=X[0],Y=X[1],N=(0,f.useAccess)(),ne=[{title:"\u7F16\u53F7",dataIndex:"merchantCode",valueType:"text"},{title:"\u540D\u79F0",dataIndex:"merchantName",valueType:"text"},{title:"\u4F01\u4E1A\u7C7B\u578B",dataIndex:"merchantType",valueType:"select",valueEnum:{1:{text:"\u7C7B\u578B1"},2:{text:"\u7C7B\u578B2"}}},{title:"\u7EA7\u522B",dataIndex:"merchantLevel",valueType:"text"},{title:"\u8054\u7CFB\u4EBA",dataIndex:"contactPerson",valueType:"text"},{title:"\u5907\u6CE8",dataIndex:"remark",valueType:"text"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",valueType:"dateTime",hideInSearch:!0},{title:"\u64CD\u4F5C",dataIndex:"option",width:"180px",valueType:"option",render:function(x,c){return[(0,a.jsx)(M.ZP,{type:"link",size:"small",hidden:!N.hasPerms("wms:merchant:edit"),onClick:function(){J(c),l(!0)},children:"\u4FEE\u6539"},"edit"),(0,a.jsx)(M.ZP,{type:"link",size:"small",danger:!0,hidden:!N.hasPerms("wms:merchant:remove"),onClick:v()(u()().mark(function p(){return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:I.Z.confirm({title:"\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u5F80\u6765\u5355\u4F4D\u3010".concat(c.merchantName,"\u3011\u5417\uFF1F"),okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var $=v()(u()().mark(function q(){var w;return u()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,R([c]);case 2:w=V.sent,w&&W.current&&W.current.reload();case 4:case"end":return V.stop()}},q)}));function z(){return $.apply(this,arguments)}return z}()});case 1:case"end":return d.stop()}},p)})),children:"\u5220\u9664"},"delete")]}}];return(0,a.jsxs)(_._z,{children:[(0,a.jsx)(D.Z,{headerTitle:"\u5F80\u6765\u5355\u4F4D\u5217\u8868",actionRef:W,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,a.jsxs)(M.ZP,{type:"primary",hidden:!N.hasPerms("wms:merchant:add"),onClick:function(){J(void 0),l(!0)},children:[(0,a.jsx)(t.Z,{})," \u65B0\u589E"]},"add"),(0,a.jsxs)(M.ZP,{type:"primary",hidden:!N.hasPerms("wms:merchant:export"),onClick:v()(u()().mark(function x(){return u()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,E();case 2:case"end":return p.stop()}},x)})),children:[(0,a.jsx)(Z.Z,{})," \u5BFC\u51FA"]},"export")]},request:function(){var y=v()(u()().mark(function x(c){var p;return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,r.f0)(b()(b()({},c),{},{current:String(c.current),pageSize:String(c.pageSize)}));case 2:return p=d.sent,d.abrupt("return",{data:p.rows,total:p.total,success:!0});case 4:case"end":return d.stop()}},x)}));return function(x){return y.apply(this,arguments)}}(),columns:ne,rowSelection:{onChange:function(x,c){Y(c)}}}),(k==null?void 0:k.length)>0&&(0,a.jsx)(P.S,{extra:(0,a.jsxs)("div",{children:["\u5DF2\u9009\u62E9 ",(0,a.jsx)("a",{style:{fontWeight:600},children:k.length})," \u9879"]}),children:(0,a.jsx)(M.ZP,{danger:!0,hidden:!N.hasPerms("wms:merchant:remove"),onClick:v()(u()().mark(function y(){return u()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:I.Z.confirm({title:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u6240\u9009\u6570\u636E\u9879?",icon:(0,a.jsx)(o.Z,{}),content:"\u8BF7\u8C28\u614E\u64CD\u4F5C",onOk:function(){return v()(u()().mark(function H(){var d,$,z;return u()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,R(k);case 2:d=w.sent,d&&(Y([]),($=W.current)===null||$===void 0||(z=$.reloadAndRest)===null||z===void 0||z.call($));case 4:case"end":return w.stop()}},H)}))()},onCancel:function(){}});case 1:case"end":return c.stop()}},y)})),children:"\u6279\u91CF\u5220\u9664"},"batchRemove")}),(0,a.jsx)(F.default,{onSubmit:function(){var y=v()(u()().mark(function x(c){var p;return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(p=!1,!c.id){d.next=7;break}return d.next=4,A(c);case 4:p=d.sent,d.next=10;break;case 7:return d.next=9,B(c);case 9:p=d.sent;case 10:p&&(l(!1),J(void 0),W.current&&W.current.reload());case 11:case"end":return d.stop()}},x)}));return function(x){return y.apply(this,arguments)}}(),onClose:function(){l(!1),J(void 0)},visible:g,values:ee||{}})]})};j.default=L}}]);
