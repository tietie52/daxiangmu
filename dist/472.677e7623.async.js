"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[472,843,8188,4810],{59472:function(b,U,e){var F=e(99426),n=e(99960),x=e(67867),C=e(75271),L=e(61511),M=e(50241),a=e(52676),Z=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],r=function(p,T){var t=p.fieldProps,l=p.children,s=p.params,P=p.proFieldProps,i=p.mode,c=p.valueEnum,B=p.request,j=p.showSearch,v=p.options,D=(0,n.Z)(p,Z),K=(0,C.useContext)(L.Z);return(0,a.jsx)(M.Z,(0,F.Z)((0,F.Z)({valueEnum:(0,x.h)(c),request:B,params:s,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,F.Z)({options:v,mode:i,showSearch:j,getPopupContainer:K.getPopupContainer},t),ref:T,proFieldProps:P},D),{},{children:l}))},y=C.forwardRef(function(_,p){var T=_.fieldProps,t=_.children,l=_.params,s=_.proFieldProps,P=_.mode,i=_.valueEnum,c=_.request,B=_.options,j=(0,n.Z)(_,u),v=(0,F.Z)({options:B,mode:P||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},T),D=(0,C.useContext)(L.Z);return(0,a.jsx)(M.Z,(0,F.Z)((0,F.Z)({valueEnum:(0,x.h)(i),request:c,params:l,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,F.Z)({getPopupContainer:D.getPopupContainer},v),ref:p,proFieldProps:s},j),{},{children:t}))}),I=C.forwardRef(r),O=y,R=I;R.SearchSelect=O,R.displayName="ProFormComponent",U.Z=R},68834:function(b,U,e){var F=e(75611),n=e(99426),x=e(99960),C=e(93954),L=e(2336),M=e(21263),a=e(18051),Z=e(75271),u=e(50241),r=e(52676),y=["fieldProps","proFieldProps"],I=["fieldProps","proFieldProps"],O="text",R=function(l){var s=l.fieldProps,P=l.proFieldProps,i=(0,x.Z)(l,y);return(0,r.jsx)(u.Z,(0,n.Z)({valueType:O,fieldProps:s,filedConfig:{valueType:O},proFieldProps:P},i))},_=function(l){var s=(0,C.Z)(l.open||!1,{value:l.open,onChange:l.onOpenChange}),P=(0,F.Z)(s,2),i=P[0],c=P[1];return(0,r.jsx)(L.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(j){var v,D=j.getFieldValue(l.name||[]);return(0,r.jsx)(M.Z,(0,n.Z)((0,n.Z)({getPopupContainer:function(g){return g&&g.parentNode?g.parentNode:g},onOpenChange:function(g){return c(g)},content:(0,r.jsxs)("div",{style:{padding:"4px 0"},children:[(v=l.statusRender)===null||v===void 0?void 0:v.call(l,D),l.strengthText?(0,r.jsx)("div",{style:{marginTop:10},children:(0,r.jsx)("span",{children:l.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},l.popoverProps),{},{open:i,children:l.children}))}})},p=function(l){var s=l.fieldProps,P=l.proFieldProps,i=(0,x.Z)(l,I),c=(0,Z.useState)(!1),B=(0,F.Z)(c,2),j=B[0],v=B[1];return s!=null&&s.statusRender&&i.name?(0,r.jsx)(_,{name:i.name,statusRender:s==null?void 0:s.statusRender,popoverProps:s==null?void 0:s.popoverProps,strengthText:s==null?void 0:s.strengthText,open:j,onOpenChange:v,children:(0,r.jsx)("div",{children:(0,r.jsx)(u.Z,(0,n.Z)({valueType:"password",fieldProps:(0,n.Z)((0,n.Z)({},(0,a.Z)(s,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(K){var g;s==null||(g=s.onBlur)===null||g===void 0||g.call(s,K),v(!1)},onClick:function(K){var g;s==null||(g=s.onClick)===null||g===void 0||g.call(s,K),v(!0)}}),proFieldProps:P,filedConfig:{valueType:O}},i))})}):(0,r.jsx)(u.Z,(0,n.Z)({valueType:"password",fieldProps:s,proFieldProps:P,filedConfig:{valueType:O}},i))},T=R;T.Password=p,T.displayName="ProFormComponent",U.Z=T},70843:function(b,U,e){e.r(U);var F=e(75271),n=e(48625),x=e(90607),C=e(23299),L=e(86743),M=e(16621),a=e(52676),Z=function(r){var y=r.areaList,I=r.onAdd,O=r.onUpdate,R=r.onDelete,_=r.loading,p=r.hasAddPerm,T=p===void 0?!0:p,t=r.hasEditPerm,l=t===void 0?!0:t,s=r.hasDeletePerm,P=s===void 0?!0:s,i=[{title:"\u540D\u79F0",dataIndex:"areaName",valueType:"text",onHeaderCell:function(){return{style:{backgroundColor:"#e6f7ff"}}}},{title:"\u7F16\u53F7",dataIndex:"areaCode",valueType:"text"},{title:"\u5907\u6CE8",dataIndex:"remark",valueType:"text"},{title:"\u64CD\u4F5C",dataIndex:"option",width:"180px",valueType:"option",render:function(B,j){return[(0,a.jsx)(n.ZP,{type:"link",size:"small",hidden:!l,onClick:function(){return O(j)},icon:(0,a.jsx)(C.Z,{}),children:"\u4FEE\u6539"},"edit"),(0,a.jsx)(n.ZP,{type:"link",size:"small",danger:!0,hidden:!P,onClick:function(){return R(j)},icon:(0,a.jsx)(L.Z,{}),children:"\u5220\u9664"},"delete")]}}];return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",backgroundColor:"lightgrey"},children:[(0,a.jsx)("span",{style:{fontSize:"14px"},children:"\u5E93\u533A\u5217\u8868"}),(0,a.jsx)(n.ZP,{type:"primary",size:"small",icon:(0,a.jsx)(M.Z,{}),hidden:!T,onClick:I,children:"\u65B0\u589E\u5E93\u533A"})]}),(0,a.jsx)(x.Z,{dataSource:y,columns:i,rowKey:"id",search:!1,options:!1,pagination:!1,loading:_})]})};U.default=Z},18188:function(b,U,e){e.r(U);var F=e(90228),n=e.n(F),x=e(87999),C=e.n(x),L=e(75271),M=e(51162),a=e(48625),Z=e(54733),u=e(68834),r=e(52676),y=function(O){var R=O.visible,_=O.onClose,p=O.onSubmit,T=O.values;return(0,r.jsx)(M.Z,{title:T!=null&&T.id?"\u4FEE\u6539\u4ED3\u5E93":"\u6DFB\u52A0\u4ED3\u5E93",open:R,onCancel:_,footer:null,width:500,destroyOnClose:!0,children:(0,r.jsxs)(Z.A,{initialValues:T||{},onFinish:function(){var t=C()(n()().mark(function l(s){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,p(s);case 2:case"end":return i.stop()}},l)}));return function(l){return t.apply(this,arguments)}}(),submitter:{render:function(l,s){return[(0,r.jsx)(a.ZP,{onClick:_,children:"\u53D6\u6D88"},"cancel"),(0,r.jsx)(a.ZP,{type:"primary",onClick:function(){var i,c;return(i=l.form)===null||i===void 0||(c=i.submit)===null||c===void 0?void 0:c.call(i)},children:"\u786E\u5B9A"},"submit")]}},children:[(0,r.jsx)(u.Z,{name:"id",label:"ID",hidden:!0,disabled:!0}),(0,r.jsx)(u.Z,{name:"warehouseName",label:"\u540D\u79F0",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",rules:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,r.jsx)(u.Z,{name:"warehouseCode",label:"\u7F16\u53F7",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u7F16\u53F7"}),(0,r.jsx)(u.Z,{name:"remark",label:"\u5907\u6CE8",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"})]})})};U.default=y},45262:function(b,U,e){e.r(U);var F=e(75271),n=e(48625),x=e(24783),C=e(86743),L=e(23299),M=e(16621),a=e(52676),Z=function(r){var y=r.warehouseList,I=r.selectedWarehouseId,O=r.onSelect,R=r.onAdd,_=r.onUpdate,p=r.onDelete,T=r.onDrop,t=r.loading,l=r.hasAddPerm,s=l===void 0?!0:l,P=r.hasEditPerm,i=P===void 0?!0:P,c=r.hasDeletePerm,B=c===void 0?!0:c,j=function(D){return(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[(0,a.jsxs)("span",{children:[D.warehouseName,D.warehouseCode&&" (\u7F16\u53F7\uFF1A".concat(D.warehouseCode,")")]}),(0,a.jsxs)("span",{children:[(0,a.jsx)(n.ZP,{type:"link",size:"small",danger:!0,hidden:!B,onClick:function(g){g.stopPropagation(),p(D)},icon:(0,a.jsx)(C.Z,{}),children:"\u5220\u9664"}),(0,a.jsx)(n.ZP,{type:"link",size:"small",hidden:!i,onClick:function(g){g.stopPropagation(),_(D)},icon:(0,a.jsx)(L.Z,{}),children:"\u4FEE\u6539"})]})]})};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",backgroundColor:"lightgrey"},children:[(0,a.jsx)("span",{style:{fontSize:"14px"},children:"\u4ED3\u5E93\u5217\u8868"}),(0,a.jsx)(n.ZP,{type:"primary",size:"small",icon:(0,a.jsx)(M.Z,{}),hidden:!s,onClick:R,children:"\u65B0\u589E\u4ED3\u5E93"})]}),(0,a.jsx)(x.Z,{treeData:y,fieldNames:{key:"id",title:"warehouseName"},selectedKeys:[I],onSelect:function(D){D.length>0&&O(D[0])},draggable:!0,blockNode:!0,titleRender:j,onDrop:T})]})};U.default=Z},64810:function(b,U,e){e.r(U);var F=e(90228),n=e.n(F),x=e(87999),C=e.n(x),L=e(48305),M=e.n(L),a=e(75271),Z=e(54733),u=e(68834),r=e(59472),y=e(2336),I=e(1153),O=e(48625),R=e(62222),_=e(52676),p=function(t){var l=y.Z.useForm(),s=M()(l,1),P=s[0];(0,a.useEffect)(function(){P.resetFields(),P.setFieldsValue({id:t.values.id,areaCode:t.values.areaCode,areaName:t.values.areaName,warehouseId:t.values.warehouseId,remark:t.values.remark})},[P,t]);var i=function(){var c=C()(n()().mark(function B(j){return n()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:t.onSubmit(j);case 1:case"end":return D.stop()}},B)}));return function(j){return c.apply(this,arguments)}}();return(0,_.jsx)(I.Z,{width:600,title:t.values.id?"\u4FEE\u6539\u5E93\u533A":"\u6DFB\u52A0\u5E93\u533A",open:t.visible,onClose:t.onClose,destroyOnClose:!0,footer:(0,_.jsxs)("div",{style:{textAlign:"right"},children:[(0,_.jsx)(O.ZP,{onClick:t.onClose,style:{marginRight:8},children:"\u53D6\u6D88"}),(0,_.jsx)(O.ZP,{type:"primary",onClick:function(){return P.submit()},children:"\u786E\u5B9A"})]}),children:(0,_.jsxs)(Z.A,{form:P,submitter:!1,layout:"horizontal",onFinish:i,children:[(0,_.jsx)(u.Z,{name:"id",label:"ID",hidden:!0,disabled:!0}),(0,_.jsx)(u.Z,{name:"areaName",label:"\u540D\u79F0",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",rules:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,_.jsx)(r.Z,{name:"warehouseId",label:"\u6240\u5C5E\u4ED3\u5E93",width:"xl",placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u4ED3\u5E93",rules:[{required:!0,message:"\u6240\u5C5E\u4ED3\u5E93\u4E0D\u80FD\u4E3A\u7A7A"}],request:C()(n()().mark(function c(){var B;return n()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,R.d8)();case 2:return B=v.sent,v.abrupt("return",B.rows.map(function(D){return{label:D.warehouseName,value:D.id}}));case 4:case"end":return v.stop()}},c)}))}),(0,_.jsx)(u.Z,{name:"areaCode",label:"\u7F16\u53F7",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u7F16\u53F7"}),(0,_.jsx)(u.Z,{name:"remark",label:"\u5907\u6CE8",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"})]})})};U.default=p},472:function(b,U,e){e.r(U);var F=e(90228),n=e.n(F),x=e(87999),C=e.n(x),L=e(48305),M=e.n(L),a=e(75271),Z=e(61032),u=e(79654),r=e(51162),y=e(73323),I=e(62222),O=e(3750),R=e(64810),_=e(45262),p=e(18188),T=e(70843),t=e(52676),l=function(){var P=(0,a.useState)([]),i=M()(P,2),c=i[0],B=i[1],j=(0,a.useState)([]),v=M()(j,2),D=v[0],K=v[1],g=(0,a.useState)(""),G=M()(g,2),w=G[0],H=G[1],ae=(0,a.useState)(!1),J=M()(ae,2),ne=J[0],$=J[1],se=(0,a.useState)(!1),X=M()(se,2),te=X[0],N=X[1],ue=(0,a.useState)(),Q=M()(ue,2),le=Q[0],Y=Q[1],oe=(0,a.useState)(),q=M()(oe,2),de=q[0],ee=q[1],_e=(0,a.useState)(!1),re=M()(_e,2),ie=re[0],k=re[1],S=(0,Z.useAccess)();(0,a.useEffect)(function(){z()},[]),(0,a.useEffect)(function(){if(c.length>0&&!w){var A=c[0].id;H(A),V(A)}},[c]);var z=function(){var A=C()(n()().mark(function E(){var m;return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return k(!0),h.prev=1,h.next=4,(0,I.M_)({pageSize:String(100)});case 4:m=h.sent,B(m.rows),h.next=11;break;case 8:h.prev=8,h.t0=h.catch(1),u.ZP.error("\u83B7\u53D6\u4ED3\u5E93\u5217\u8868\u5931\u8D25");case 11:return h.prev=11,k(!1),h.finish(11);case 14:case"end":return h.stop()}},E,null,[[1,8,11,14]])}));return function(){return A.apply(this,arguments)}}(),V=function(){var A=C()(n()().mark(function E(m){var W;return n()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return k(!0),f.prev=1,f.next=4,(0,O.Xp)({warehouseId:m,pageSize:String(100)});case 4:W=f.sent,K(W.rows),f.next=11;break;case 8:f.prev=8,f.t0=f.catch(1),u.ZP.error("\u83B7\u53D6\u5E93\u533A\u5217\u8868\u5931\u8D25");case 11:return f.prev=11,k(!1),f.finish(11);case 14:case"end":return f.stop()}},E,null,[[1,8,11,14]])}));return function(m){return A.apply(this,arguments)}}(),me=function(E){H(E),V(E)},he=function(){Y(void 0),$(!0)},Ee=function(E){Y(E),$(!0)},Pe=function(E){r.Z.confirm({title:"\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u4ED3\u5E93\u3010".concat(E.warehouseName,"\u3011\u5417\uFF1F"),okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var m=C()(n()().mark(function h(){var f;return n()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return f=u.ZP.loading("\u6B63\u5728\u5220\u9664"),d.prev=1,d.next=4,(0,I.eu)(E.id);case 4:return f(),u.ZP.success("\u5220\u9664\u6210\u529F"),d.next=8,z();case 8:d.next=14;break;case 10:d.prev=10,d.t0=d.catch(1),f(),d.t0===409?r.Z.error({title:"\u7CFB\u7EDF\u63D0\u793A",content:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["\u4ED3\u5E93\u3010",E.warehouseName,"\u3011\u5DF2\u6709\u4E1A\u52A1\u6570\u636E\u5173\u8054\uFF0C\u4E0D\u80FD\u5220\u9664\uFF01"]}),(0,t.jsx)("div",{children:"\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5904\u7406\uFF01"})]})}):u.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 14:case"end":return d.stop()}},h,null,[[1,10]])}));function W(){return m.apply(this,arguments)}return W}()})},ce=function(){ee({warehouseId:w}),N(!0)},ve=function(E){ee(E),N(!0)},pe=function(E){r.Z.confirm({title:"\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u5E93\u533A\u3010".concat(E.areaName,"\u3011\u5417\uFF1F"),okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var m=C()(n()().mark(function h(){var f;return n()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return f=u.ZP.loading("\u6B63\u5728\u5220\u9664"),d.prev=1,d.next=4,(0,O.kg)(E.id);case 4:f(),u.ZP.success("\u5220\u9664\u6210\u529F"),V(w),d.next=13;break;case 9:d.prev=9,d.t0=d.catch(1),f(),d.t0===409?r.Z.error({title:"\u7CFB\u7EDF\u63D0\u793A",content:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["\u5E93\u533A\u3010",E.areaName,"\u3011\u5DF2\u6709\u4E1A\u52A1\u6570\u636E\u5173\u8054\uFF0C\u4E0D\u80FD\u5220\u9664\uFF01"]}),(0,t.jsx)("div",{children:"\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5904\u7406\uFF01"})]})}):u.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 13:case"end":return d.stop()}},h,null,[[1,9]])}));function W(){return m.apply(this,arguments)}return W}()})},De=function(){var A=C()(n()().mark(function E(m){var W,h;return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(W=u.ZP.loading(m.id?"\u6B63\u5728\u66F4\u65B0":"\u6B63\u5728\u6DFB\u52A0"),o.prev=1,!m.id){o.next=8;break}return o.next=5,(0,I.qL)(m);case 5:h=o.sent,o.next=11;break;case 8:return o.next=10,(0,I.KF)(m);case 10:h=o.sent;case 11:if(W(),h.code!==200){o.next=19;break}return u.ZP.success(m.id?"\u66F4\u65B0\u6210\u529F":"\u6DFB\u52A0\u6210\u529F"),$(!1),o.next=17,z();case 17:o.next=20;break;case 19:u.ZP.error(h.msg);case 20:o.next=26;break;case 22:o.prev=22,o.t0=o.catch(1),W(),u.ZP.error(m.id?"\u66F4\u65B0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01":"\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01");case 26:case"end":return o.stop()}},E,null,[[1,22]])}));return function(m){return A.apply(this,arguments)}}(),fe=function(){var A=C()(n()().mark(function E(m){var W,h;return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(W=u.ZP.loading(m.id?"\u6B63\u5728\u66F4\u65B0":"\u6B63\u5728\u6DFB\u52A0"),o.prev=1,!m.id){o.next=8;break}return o.next=5,(0,O.wm)(m);case 5:h=o.sent,o.next=11;break;case 8:return o.next=10,(0,O.Se)(m);case 10:h=o.sent;case 11:W(),h.code===200?(u.ZP.success(m.id?"\u66F4\u65B0\u6210\u529F":"\u6DFB\u52A0\u6210\u529F"),N(!1),V(w)):u.ZP.error(h.msg),o.next=19;break;case 15:o.prev=15,o.t0=o.catch(1),W(),u.ZP.error(m.id?"\u66F4\u65B0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01":"\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01");case 19:case"end":return o.stop()}},E,null,[[1,15]])}));return function(m){return A.apply(this,arguments)}}(),Ce=function(){var A=C()(n()().mark(function E(m){var W,h,f;return n()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(W=m.dragNode,h=m.dropNode,f=m.dropPosition,!(W.level===h.level&&f!==0)){d.next=12;break}return d.prev=2,d.next=5,(0,I.JU)(W.parent.data);case 5:u.ZP.success("\u6392\u5E8F\u66F4\u65B0\u6210\u529F"),z(),d.next=12;break;case 9:d.prev=9,d.t0=d.catch(2),u.ZP.error("\u6392\u5E8F\u66F4\u65B0\u5931\u8D25");case 12:case"end":return d.stop()}},E,null,[[2,9]])}));return function(m){return A.apply(this,arguments)}}();return(0,t.jsxs)(y._z,{loading:ie,children:[(0,t.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[(0,t.jsx)("div",{style:{width:"450px"},children:(0,t.jsx)(_.default,{warehouseList:c,selectedWarehouseId:w,onSelect:me,onAdd:he,onUpdate:Ee,onDelete:Pe,onDrop:Ce,hasAddPerm:S.hasPerms("wms:warehouse:add"),hasEditPerm:S.hasPerms("wms:warehouse:edit"),hasDeletePerm:S.hasPerms("wms:warehouse:remove")})}),(0,t.jsx)("div",{style:{flex:1},children:(0,t.jsx)(T.default,{areaList:D,onAdd:ce,onUpdate:ve,onDelete:pe,hasAddPerm:S.hasPerms("wms:area:add"),hasEditPerm:S.hasPerms("wms:area:edit"),hasDeletePerm:S.hasPerms("wms:area:remove")})})]}),(0,t.jsx)(p.default,{visible:ne,onClose:function(){return $(!1)},onSubmit:De,values:le||{}}),(0,t.jsx)(R.default,{onSubmit:fe,onClose:function(){return N(!1)},visible:te,values:de||{}})]})};U.default=l}}]);
