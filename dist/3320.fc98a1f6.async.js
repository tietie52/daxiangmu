"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3320,8906],{41009:function(te,B,r){r.d(B,{iK:function(){return U},zc:function(){return w}});var U=function(i){return i[i.SUCCESS=200]="SUCCESS",i[i.ERROR=-1]="ERROR",i[i.TIMEOUT=401]="TIMEOUT",i.TYPE="success",i}({}),L=function(i){return i.GET="GET",i.POST="POST",i.PUT="PUT",i.DELETE="DELETE",i}({}),w=function(i){return i.JSON="application/json;charset=UTF-8",i.FORM_URLENCODED="application/x-www-form-urlencoded;charset=UTF-8",i.FORM_DATA="multipart/form-data;charset=UTF-8",i}({})},18906:function(te,B,r){r.r(B);var U=r(75271),L=r(26208),w=r.n(L),i=r(20813),X=r.n(i),n=r(52676),M=(0,U.forwardRef)(function(G,O){var F,s=G.data;return(0,n.jsxs)("div",{ref:O,style:{padding:"20px",fontFamily:'"Microsoft YaHei", sans-serif',fontSize:"14px"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"1px solid #eee",paddingBottom:"15px"},children:[(0,n.jsx)("div",{children:(0,n.jsxs)("h1",{style:{fontSize:"22px",fontWeight:"bold",marginBottom:"8px"},children:["\u51FA\u5E93\u5355\uFF1A",s.shipmentOrderNo]})}),(0,n.jsx)("div",{children:(0,n.jsx)(X(),{value:s.shipmentOrderNo,options:{displayValue:!1,width:1,height:50,format:"CODE128"}})})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"15px",marginBottom:"20px"},children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"\u51FA\u5E93\u7C7B\u578B\uFF1A"}),s.shipmentOrderType]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"\u5BA2\u6237\uFF1A"}),s.merchantName]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"\u4ED3\u5E93\uFF1A"}),s.warehouseName]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"\u6570\u91CF\uFF1A"}),s.totalQuantity]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"\u521B\u5EFA\u4EBA\uFF1A"}),s.createBy]}),s.updateBy&&(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"\u64CD\u4F5C\u4EBA\uFF1A"}),s.updateBy]})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"\u51FA\u5E93\u72B6\u6001\uFF1A"}),s.shipmentOrderStatus]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"\u8BA2\u5355\u53F7\uFF1A"}),s.orderNo]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"\u5E93\u533A\uFF1A"}),s.areaName]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"\u91D1\u989D\uFF1A"}),s.receivableAmount]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"\u521B\u5EFA\u65F6\u95F4\uFF1A"}),s.createTime]}),s.updateTime&&(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"\u64CD\u4F5C\u65F6\u95F4\uFF1A"}),s.updateTime]})]})]}),((F=s.table)===null||F===void 0?void 0:F.length)>0?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",margin:"15px 0",border:"1px solid"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left"},children:"\u5546\u54C1\u540D\u79F0"}),(0,n.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left"},children:"\u89C4\u683C"}),(0,n.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left"},children:"\u5E93\u533A"}),(0,n.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left"},children:"\u6279\u53F7"}),(0,n.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left"},children:"\u751F\u4EA7\u65E5\u671F"}),(0,n.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left"},children:"\u8FC7\u671F\u65E5\u671F"}),(0,n.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"right"},children:"\u6570\u91CF"}),(0,n.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"right"},children:"\u4EF7\u683C(\u5143)"})]})}),(0,n.jsxs)("tbody",{children:[s.table.map(function(l,j){return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:l.itemName}),(0,n.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:l.skuName}),(0,n.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:l.areaName}),(0,n.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:l.batchNo||"-"}),(0,n.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:l.productionDate||"-"}),(0,n.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:l.expirationDate||"-"}),(0,n.jsx)("td",{style:{border:"1px solid",padding:"8px",textAlign:"right"},children:l.quantity}),(0,n.jsx)("td",{style:{border:"1px solid",padding:"8px",textAlign:"right"},children:l.amount})]},j)}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{colSpan:6,style:{border:"1px solid",padding:"8px",textAlign:"right",fontWeight:500},children:"\u5408\u8BA1"}),(0,n.jsx)("td",{style:{border:"1px solid",padding:"8px",textAlign:"right",fontWeight:500},children:s.table.reduce(function(l,j){return l+(Number(j.quantity)||0)},0)||0}),(0,n.jsx)("td",{style:{border:"1px solid",padding:"8px",textAlign:"right",fontWeight:500},children:s.table.reduce(function(l,j){return l+(Number(j.amount)||0)},0).toFixed(2)||"0.00"})]})]})]})}):(0,n.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"#999"},children:"\u6682\u65E0\u51FA\u5E93\u660E\u7EC6\u6570\u636E"})]})}),p=function(O){var F=O.data,s=O.onClose,l=O.loading,j=l===void 0?!1:l,A=O.visible,T=(0,U.useRef)(null),N=(0,L.useReactToPrint)({contentRef:T});return(0,U.useEffect)(function(){if(A){var I=setTimeout(function(){N()},100);return function(){return clearTimeout(I)}}},[A,N]),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{onClick:function(){return N()},children:"\u6253\u5370"}),(0,n.jsx)(M,{ref:T,data:F})]})};B.default=p},63320:function(te,B,r){r.r(B);var U=r(82092),L=r.n(U),w=r(15558),i=r.n(w),X=r(90228),n=r.n(X),M=r(26068),p=r.n(M),G=r(87999),O=r.n(G),F=r(48305),s=r.n(F),l=r(75271),j=r(32621),A=r(2336),T=r(51162),N=r(79654),I=r(53059),$=r(63710),R=r(6778),ee=r(21263),b=r(48625),J=r(8797),K=r(14218),V=r(81114),m=r(54584),E=r(23299),S=r(86743),d=r(14724),W=r(17023),re=r(47383),f=r(16621),x=r(73323),ae=r(37846),Ee=r(40761),We=r(61032),fe=r(65269),Ze=r(16483),Z=r.n(Ze),$e=r(59864),ke=r(18906),t=r(52676),xe=j.Z.Text,Ye=function(){var ue,ie=(0,We.useModel)("wms"),se=ie.warehouseMap,ne=ie.areaMap,De=ie.merchantMap,we=A.Z.useForm(),Ge=s()(we,1),ge=Ge[0],Ve=(0,l.useState)(!1),Oe=s()(Ve,2),je=Oe[0],z=Oe[1],ze=(0,l.useState)([]),Ce=s()(ze,2),Qe=Ce[0],ye=Ce[1],He=(0,l.useState)(0),Pe=s()(He,2),Xe=Pe[0],Je=Pe[1],qe=(0,l.useState)([]),Me=s()(qe,2),k=Me[0],q=Me[1],en=(0,l.useState)({}),Ae=s()(en,2),nn=Ae[0],Fe=Ae[1],tn=(0,l.useState)([]),Te=s()(tn,2),de=Te[0],rn=Te[1],an=(0,l.useState)([]),be=s()(an,2),le=be[0],un=be[1],sn=(0,l.useState)(null),Se=s()(sn,2),oe=Se[0],_e=Se[1],dn=(0,l.useState)(!1),Be=s()(dn,2),jn=Be[0],ln=Be[1],on=(0,l.useState)(null),Ue=s()(on,2),Cn=Ue[0],_n=Ue[1],pn=(0,l.useState)({pageNum:1,pageSize:10,shipmentOrderNo:void 0,shipmentOrderType:-1,merchantId:void 0,orderNo:void 0,receivableAmount:void 0,shipmentOrderStatus:-2}),Ie=s()(pn,2),D=Ie[0],Y=Ie[1],cn=(0,l.useState)({visible:!1,currentOrder:null}),Le=s()(cn,2),pe=Le[0],ce=Le[1];(0,l.useEffect)(function(){Promise.all([(0,fe.pX)("wms_shipment_status"),(0,fe.pX)("wms_shipment_type")]).then(function(u){var e=s()(u,2),a=e[0],o=e[1];rn(Object.values(a)),un(Object.values(o))}),me()},[D.pageNum,D.pageSize]),(0,l.useEffect)(function(){me()},[D.shipmentOrderStatus]);var me=function(){var u=O()(n()().mark(function e(){var a,o;return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return z(!0),c.prev=1,a=p()({},D),a.shipmentOrderStatus===-2&&(a.shipmentOrderStatus=void 0),a.shipmentOrderType===-1&&(a.shipmentOrderType=void 0),c.next=7,(0,ae.r)(a);case 7:o=c.sent,ye(o.rows),Je(o.total),q([]);case 11:return c.prev=11,z(!1),c.finish(11);case 14:case"end":return c.stop()}},e,null,[[1,,11,14]])}));return function(){return u.apply(this,arguments)}}(),mn=function(){Y(function(e){return p()(p()({},e),{},{pageNum:1})})},hn=function(){ge.resetFields(),Y({pageNum:1,pageSize:10,shipmentOrderNo:void 0,shipmentOrderType:-1,merchantId:void 0,orderNo:void 0,receivableAmount:void 0,shipmentOrderStatus:-2})},vn=function(){ce({visible:!0,currentOrder:null})},En=function(){var u=O()(n()().mark(function e(a){return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:T.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u51FA\u5E93\u5355\u3010".concat(a.shipmentOrderNo,"\u3011\u5417\uFF1F"),onOk:function(){var c=O()(n()().mark(function C(){return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return z(!0),h.prev=1,h.next=4,(0,ae.C6)(a.id);case 4:N.ZP.success("\u5220\u9664\u6210\u529F"),me(),h.next=11;break;case 8:h.prev=8,h.t0=h.catch(1),h.t0===409&&T.Z.error({title:"\u7CFB\u7EDF\u63D0\u793A",content:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["\u51FA\u5E93\u5355\u3010",a.shipmentOrderNo,"\u3011\u5DF2\u51FA\u5E93\uFF0C\u4E0D\u80FD\u5220\u9664\uFF01"]}),(0,t.jsx)("div",{children:"\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5904\u7406\uFF01"})]})});case 11:return h.prev=11,z(!1),h.finish(11);case 14:case"end":return h.stop()}},C,null,[[1,8,11,14]])}));function Q(){return c.apply(this,arguments)}return Q}()});case 1:case"end":return _.stop()}},e)}));return function(a){return u.apply(this,arguments)}}(),fn=function(e){_n(e),ln(!0)},xn=function(e){var a=k.indexOf(e.id);a!==-1?q(k.filter(function(o){return o!==e.id})):(q([].concat(i()(k),[e.id])),Ne(e))},Ne=function(){var u=O()(n()().mark(function e(a){var o,_,c;return n()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return Fe(function(y){return p()(p()({},y),{},L()({},a.id,!0))}),C.prev=1,C.next=4,(0,Ee.RN)(a.id);case 4:_=C.sent,(o=_.data)!==null&&o!==void 0&&o.length&&(c=_.data.map(function(y){var h,v;return p()(p()({},y),{},{warehouseName:(h=se.get(y.warehouseId))===null||h===void 0?void 0:h.warehouseName,areaName:(v=ne.get(y.areaId))===null||v===void 0?void 0:v.areaName})}),ye(function(y){return y.map(function(h){return h.id===a.id?p()(p()({},h),{},{details:c}):h})}));case 6:return C.prev=6,Fe(function(y){return p()(p()({},y),{},L()({},a.id,!1))}),C.finish(6);case 9:case"end":return C.stop()}},e,null,[[1,,6,9]])}));return function(a){return u.apply(this,arguments)}}(),Dn=function(){var u=O()(n()().mark(function e(a){var o,_,c,Q,C,y,h,v,Re,Ke;return n()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return z(!0),P.prev=1,P.next=4,Promise.all([(0,ae.kl)(a.id),(0,Ee.RN)(a.id)]);case 4:y=P.sent,h=s()(y,2),v=h[0],Re=h[1],Ke=Re.data.map(function(g){var H,he,ve;return{itemName:((H=g.itemSku)===null||H===void 0||(H=H.item)===null||H===void 0?void 0:H.itemName)||"-",skuName:((he=g.itemSku)===null||he===void 0?void 0:he.skuName)||"-",areaName:((ve=ne.get(g.areaId))===null||ve===void 0?void 0:ve.areaName)||"-",quantity:Number(g.quantity).toFixed(0),amount:g.amount?Number(g.amount).toFixed(2):"-",batchNo:g.batchNo||"-",productionDate:g.productionDate?Z()(g.productionDate).format("YYYY-MM-DD"):"-",expirationDate:g.expirationDate?Z()(g.expirationDate).format("YYYY-MM-DD"):"-"}}),_e({shipmentOrderNo:v.data.shipmentOrderNo,shipmentOrderType:(o=le.find(function(g){return g.value==v.data.shipmentOrderType}))===null||o===void 0?void 0:o.label,shipmentOrderStatus:(_=de.find(function(g){return g.value==v.data.shipmentOrderStatus}))===null||_===void 0?void 0:_.label,merchantName:((c=De.get(v.data.merchantId))===null||c===void 0?void 0:c.merchantName)||"-",orderNo:v.data.orderNo||"-",warehouseName:((Q=se.get(v.data.warehouseId))===null||Q===void 0?void 0:Q.warehouseName)||"-",areaName:((C=ne.get(v.data.areaId))===null||C===void 0?void 0:C.areaName)||"-",totalQuantity:Number(v.data.totalQuantity).toFixed(0),receivableAmount:v.data.receivableAmount?"".concat(v.data.receivableAmount,"\u5143"):"",createBy:v.data.createBy,createTime:Z()(v.data.createTime).format("MM-DD HH:mm"),updateBy:v.data.updateBy,updateTime:v.data.updateTime?Z()(v.data.updateTime).format("MM-DD HH:mm"):"-",remark:v.data.remark,table:Ke}),P.next=16;break;case 12:P.prev=12,P.t0=P.catch(1),N.ZP.error("\u83B7\u53D6\u6253\u5370\u6570\u636E\u5931\u8D25"),console.error("Print error:",P.t0);case 16:return P.prev=16,z(!1),P.finish(16);case 19:case"end":return P.stop()}},e,null,[[1,12,16,19]])}));return function(a){return u.apply(this,arguments)}}(),gn=[{title:"\u5355\u53F7/\u8BA2\u5355\u53F7",dataIndex:"shipmentOrderNo",render:function(e,a){return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["\u5355\u53F7\uFF1A",e]}),a.orderNo&&(0,t.jsxs)("div",{children:["\u8BA2\u5355\u53F7\uFF1A",a.orderNo]})]})}},{title:"\u51FA\u5E93\u7C7B\u578B",dataIndex:"shipmentOrderType",render:function(e){var a;return(0,t.jsx)(I.Z,{color:"blue",children:(a=le.find(function(o){return o.value==e}))===null||a===void 0?void 0:a.label})}},{title:"\u5BA2\u6237",dataIndex:"merchantId",render:function(e){var a;return(0,t.jsx)("div",{children:(a=De.get(e))===null||a===void 0?void 0:a.merchantName})}},{title:"\u4ED3\u5E93/\u5E93\u533A",render:function(e){var a,o;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["\u4ED3\u5E93\uFF1A",(a=se.get(e.warehouseId))===null||a===void 0?void 0:a.warehouseName]}),e.areaId&&(0,t.jsxs)("div",{children:["\u5E93\u533A\uFF1A",(o=ne.get(e.areaId))===null||o===void 0?void 0:o.areaName]})]})}},{title:"\u51FA\u5E93\u72B6\u6001",dataIndex:"shipmentOrderStatus",render:function(e){var a;return(0,t.jsx)(I.Z,{color:e==="1"?"success":e=="-1"?"error":"processing",children:(a=de.find(function(o){return o.value==e}))===null||a===void 0?void 0:a.label})}},{title:"\u6570\u91CF/\u91D1\u989D(\u5143)",render:function(e){return(0,t.jsxs)("div",{children:[(0,t.jsxs)($.Z,{children:[(0,t.jsx)(xe,{children:"\u6570\u91CF\uFF1A"}),(0,t.jsx)(R.Z,{value:Number(e.totalQuantity),precision:0})]}),(e.receivableAmount||e.receivableAmount===0)&&(0,t.jsxs)($.Z,{children:[(0,t.jsx)(xe,{children:"\u91D1\u989D\uFF1A"}),(0,t.jsx)(R.Z,{value:Number(e.receivableAmount),precision:2})]})]})}},{title:"\u521B\u5EFA/\u64CD\u4F5C",render:function(e){return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["\u521B\u5EFA\uFF1A",e.createBy]}),e.updateBy&&(0,t.jsxs)("div",{children:["\u64CD\u4F5C\uFF1A",e.updateBy]})]})}},{title:"\u521B\u5EFA\u65F6\u95F4/\u64CD\u4F5C\u65F6\u95F4",render:function(e){return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["\u521B\u5EFA\uFF1A",Z()(e.createTime).format("MM-DD HH:mm")]}),(0,t.jsxs)("div",{children:["\u64CD\u4F5C\uFF1A",e.updateTime?Z()(e.updateTime).format("MM-DD HH:mm"):"-"]})]})}},{title:"\u5907\u6CE8",dataIndex:"remark"},{title:"\u64CD\u4F5C",render:function(e){return(0,t.jsxs)($.Z,{direction:"vertical",children:[(0,t.jsxs)($.Z,{children:[(0,t.jsx)(ee.Z,{content:"\u51FA\u5E93\u5355\u3010".concat(e.shipmentOrderNo,"\u3011\u5DF2").concat(e.shipmentOrderStatus=="1"?"\u51FA\u5E93":"\u4F5C\u5E9F","\uFF0C\u65E0\u6CD5\u4FEE\u6539\uFF01"),trigger:"hover",disabled:e.shipmentOrderStatus=="0",children:(0,t.jsx)(b.ZP,{type:"link",icon:(0,t.jsx)(E.Z,{}),onClick:function(){return fn(e)},disabled:[-1,1].includes(e.shipmentOrderStatus),children:"\u4FEE\u6539"})}),(0,t.jsx)(b.ZP,{type:"link",onClick:function(){return xn(e)},children:k.includes(e.id)?"\u6536\u8D77":"\u67E5\u770B"})]}),(0,t.jsxs)($.Z,{children:[(0,t.jsx)(ee.Z,{content:"\u51FA\u5E93\u5355\u3010".concat(e.shipmentOrderNo,"\u3011\u5DF2\u51FA\u5E93\uFF0C\u65E0\u6CD5\u5220\u9664\uFF01"),trigger:"hover",disabled:[-1,0].includes(e.shipmentOrderStatus),children:(0,t.jsx)(b.ZP,{type:"link",danger:!0,icon:(0,t.jsx)(S.Z,{}),onClick:function(){return En(e)},disabled:e.shipmentOrderStatus===1,children:"\u5220\u9664"})}),(0,t.jsx)(b.ZP,{type:"link",icon:(0,t.jsx)(d.Z,{}),onClick:function(){return Dn(e)},children:"\u6253\u5370"})]})]})}}];return(0,t.jsxs)(x._z,{children:[(0,t.jsxs)(J.Z,{loading:je,children:[(0,t.jsx)(J.Z,{children:(0,t.jsxs)(A.Z,{form:ge,layout:"inline",children:[(0,t.jsx)(A.Z.Item,{label:"\u51FA\u5E93\u72B6\u6001",name:"shipmentOrderStatus",children:(0,t.jsxs)(K.ZP.Group,{value:D.shipmentOrderStatus,onChange:function(e){return Y(p()(p()({},D),{},{shipmentOrderStatus:e.target.value}))},children:[(0,t.jsx)(K.ZP.Button,{value:-2,children:"\u5168\u90E8"}),de.map(function(u){return(0,t.jsx)(K.ZP.Button,{value:u.value,children:u.label},u.value)})]})}),(0,t.jsx)(A.Z.Item,{label:"\u51FA\u5E93\u7C7B\u578B",name:"shipmentOrderType",children:(0,t.jsxs)(K.ZP.Group,{value:D.shipmentOrderType,onChange:function(e){return Y(p()(p()({},D),{},{shipmentOrderType:e.target.value}))},children:[(0,t.jsx)(K.ZP.Button,{value:-1,children:"\u5168\u90E8"}),le.map(function(u){return(0,t.jsx)(K.ZP.Button,{value:u.value,children:u.label},u.value)})]})}),(0,t.jsx)(A.Z.Item,{label:"\u51FA\u5E93\u5355\u53F7",name:"shipmentOrderNo",children:(0,t.jsx)(V.Z,{placeholder:"\u8BF7\u8F93\u5165\u51FA\u5E93\u5355\u53F7",value:D.shipmentOrderNo,onChange:function(e){return Y(p()(p()({},D),{},{shipmentOrderNo:e.target.value}))}})}),(0,t.jsx)(A.Z.Item,{label:"\u8BA2\u5355\u53F7",name:"orderNo",children:(0,t.jsx)(V.Z,{placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u53F7",value:D.orderNo,onChange:function(e){return Y(p()(p()({},D),{},{orderNo:e.target.value}))}})}),(0,t.jsxs)(A.Z.Item,{children:[(0,t.jsx)(b.ZP,{type:"primary",icon:(0,t.jsx)(W.Z,{}),onClick:mn,children:"\u641C\u7D22"}),(0,t.jsx)(b.ZP,{icon:(0,t.jsx)(re.Z,{}),onClick:hn,style:{marginLeft:8},children:"\u91CD\u7F6E"})]})]})}),(0,t.jsxs)(J.Z,{style:{marginTop:20},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[(0,t.jsx)(j.Z.Title,{level:4,style:{margin:0},children:"\u51FA\u5E93\u5355"}),(0,t.jsx)(b.ZP,{type:"primary",icon:(0,t.jsx)(f.Z,{}),onClick:vn,children:"\u65B0\u589E"})]}),(0,t.jsx)(m.Z,{columns:gn,dataSource:Qe,rowKey:"id",bordered:!0,loading:je,expandable:{expandedRowKeys:k,onExpand:function(e,a){e?(q([].concat(i()(k),[a.id])),Ne(a)):q(k.filter(function(o){return o!==a.id}))},expandedRowRender:function(e){return(0,t.jsxs)("div",{style:{padding:"0 50px 20px 50px"},children:[(0,t.jsx)(j.Z.Title,{level:5,children:"\u5546\u54C1\u660E\u7EC6"}),(0,t.jsx)(m.Z,{dataSource:e.details,loading:nn[e.id],columns:[{title:"\u5546\u54C1\u540D\u79F0",render:function(o,_){var c;return(0,t.jsx)("div",{children:_==null||(c=_.itemSku)===null||c===void 0||(c=c.item)===null||c===void 0?void 0:c.itemName})}},{title:"\u89C4\u683C\u540D\u79F0",render:function(o,_){var c;return(0,t.jsx)("div",{children:_==null||(c=_.itemSku)===null||c===void 0?void 0:c.skuName})}},{title:"\u5E93\u533A",dataIndex:"areaName"},{title:"\u6570\u91CF",align:"right",render:function(o,_){return(0,t.jsx)(R.Z,{value:Number(_.quantity),precision:0})}},{title:"\u4EF7\u683C(\u5143)",align:"right",render:function(o,_){return(0,t.jsx)(R.Z,{value:_.amount?Number(_.amount):"-",precision:2})}},{title:"\u6279\u53F7",dataIndex:"batchNo"},{title:"\u751F\u4EA7\u65E5\u671F",render:function(o,_){return(0,t.jsx)("div",{children:_.productionDate?Z()(_.productionDate).format("YYYY-MM-DD"):"-"})}},{title:"\u8FC7\u671F\u65E5\u671F",render:function(o,_){return(0,t.jsx)("div",{children:_.expirationDate?Z()(_.expirationDate).format("YYYY-MM-DD"):"-"})}}]})]})}},pagination:{total:Xe,current:D.pageNum,pageSize:D.pageSize,onChange:function(e,a){Y(p()(p()({},D),{},{pageNum:e,pageSize:a}))},showSizeChanger:!0,showTotal:function(e){return"\u5171 ".concat(e," \u6761")}}})]})]}),(0,t.jsx)(T.Z,{title:pe.currentOrder?"\u4FEE\u6539\u79FB\u5E93\u5355":"\u65B0\u589E\u79FB\u5E93\u5355",open:pe.visible,onCancel:function(){return ce(function(e){return p()(p()({},e),{},{editVisible:!1})})},footer:null,width:"95%",destroyOnClose:!0,children:(0,t.jsx)($e.default,{id:(ue=pe.currentOrder)===null||ue===void 0?void 0:ue.id,onCancel:function(){return ce(function(e){return p()(p()({},e),{},{editVisible:!1})})}})}),(0,t.jsx)(T.Z,{open:!!oe,onCancel:function(){return _e(null)},footer:null,width:800,children:oe&&(0,t.jsx)(ke.default,{data:oe,onClose:function(){return _e(null)},visible:!1})})]})};B.default=Ye},65269:function(te,B,r){r.d(B,{Hr:function(){return A},QK:function(){return K},Vd:function(){return s},a7:function(){return $},jK:function(){return O},n2:function(){return J},oH:function(){return N},pX:function(){return l},sF:function(){return ee}});var U=r(26068),L=r.n(U),w=r(90228),i=r.n(w),X=r(87999),n=r.n(X),M=r(61032),p=r(41009),G=r(18606);function O(m){return F.apply(this,arguments)}function F(){return F=n()(i()().mark(function m(E){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,M.request)("/api/system/dict/type/list",{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"},params:E}));case 1:case"end":return d.stop()}},m)})),F.apply(this,arguments)}function s(m){return(0,M.request)("/api/system/dict/type/".concat(m),{method:"GET"})}function l(m,E){return j.apply(this,arguments)}function j(){return j=n()(i()().mark(function m(E,S){var d,W;return i()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return console.log("getDictValueEnum resp:",E),f.next=3,(0,M.request)("/api/system/dict/data/type/".concat(E),{method:"GET"});case 3:if(d=f.sent,console.log("getDictValueEnum resp:",E,d),d.code!==p.iK.SUCCESS){f.next=11;break}return W={},d.data.forEach(function(x){W[x.dictValue]={text:x.dictLabel,label:x.dictLabel,value:S?Number(x.dictValue):x.dictValue,key:x.dictCode,listClass:x.listClass,status:x.listClass}}),f.abrupt("return",W);case 11:return f.abrupt("return",{});case 12:case"end":return f.stop()}},m)})),j.apply(this,arguments)}function A(m,E){return T.apply(this,arguments)}function T(){return T=n()(i()().mark(function m(E,S){var d,W;return i()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,M.request)("/api/system/dict/data/type/".concat(E),{method:"GET"});case 2:if(d=f.sent,d.code!==200){f.next=6;break}return W=d.data.map(function(x){return{text:x.dictLabel,label:x.dictLabel,value:S?Number(x.dictValue):x.dictValue,key:x.dictCode,listClass:x.listClass,status:x.listClass}}),f.abrupt("return",W);case 6:return f.abrupt("return",[]);case 7:case"end":return f.stop()}},m)})),T.apply(this,arguments)}function N(m){return I.apply(this,arguments)}function I(){return I=n()(i()().mark(function m(E){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,M.request)("/api/system/dict/type",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},data:E}));case 1:case"end":return d.stop()}},m)})),I.apply(this,arguments)}function $(m){return R.apply(this,arguments)}function R(){return R=n()(i()().mark(function m(E){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,M.request)("/api/system/dict/type",{method:"PUT",headers:{"Content-Type":"application/json;charset=UTF-8"},data:E}));case 1:case"end":return d.stop()}},m)})),R.apply(this,arguments)}function ee(m){return b.apply(this,arguments)}function b(){return b=n()(i()().mark(function m(E){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,M.request)("/api/system/dict/type/".concat(E),{method:"DELETE"}));case 1:case"end":return d.stop()}},m)})),b.apply(this,arguments)}function J(m){return(0,G.su)("/api/system/dict/type/export",{params:m},"dict_type_".concat(new Date().getTime(),".xlsx"))}function K(m){return V.apply(this,arguments)}function V(){return V=n()(i()().mark(function m(E){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,M.request)("/api/system/dict/type/optionselect",{params:L()({},E),method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return d.stop()}},m)})),V.apply(this,arguments)}}}]);
