"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9924],{89924:function(Y,B,s){s.r(B);var U=s(26068),Z=s.n(U),y=s(48305),L=s.n(y),x=s(90228),a=s.n(x),w=s(87999),p=s.n(w),j=s(75271),d=s(61032),_=s(79654),C=s(48625),R=s(51162),k=s(73323),K=s(90607),W=s(49026),I=s(20860),F=s(86743),$=s(73646),S=s(16621),O=s(92921),N=s(77034),e=s(52676),A=function(){var E=p()(a()().mark(function g(l){var m,u;return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(m=_.ZP.loading("\u6B63\u5728\u5220\u9664"),l){n.next=3;break}return n.abrupt("return",!0);case 3:return n.prev=3,n.next=6,(0,O.jw)(l.map(function(M){return M.infoId}).join(","));case 6:return u=n.sent,m(),u.code===200?_.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):_.ZP.error(u.msg),n.abrupt("return",!0);case 12:return n.prev=12,n.t0=n.catch(3),m(),_.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),n.abrupt("return",!1);case 17:case"end":return n.stop()}},g,null,[[3,12]])}));return function(l){return E.apply(this,arguments)}}(),G=function(){var E=p()(a()().mark(function g(){var l,m;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return l=_.ZP.loading("\u8BF7\u7A0D\u5019"),r.prev=1,r.next=4,(0,O.KF)();case 4:return m=r.sent,l(),m.code===200?_.ZP.success("\u6E05\u7A7A\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):_.ZP.error(m.msg),r.abrupt("return",!0);case 10:return r.prev=10,r.t0=r.catch(1),l(),_.ZP.error("\u8BF7\u6C42\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),r.abrupt("return",!1);case 15:case"end":return r.stop()}},g,null,[[1,10]])}));return function(){return E.apply(this,arguments)}}(),z=function(){var E=p()(a()().mark(function g(l){var m,u;return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return m=_.ZP.loading("\u6B63\u5728\u89E3\u9501"),n.prev=1,n.next=4,(0,O.Ny)(l);case 4:return u=n.sent,m(),u.code===200?_.ZP.success("\u89E3\u9501\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):_.ZP.error(u.msg),n.abrupt("return",!0);case 10:return n.prev=10,n.t0=n.catch(1),m(),_.ZP.error("\u89E3\u9501\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),n.abrupt("return",!1);case 15:case"end":return n.stop()}},g,null,[[1,10]])}));return function(l){return E.apply(this,arguments)}}(),Q=function(){var E=p()(a()().mark(function g(){var l;return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return l=_.ZP.loading("\u6B63\u5728\u5BFC\u51FA"),u.prev=1,u.next=4,(0,O.Q6)();case 4:return l(),_.ZP.success("\u5BFC\u51FA\u6210\u529F"),u.abrupt("return",!0);case 9:return u.prev=9,u.t0=u.catch(1),l(),_.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),u.abrupt("return",!1);case 14:case"end":return u.stop()}},g,null,[[1,9]])}));return function(){return E.apply(this,arguments)}}(),H=function(){var g=(0,j.useRef)(),l=(0,j.useRef)(),m=(0,j.useState)([]),u=L()(m,2),r=u[0],n=u[1],M=(0,d.useAccess)(),J={0:{label:"\u6210\u529F",key:"0",value:"0",text:"\u6210\u529F",status:"success",listClass:"success"},1:{label:"\u5931\u8D25",key:"1",value:"1",text:"\u5931\u8D25",status:"error",listClass:"danger"}},V=(0,d.useIntl)();(0,j.useEffect)(function(){},[]);var X=[{title:(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.info_id",defaultMessage:"\u8BBF\u95EE\u7F16\u53F7"}),dataIndex:"infoId",valueType:"text",hideInSearch:!0},{title:(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.user_name",defaultMessage:"\u7528\u6237\u8D26\u53F7"}),dataIndex:"userName",valueType:"text"},{title:(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.ipaddr",defaultMessage:"\u767B\u5F55IP\u5730\u5740"}),dataIndex:"ipaddr",valueType:"text"},{title:(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.login_location",defaultMessage:"\u767B\u5F55\u5730\u70B9"}),dataIndex:"loginLocation",valueType:"text",hideInSearch:!0},{title:(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.browser",defaultMessage:"\u6D4F\u89C8\u5668\u7C7B\u578B"}),dataIndex:"browser",valueType:"text",hideInSearch:!0},{title:(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.os",defaultMessage:"\u64CD\u4F5C\u7CFB\u7EDF"}),dataIndex:"os",valueType:"text",hideInSearch:!0},{title:(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.status",defaultMessage:"\u767B\u5F55\u72B6\u6001"}),dataIndex:"status",valueType:"select",render:function(h,f){return(0,e.jsx)(N.Z,{enums:J,value:f.status})}},{title:(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.msg",defaultMessage:"\u63D0\u793A\u6D88\u606F"}),dataIndex:"msg",valueType:"text",hideInSearch:!0},{title:(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.login_time",defaultMessage:"\u8BBF\u95EE\u65F6\u95F4"}),dataIndex:"loginTime",valueType:"dateTime"}];return(0,e.jsxs)(k._z,{children:[(0,e.jsx)("div",{style:{width:"100%",float:"right"},children:(0,e.jsx)(K.Z,{headerTitle:V.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u4FE1\u606F"}),actionRef:l,formRef:g,rowKey:"infoId",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsxs)(C.ZP,{danger:!0,hidden:(r==null?void 0:r.length)===0||!M.hasPerms("monitor:logininfor:remove"),onClick:p()(a()().mark(function h(){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:R.Z.confirm({title:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u6240\u9009\u6570\u636E\u9879?",icon:(0,e.jsx)(I.Z,{}),content:"\u8BF7\u8C28\u614E\u64CD\u4F5C",onOk:function(){return p()(a()().mark(function D(){var v,o,c;return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(r);case 2:v=t.sent,v&&(n([]),(o=l.current)===null||o===void 0||(c=o.reloadAndRest)===null||c===void 0||c.call(o));case 4:case"end":return t.stop()}},D)}))()},onCancel:function(){}});case 1:case"end":return i.stop()}},h)})),children:[(0,e.jsx)(F.Z,{}),(0,e.jsx)(d.FormattedMessage,{id:"pages.searchTable.delete",defaultMessage:"\u5220\u9664"})]},"remove"),(0,e.jsxs)(C.ZP,{type:"primary",danger:!0,hidden:(r==null?void 0:r.length)===0||!M.hasPerms("monitor:logininfor:remove"),onClick:p()(a()().mark(function h(){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:R.Z.confirm({title:"\u662F\u5426\u786E\u8BA4\u6E05\u7A7A\u6240\u6709\u6570\u636E\u9879?",icon:(0,e.jsx)(I.Z,{}),content:"\u8BF7\u8C28\u614E\u64CD\u4F5C",onOk:function(){return p()(a()().mark(function D(){var v,o,c;return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G();case 2:v=t.sent,v&&(n([]),(o=l.current)===null||o===void 0||(c=o.reloadAndRest)===null||c===void 0||c.call(o));case 4:case"end":return t.stop()}},D)}))()},onCancel:function(){}});case 1:case"end":return i.stop()}},h)})),children:[(0,e.jsx)(F.Z,{}),(0,e.jsx)(d.FormattedMessage,{id:"pages.searchTable.cleanAll",defaultMessage:"\u6E05\u7A7A"})]},"clean"),(0,e.jsxs)(C.ZP,{type:"primary",hidden:(r==null?void 0:r.length)===0||!M.hasPerms("monitor:logininfor:unlock"),onClick:p()(a()().mark(function h(){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:R.Z.confirm({title:"\u662F\u5426\u786E\u8BA4\u89E3\u9501\u8BE5\u7528\u6237\u7684\u6570\u636E\u9879?",icon:(0,e.jsx)(I.Z,{}),content:"\u8BF7\u8C28\u614E\u64CD\u4F5C",onOk:function(){return p()(a()().mark(function D(){var v,o,c;return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(r[0].userName);case 2:v=t.sent,v&&(n([]),(o=l.current)===null||o===void 0||(c=o.reloadAndRest)===null||c===void 0||c.call(o));case 4:case"end":return t.stop()}},D)}))()},onCancel:function(){}});case 1:case"end":return i.stop()}},h)})),children:[(0,e.jsx)($.Z,{}),(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.unlock",defaultMessage:"\u89E3\u9501"})]},"unlock"),(0,e.jsxs)(C.ZP,{type:"primary",hidden:!M.hasPerms("monitor:logininfor:export"),onClick:p()(a()().mark(function h(){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:Q();case 1:case"end":return i.stop()}},h)})),children:[(0,e.jsx)(S.Z,{}),(0,e.jsx)(d.FormattedMessage,{id:"pages.searchTable.export",defaultMessage:"\u5BFC\u51FA"})]},"export")]},request:function(h){return(0,O.U0)(Z()({},h)).then(function(f){var i={data:f.rows,total:f.total,success:!0};return i})},columns:X,rowSelection:{onChange:function(h,f){n(f)}}},"logininforList")}),(r==null?void 0:r.length)>0&&(0,e.jsx)(W.S,{extra:(0,e.jsxs)("div",{children:[(0,e.jsx)(d.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"\u5DF2\u9009\u62E9"}),(0,e.jsx)("a",{style:{fontWeight:600},children:r.length}),(0,e.jsx)(d.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:(0,e.jsx)(C.ZP,{danger:!0,hidden:!M.hasPerms("monitor:logininfor:remove"),onClick:p()(a()().mark(function T(){return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:R.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u9879\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var i=p()(a()().mark(function D(){var v,o,c;return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(r);case 2:v=t.sent,v&&(n([]),(o=l.current)===null||o===void 0||(c=o.reloadAndRest)===null||c===void 0||c.call(o));case 4:case"end":return t.stop()}},D)}));function P(){return i.apply(this,arguments)}return P}()});case 1:case"end":return f.stop()}},T)})),children:(0,e.jsx)(d.FormattedMessage,{id:"pages.searchTable.batchDeletion",defaultMessage:"\u6279\u91CF\u5220\u9664"})},"remove")})]})};B.default=H}}]);
