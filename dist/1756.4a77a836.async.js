"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1756],{76202:function(ie,$,e){var h=e(99426),P=e(99960),r=e(75271),I=e(50241),V=e(52676),H=["fieldProps","min","proFieldProps","max"],z=function(i,G){var J=i.fieldProps,R=i.min,U=i.proFieldProps,D=i.max,_=(0,P.Z)(i,H);return(0,V.jsx)(I.Z,(0,h.Z)({valueType:"digit",fieldProps:(0,h.Z)({min:R,max:D},J),ref:G,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:U},_))},K=r.forwardRef(z);$.Z=K},59472:function(ie,$,e){var h=e(99426),P=e(99960),r=e(67867),I=e(75271),V=e(61511),H=e(50241),z=e(52676),K=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],T=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],i=function(_,A){var w=_.fieldProps,l=_.children,n=_.params,o=_.proFieldProps,O=_.mode,Z=_.valueEnum,m=_.request,j=_.showSearch,y=_.options,C=(0,P.Z)(_,K),B=(0,I.useContext)(V.Z);return(0,z.jsx)(H.Z,(0,h.Z)((0,h.Z)({valueEnum:(0,r.h)(Z),request:m,params:n,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({options:y,mode:O,showSearch:j,getPopupContainer:B.getPopupContainer},w),ref:A,proFieldProps:o},C),{},{children:l}))},G=I.forwardRef(function(D,_){var A=D.fieldProps,w=D.children,l=D.params,n=D.proFieldProps,o=D.mode,O=D.valueEnum,Z=D.request,m=D.options,j=(0,P.Z)(D,T),y=(0,h.Z)({options:m,mode:o||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},A),C=(0,I.useContext)(V.Z);return(0,z.jsx)(H.Z,(0,h.Z)((0,h.Z)({valueEnum:(0,r.h)(O),request:Z,params:l,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({getPopupContainer:C.getPopupContainer},y),ref:_,proFieldProps:n},j),{},{children:w}))}),J=I.forwardRef(i),R=G,U=J;U.SearchSelect=R,U.displayName="ProFormComponent",$.Z=U},68834:function(ie,$,e){var h=e(75611),P=e(99426),r=e(99960),I=e(93954),V=e(2336),H=e(21263),z=e(18051),K=e(75271),T=e(50241),i=e(52676),G=["fieldProps","proFieldProps"],J=["fieldProps","proFieldProps"],R="text",U=function(l){var n=l.fieldProps,o=l.proFieldProps,O=(0,r.Z)(l,G);return(0,i.jsx)(T.Z,(0,P.Z)({valueType:R,fieldProps:n,filedConfig:{valueType:R},proFieldProps:o},O))},D=function(l){var n=(0,I.Z)(l.open||!1,{value:l.open,onChange:l.onOpenChange}),o=(0,h.Z)(n,2),O=o[0],Z=o[1];return(0,i.jsx)(V.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(j){var y,C=j.getFieldValue(l.name||[]);return(0,i.jsx)(H.Z,(0,P.Z)((0,P.Z)({getPopupContainer:function(E){return E&&E.parentNode?E.parentNode:E},onOpenChange:function(E){return Z(E)},content:(0,i.jsxs)("div",{style:{padding:"4px 0"},children:[(y=l.statusRender)===null||y===void 0?void 0:y.call(l,C),l.strengthText?(0,i.jsx)("div",{style:{marginTop:10},children:(0,i.jsx)("span",{children:l.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},l.popoverProps),{},{open:O,children:l.children}))}})},_=function(l){var n=l.fieldProps,o=l.proFieldProps,O=(0,r.Z)(l,J),Z=(0,K.useState)(!1),m=(0,h.Z)(Z,2),j=m[0],y=m[1];return n!=null&&n.statusRender&&O.name?(0,i.jsx)(D,{name:O.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:j,onOpenChange:y,children:(0,i.jsx)("div",{children:(0,i.jsx)(T.Z,(0,P.Z)({valueType:"password",fieldProps:(0,P.Z)((0,P.Z)({},(0,z.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(B){var E;n==null||(E=n.onBlur)===null||E===void 0||E.call(n,B),y(!1)},onClick:function(B){var E;n==null||(E=n.onClick)===null||E===void 0||E.call(n,B),y(!0)}}),proFieldProps:o,filedConfig:{valueType:R}},O))})}):(0,i.jsx)(T.Z,(0,P.Z)({valueType:"password",fieldProps:n,proFieldProps:o,filedConfig:{valueType:R}},O))},A=U;A.Password=_,A.displayName="ProFormComponent",$.Z=A},71756:function(ie,$,e){e.r($);var h=e(90228),P=e.n(h),r=e(26068),I=e.n(r),V=e(87999),H=e.n(V),z=e(48305),K=e.n(z),T=e(75271),i=e(2336),G=e(51162),J=e(57355),R=e(23102),U=e(76985),D=e(24783),_=e(61032),A=e(54733),w=e(76202),l=e(68834),n=e(59472),o=e(52676),O=function(m){var j=i.Z.useForm(),y=K()(j,1),C=y[0],B=m.deptTree,E=m.deptCheckedKeys,ue=(0,T.useState)("1"),ce=K()(ue,2),ve=ce[0],_e=ce[1],ae=(0,T.useState)([]),pe=K()(ae,2),a=pe[0],u=pe[1],p=(0,T.useState)([]),s=K()(p,2),d=s[0],t=s[1],c=(0,T.useState)(!0),f=K()(c,2),x=f[0],M=f[1];(0,T.useEffect)(function(){u(E),C.resetFields(),C.setFieldsValue({roleId:m.values.roleId,roleName:m.values.roleName,roleKey:m.values.roleKey,dataScope:m.values.dataScope}),_e(m.values.dataScope)},[m.values]);var L=(0,_.useIntl)(),te=function(){C.submit()},ne=function(){m.onCancel()},se=function(){var g=H()(P()().mark(function v(S){return P()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:m.onSubmit(I()(I()({},S),{},{deptIds:a}));case 1:case"end":return ee.stop()}},v)}));return function(S){return g.apply(this,arguments)}}(),le=function g(v){var S=[];return v.forEach(function(F){S.push(F.key),F.children&&(S=S.concat(g(F.children)))}),S},k=le(B),q=function(v){v.includes("deptExpand")?t(k):t([]),v.includes("deptNodeAll")?u(k):u([]),v.includes("deptCheckStrictly")?M(!1):M(!0)};return(0,o.jsx)(G.Z,{width:640,title:L.formatMessage({id:"system.user.auth.role",defaultMessage:"\u5206\u914D\u89D2\u8272"}),open:m.open,destroyOnClose:!0,forceRender:!0,onOk:te,onCancel:ne,children:(0,o.jsxs)(A.A,{form:C,grid:!0,layout:"horizontal",onFinish:se,initialValues:{login_password:"",confirm_password:""},children:[(0,o.jsx)(w.Z,{name:"roleId",label:L.formatMessage({id:"system.role.role_id",defaultMessage:"\u89D2\u8272\u7F16\u53F7"}),colProps:{md:12,xl:12},placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u53F7",disabled:!0,hidden:!0,rules:[{required:!1,message:(0,o.jsx)(_.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u53F7\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u53F7\uFF01"})}]}),(0,o.jsx)(l.Z,{name:"roleName",label:L.formatMessage({id:"system.role.role_name",defaultMessage:"\u89D2\u8272\u540D\u79F0"}),disabled:!0,placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",rules:[{required:!0,message:(0,o.jsx)(_.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0\uFF01"})}]}),(0,o.jsx)(l.Z,{name:"roleKey",label:L.formatMessage({id:"system.role.role_key",defaultMessage:"\u6743\u9650\u5B57\u7B26\u4E32"}),disabled:!0,placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32",rules:[{required:!0,message:(0,o.jsx)(_.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32\uFF01"})}]}),(0,o.jsx)(n.Z,{name:"dataScope",label:"\u6743\u9650\u8303\u56F4",initialValue:"1",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6027\u522B",valueEnum:{1:"\u5168\u90E8\u6570\u636E\u6743\u9650",2:"\u81EA\u5B9A\u6570\u636E\u6743\u9650",3:"\u672C\u90E8\u95E8\u6570\u636E\u6743\u9650",4:"\u672C\u90E8\u95E8\u53CA\u4EE5\u4E0B\u6570\u636E\u6743\u9650",5:"\u4EC5\u672C\u4EBA\u6570\u636E\u6743\u9650"},rules:[{required:!0}],fieldProps:{onChange:function(v){_e(v)}}}),(0,o.jsx)(A.A.Item,{name:"deptIds",label:L.formatMessage({id:"system.role.auth",defaultMessage:"\u83DC\u5355\u6743\u9650"}),required:ve==="1",hidden:ve!=="1",children:(0,o.jsxs)(J.Z,{gutter:[16,16],children:[(0,o.jsx)(R.Z,{md:24,children:(0,o.jsx)(U.Z.Group,{options:[{label:"\u5C55\u5F00/\u6298\u53E0",value:"deptExpand"},{label:"\u5168\u9009/\u5168\u4E0D\u9009",value:"deptNodeAll"}],onChange:q})}),(0,o.jsx)(R.Z,{md:24,children:(0,o.jsx)(D.Z,{checkable:!0,checkStrictly:x,expandedKeys:d,treeData:B,checkedKeys:a,defaultCheckedKeys:E,onCheck:function(v,S){return console.log(v,S),u(x?v.checked:{checked:v,halfChecked:S.halfCheckedKeys})},onExpand:function(v){t(d.concat(v))}})})]})})]})})};$.default=O},24783:function(ie,$,e){e.d($,{Z:function(){return pe}});var h=e(62076),P=e(81230),r=e(75271),I=e(63488),V=e(1183),H=e(23538),z=e(82187),K=e.n(z),T=e(84450),i=e(28994),G=e(46323),J=e(84411),R=e(73135),U=e(66959),D=e(73792);const _=4;function A(a){const{dropPosition:u,dropLevelOffset:p,prefixCls:s,indent:d,direction:t="ltr"}=a,c=t==="ltr"?"left":"right",f=t==="ltr"?"right":"left",x={[c]:-p*d+_,[f]:0};switch(u){case-1:x.top=-3;break;case 1:x.bottom=-3;break;default:x.bottom=-3,x[c]=d+_;break}return r.createElement("div",{style:x,className:`${s}-drop-indicator`})}var w=A,l=e(94589),o=r.forwardRef((a,u)=>{var p;const{getPrefixCls:s,direction:d,virtual:t,tree:c}=r.useContext(G.E_),{prefixCls:f,className:x,showIcon:M=!1,showLine:L,switcherIcon:te,switcherLoadingIcon:ne,blockNode:se=!1,children:le,checkable:k=!1,selectable:q=!0,draggable:g,motion:v,style:S}=a,F=s("tree",f),ee=s(),de=v!=null?v:Object.assign(Object.assign({},(0,R.Z)(ee)),{motionAppear:!1}),Pe=Object.assign(Object.assign({},a),{checkable:k,selectable:q,showIcon:M,motion:de,blockNode:se,showLine:!!L,dropIndicatorRender:w}),[Q,W,Y]=(0,D.ZP)(F),[,re]=(0,U.ZP)(),oe=re.paddingXS/2+(((p=re.Tree)===null||p===void 0?void 0:p.titleHeight)||re.controlHeightSM),Ee=r.useMemo(()=>{if(!g)return!1;let b={};switch(typeof g){case"function":b.nodeDraggable=g;break;case"object":b=Object.assign({},g);break;default:break}return b.icon!==!1&&(b.icon=b.icon||r.createElement(J.Z,null)),b},[g]),N=b=>r.createElement(l.Z,{prefixCls:F,switcherIcon:te,switcherLoadingIcon:ne,treeNodeProps:b,showLine:L});return Q(r.createElement(h.ZP,Object.assign({itemHeight:oe,ref:u,virtual:t},Pe,{style:Object.assign(Object.assign({},c==null?void 0:c.style),S),prefixCls:F,className:K()({[`${F}-icon-hide`]:!M,[`${F}-block-node`]:se,[`${F}-unselectable`]:!q,[`${F}-rtl`]:d==="rtl"},c==null?void 0:c.className,x,W,Y),direction:d,checkable:k&&r.createElement("span",{className:`${F}-checkbox-inner`}),selectable:q,switcherIcon:N,draggable:Ee}),le))});const O=0,Z=1,m=2;function j(a,u,p){const{key:s,children:d}=p;function t(c){const f=c[s],x=c[d];u(f,c)!==!1&&j(x||[],u,p)}a.forEach(t)}function y(a){let{treeData:u,expandedKeys:p,startKey:s,endKey:d,fieldNames:t}=a;const c=[];let f=O;if(s&&s===d)return[s];if(!s||!d)return[];function x(M){return M===s||M===d}return j(u,M=>{if(f===m)return!1;if(x(M)){if(c.push(M),f===O)f=Z;else if(f===Z)return f=m,!1}else f===Z&&c.push(M);return p.includes(M)},(0,i.w$)(t)),c}function C(a,u,p){const s=(0,P.Z)(u),d=[];return j(a,(t,c)=>{const f=s.indexOf(t);return f!==-1&&(d.push(c),s.splice(f,1)),!!s.length},(0,i.w$)(p)),d}var B=function(a,u){var p={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&u.indexOf(s)<0&&(p[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,s=Object.getOwnPropertySymbols(a);d<s.length;d++)u.indexOf(s[d])<0&&Object.prototype.propertyIsEnumerable.call(a,s[d])&&(p[s[d]]=a[s[d]]);return p};function E(a){const{isLeaf:u,expanded:p}=a;return u?r.createElement(I.Z,null):p?r.createElement(V.Z,null):r.createElement(H.Z,null)}function ue(a){let{treeData:u,children:p}=a;return u||(0,i.zn)(p)}const ce=(a,u)=>{var{defaultExpandAll:p,defaultExpandParent:s,defaultExpandedKeys:d}=a,t=B(a,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const c=r.useRef(null),f=r.useRef(null),x=()=>{const{keyEntities:Q}=(0,i.I8)(ue(t));let W;return p?W=Object.keys(Q):s?W=(0,T.r7)(t.expandedKeys||d||[],Q):W=t.expandedKeys||d||[],W},[M,L]=r.useState(t.selectedKeys||t.defaultSelectedKeys||[]),[te,ne]=r.useState(()=>x());r.useEffect(()=>{"selectedKeys"in t&&L(t.selectedKeys)},[t.selectedKeys]),r.useEffect(()=>{"expandedKeys"in t&&ne(t.expandedKeys)},[t.expandedKeys]);const se=(Q,W)=>{var Y;return"expandedKeys"in t||ne(Q),(Y=t.onExpand)===null||Y===void 0?void 0:Y.call(t,Q,W)},le=(Q,W)=>{var Y;const{multiple:re,fieldNames:oe}=t,{node:Ee,nativeEvent:N}=W,{key:b=""}=Ee,me=ue(t),fe=Object.assign(Object.assign({},W),{selected:!0}),he=(N==null?void 0:N.ctrlKey)||(N==null?void 0:N.metaKey),De=N==null?void 0:N.shiftKey;let X;re&&he?(X=Q,c.current=b,f.current=X,fe.selectedNodes=C(me,X,oe)):re&&De?(X=Array.from(new Set([].concat((0,P.Z)(f.current||[]),(0,P.Z)(y({treeData:me,expandedKeys:te,startKey:b,endKey:c.current,fieldNames:oe}))))),fe.selectedNodes=C(me,X,oe)):(X=[b],c.current=b,f.current=X,fe.selectedNodes=C(me,X,oe)),(Y=t.onSelect)===null||Y===void 0||Y.call(t,X,fe),"selectedKeys"in t||L(X)},{getPrefixCls:k,direction:q}=r.useContext(G.E_),{prefixCls:g,className:v,showIcon:S=!0,expandAction:F="click"}=t,ee=B(t,["prefixCls","className","showIcon","expandAction"]),de=k("tree",g),Pe=K()(`${de}-directory`,{[`${de}-directory-rtl`]:q==="rtl"},v);return r.createElement(o,Object.assign({icon:E,ref:u,blockNode:!0},ee,{showIcon:S,expandAction:F,prefixCls:de,className:Pe,expandedKeys:te,selectedKeys:M,onSelect:le,onExpand:se}))};var _e=r.forwardRef(ce);const ae=o;ae.DirectoryTree=_e,ae.TreeNode=h.OF;var pe=ae}}]);
