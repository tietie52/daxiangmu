"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4474,592],{41009:function(ie,N,a){a.d(N,{iK:function(){return W},zc:function(){return V}});var W=function(d){return d[d.SUCCESS=200]="SUCCESS",d[d.ERROR=-1]="ERROR",d[d.TIMEOUT=401]="TIMEOUT",d.TYPE="success",d}({}),L=function(d){return d.GET="GET",d.POST="POST",d.PUT="PUT",d.DELETE="DELETE",d}({}),V=function(d){return d.JSON="application/json;charset=UTF-8",d.FORM_URLENCODED="application/x-www-form-urlencoded;charset=UTF-8",d.FORM_DATA="multipart/form-data;charset=UTF-8",d}({})},592:function(ie,N,a){a.r(N);var W=a(75271),L=a(26208),V=a.n(L),d=a(20813),q=a.n(d),e=a(52676),C=(0,W.forwardRef)(function(G,D){var A,i=G.data;return(0,e.jsxs)("div",{ref:D,style:{padding:"20px",fontFamily:'"Microsoft YaHei", sans-serif',fontSize:"14px"},children:[(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"1px solid #eee",paddingBottom:"15px"},children:[(0,e.jsx)("div",{children:(0,e.jsxs)("h1",{style:{fontSize:"22px",fontWeight:"bold",marginBottom:"8px"},children:["\u79FB\u5E93\u5355\uFF1A",i.movementOrderNo]})}),(0,e.jsx)("div",{children:(0,e.jsx)(q(),{value:i.movementOrderNo,options:{displayValue:!1,width:1,height:50,format:"CODE128"}})})]}),(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",marginBottom:"20px"},children:[(0,e.jsxs)("div",{style:{flex:1,minWidth:"250px"},children:[(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u79FB\u5E93\u72B6\u6001\uFF1A"}),i.movementOrderStatus]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u6E90\u4ED3\u5E93\uFF1A"}),i.sourceWarehouseName]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u76EE\u6807\u4ED3\u5E93\uFF1A"}),i.targetWarehouseName]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u521B\u5EFA\u4EBA\uFF1A"}),i.createBy]}),i.updateBy&&(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u64CD\u4F5C\u4EBA\uFF1A"}),i.updateBy]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u5907\u6CE8\uFF1A"}),i.remark]})]}),(0,e.jsxs)("div",{style:{flex:1,minWidth:"250px"},children:[(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u603B\u6570\u91CF\uFF1A"}),i.totalQuantity]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u6E90\u5E93\u533A\uFF1A"}),i.sourceAreaName]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u76EE\u6807\u5E93\u533A\uFF1A"}),i.targetAreaName]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u521B\u5EFA\u65F6\u95F4\uFF1A"}),i.createTime]}),i.updateTime&&(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u64CD\u4F5C\u65F6\u95F4\uFF1A"}),i.updateTime]})]})]}),((A=i.table)===null||A===void 0?void 0:A.length)>0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",margin:"15px 0",border:"1px solid"},children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left",width:"20%"},children:"\u5546\u54C1\u540D\u79F0"}),(0,e.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left",width:"15%"},children:"\u89C4\u683C"}),(0,e.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left",width:"10%"},children:"\u6E90\u5E93\u533A"}),(0,e.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left",width:"10%"},children:"\u76EE\u6807\u5E93\u533A"}),(0,e.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"right",width:"10%"},children:"\u6570\u91CF"}),i.table.some(function(m){return m.batchNo})&&(0,e.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left",width:"15%"},children:"\u6279\u53F7"})]})}),(0,e.jsxs)("tbody",{children:[i.table.map(function(m,T){return(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:m.itemName}),(0,e.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:m.skuName}),(0,e.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:m.sourceAreaName}),(0,e.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:m.targetAreaName}),(0,e.jsx)("td",{style:{border:"1px solid",padding:"8px",textAlign:"right"},children:m.quantity}),i.table.some(function(O){return O.batchNo})&&(0,e.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:m.batchNo||"-"})]},T)}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{colSpan:4,style:{border:"1px solid",padding:"8px",textAlign:"right"},children:"\u5408\u8BA1"}),(0,e.jsx)("td",{style:{border:"1px solid",padding:"8px",textAlign:"right",fontWeight:500},children:i.table.reduce(function(m,T){return m+Number(T.quantity)},0)}),i.table.some(function(m){return m.batchNo})&&(0,e.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:"-"})]})]})]}),i.remark&&(0,e.jsx)("div",{style:{marginTop:"15px",padding:"10px",borderTop:"1px dashed"},children:(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u5907\u6CE8\uFF1A"}),i.remark]})})]}):(0,e.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"#999"},children:"\u6682\u65E0\u79FB\u5E93\u660E\u7EC6\u6570\u636E"})]})}),c=function(D){var A=D.data,i=D.onClose,m=D.loading,T=m===void 0?!1:m,O=D.visible,P=(0,W.useRef)(null),R=(0,L.useReactToPrint)({contentRef:P});return(0,W.useEffect)(function(){if(O){var K=setTimeout(function(){R()},100);return function(){return clearTimeout(K)}}},[O,R]),(0,e.jsxs)("div",{children:[(0,e.jsx)("button",{onClick:function(){return R()},children:"\u6253\u5370"}),(0,e.jsx)(C,{ref:P,data:A})]})};N.default=c},74474:function(ie,N,a){a.r(N);var W=a(82092),L=a.n(W),V=a(15558),d=a.n(V),q=a(90228),e=a.n(q),C=a(26068),c=a.n(C),G=a(87999),D=a.n(G),A=a(48305),i=a.n(A),m=a(75271),T=a(61032),O=a(2336),P=a(51162),R=a(79654),K=a(53059),ne=a(6778),b=a(48625),re=a(54584),z=a(8797),ee=a(14218),de=a(81114),F=a(73320),p=a(17023),f=a(47383),I=a(16621),l=a(73323),B=a(67627),ae=a(92203),v=a(65269),E=a(16483),$=a.n(E),Be=a(39731),Se=a(592),r=a(52676),Ue=function(){var le,Ne=(0,m.useState)([]),ge=i()(Ne,2),oe=ge[0],We=ge[1],ue=(0,T.useModel)("wms");ue.getWarehouseList();var Z=ue.warehouseMap;ue.getAreaList();var S=ue.areaMap,Le=O.Z.useForm(),Re=i()(Le,1),xe=Re[0],Ke=(0,m.useState)(!1),De=i()(Ke,2),$e=De[0],Q=De[1],Ze=(0,m.useState)([]),Oe=i()(Ze,2),we=Oe[0],ye=Oe[1],ke=(0,m.useState)(0),je=i()(ke,2),Ye=je[0],Ve=je[1],Ge=(0,m.useState)([]),Ce=i()(Ge,2),w=Ce[0],te=Ce[1],ze=(0,m.useState)({}),Me=i()(ze,2),Ae=Me[0],Pe=Me[1],Qe=(0,m.useState)({editVisible:!1,currentOrder:null}),be=i()(Qe,2),_e=be[0],se=be[1],He=(0,m.useState)({pageNum:1,pageSize:10,movementOrderNo:void 0,movementOrderStatus:-2,sourceWarehouseId:void 0,sourceAreaId:void 0,targetWarehouseId:void 0,targetAreaId:void 0}),Te=i()(He,2),k=Te[0],Y=Te[1];(0,m.useEffect)(function(){(0,v.pX)("wms_movement_status").then(function(u){var n=Object.values(u);We(n)}),ce()},[k.pageNum,k.pageSize,k.movementOrderStatus]);var ce=function(){var u=D()(e()().mark(function n(){var t,s;return e()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return Q(!0),_.prev=1,t=c()({},k),t.movementOrderStatus===-2&&delete t.movementOrderStatus,_.next=6,(0,B.K)(t);case 6:s=_.sent,ye(s.rows),Ve(s.total),te([]);case 10:return _.prev=10,Q(!1),_.finish(10);case 13:case"end":return _.stop()}},n,null,[[1,,10,13]])}));return function(){return u.apply(this,arguments)}}(),me=function(){Y(function(n){return c()(c()({},n),{},{pageNum:1})}),ce()},Xe=function(){xe.resetFields(),Y({pageNum:1,pageSize:10,movementOrderNo:void 0,movementOrderStatus:-2,sourceWarehouseId:void 0,sourceAreaId:void 0,targetWarehouseId:void 0,targetAreaId:void 0})},Je=function(){se({editVisible:!0,currentOrder:null})},qe=function(){var u=D()(e()().mark(function n(t){return e()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:P.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u79FB\u5E93\u5355\u3010".concat(t.movementOrderNo,"\u3011\u5417\uFF1F"),onOk:function(){var _=D()(e()().mark(function y(){return e()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return Q(!0),h.prev=1,h.next=4,(0,B.w2)(t.id);case 4:R.ZP.success("\u5220\u9664\u6210\u529F"),ce(),h.next=11;break;case 8:h.prev=8,h.t0=h.catch(1),h.t0===409&&P.Z.error({title:"\u7CFB\u7EDF\u63D0\u793A",content:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:["\u79FB\u5E93\u5355\u3010",t.movementOrderNo,"\u3011\u5DF2\u79FB\u5E93\uFF0C\u4E0D\u80FD\u5220\u9664\uFF01"]}),(0,r.jsx)("div",{children:"\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5904\u7406\uFF01"})]})});case 11:return h.prev=11,Q(!1),h.finish(11);case 14:case"end":return h.stop()}},y,null,[[1,8,11,14]])}));function U(){return _.apply(this,arguments)}return U}()});case 1:case"end":return o.stop()}},n)}));return function(t){return u.apply(this,arguments)}}(),et=function(n){se({editVisible:!0,currentOrder:n})},tt=function(n){var t=w.indexOf(n.id);t!==-1?te(w.filter(function(s){return s!==n.id})):(te([].concat(d()(w),[n.id])),Fe(n))},Fe=function(){var u=D()(e()().mark(function n(t){var s,o,_;return e()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return Pe(function(x){return c()(c()({},x),{},L()({},t.id,!0))}),y.prev=1,y.next=4,(0,ae.hS)(t.id);case 4:o=y.sent,(s=o.data)!==null&&s!==void 0&&s.length&&(_=o.data.map(function(x){var h,g,H,X;return c()(c()({},x),{},{sourceWarehouseName:(h=Z.get(x.sourceWarehouseId))===null||h===void 0?void 0:h.warehouseName,sourceAreaName:(g=S.get(x.sourceAreaId))===null||g===void 0?void 0:g.areaName,targetWarehouseName:(H=Z.get(x.targetWarehouseId))===null||H===void 0?void 0:H.warehouseName,targetAreaName:(X=S.get(x.targetAreaId))===null||X===void 0?void 0:X.areaName})}),ye(function(x){return x.map(function(h){return h.id===t.id?c()(c()({},h),{},{details:_}):h})}));case 6:return y.prev=6,Pe(function(x){return c()(c()({},x),{},L()({},t.id,!1))}),y.finish(6);case 9:case"end":return y.stop()}},n,null,[[1,,6,9]])}));return function(t){return u.apply(this,arguments)}}(),nt=function(n){var t;return(t=oe.find(function(s){return s.value==n.movementOrderStatus}))===null||t===void 0?void 0:t.label},rt=(0,m.useState)(null),Ie=i()(rt,2),pe=Ie[0],he=Ie[1],at=function(){var u=D()(e()().mark(function n(t){var s,o,_,U,y,x,h,g,H,X;return e()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return Q(!0),j.prev=1,j.next=4,Promise.all([(0,B.fp)(t.id),(0,ae.hS)(t.id)]);case 4:x=j.sent,h=i()(x,2),g=h[0],H=h[1],X=H.data.map(function(M){var J,fe,ve,Ee;return{itemName:((J=M.itemSku)===null||J===void 0||(J=J.item)===null||J===void 0?void 0:J.itemName)||"-",skuName:((fe=M.itemSku)===null||fe===void 0?void 0:fe.skuName)||"-",sourceAreaName:((ve=S.get(M.sourceAreaId))===null||ve===void 0?void 0:ve.areaName)||"-",targetAreaName:((Ee=S.get(M.targetAreaId))===null||Ee===void 0?void 0:Ee.areaName)||"-",quantity:Number(M.quantity).toFixed(0),batchNo:M.batchNo||void 0,productionDate:M.productionDate?$()(M.productionDate).format("YYYY-MM-DD"):void 0,expirationDate:M.expirationDate?$()(M.expirationDate).format("YYYY-MM-DD"):void 0}}),he({movementOrderNo:g.data.movementOrderNo,sourceWarehouseName:((s=Z.get(g.data.sourceWarehouseId))===null||s===void 0?void 0:s.warehouseName)||"-",sourceAreaName:((o=S.get(g.data.sourceAreaId))===null||o===void 0?void 0:o.areaName)||"-",targetWarehouseName:((_=Z.get(g.data.targetWarehouseId))===null||_===void 0?void 0:_.warehouseName)||"-",targetAreaName:((U=S.get(g.data.targetAreaId))===null||U===void 0?void 0:U.areaName)||"-",movementOrderStatus:(y=oe.find(function(M){return M.value==g.data.movementOrderStatus}))===null||y===void 0?void 0:y.label,totalQuantity:Number(g.data.totalQuantity).toFixed(0),createBy:g.data.createBy,createTime:$()(g.data.createTime).format("YYYY-MM-DD HH:mm"),updateBy:g.data.updateBy,updateTime:g.data.updateTime?$()(g.data.updateTime).format("YYYY-MM-DD HH:mm"):void 0,remark:g.data.remark,table:X}),j.next=16;break;case 12:j.prev=12,j.t0=j.catch(1),R.ZP.error("\u83B7\u53D6\u6253\u5370\u6570\u636E\u5931\u8D25"),console.error("Print error:",j.t0);case 16:return j.prev=16,Q(!1),j.finish(16);case 19:case"end":return j.stop()}},n,null,[[1,12,16,19]])}));return function(t){return u.apply(this,arguments)}}(),ut=[{title:"\u5355\u53F7",dataIndex:"movementOrderNo",align:"left",width:120},{title:"\u6E90\u4ED3\u5E93/\u6E90\u5E93\u533A",align:"left",width:260,render:function(n,t){var s,o;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:["\u6E90\u4ED3\u5E93\uFF1A",(s=Z.get(t.sourceWarehouseId))===null||s===void 0?void 0:s.warehouseName]}),t.sourceAreaId&&(0,r.jsxs)("div",{children:["\u6E90\u5E93\u533A\uFF1A",(o=S.get(t.sourceAreaId))===null||o===void 0?void 0:o.areaName]})]})}},{title:"\u76EE\u6807\u4ED3\u5E93/\u76EE\u6807\u5E93\u533A",align:"left",width:260,render:function(n,t){var s,o;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:["\u76EE\u6807\u4ED3\u5E93\uFF1A",(s=Z.get(t.targetWarehouseId))===null||s===void 0?void 0:s.warehouseName]}),t.targetAreaId&&(0,r.jsxs)("div",{children:["\u76EE\u6807\u5E93\u533A\uFF1A",(o=S.get(t.targetAreaId))===null||o===void 0?void 0:o.areaName]})]})}},{title:"\u79FB\u5E93\u72B6\u6001",dataIndex:"movementOrderStatus",align:"center",width:120,render:function(n,t){return(0,r.jsx)(K.Z,{color:t.movementOrderStatus==0?"blue":t.movementOrderStatus==1?"green":"red",children:nt(t)})}},{title:"\u6570\u91CF",align:"left",render:function(n,t){return(0,r.jsxs)("div",{className:"flex-space-between",children:[(0,r.jsx)("span",{children:"\u6570\u91CF\uFF1A"}),(0,r.jsx)(ne.Z,{value:Number(t.totalQuantity),precision:0})]})}},{title:"\u521B\u5EFA/\u64CD\u4F5C",align:"left",render:function(n,t){return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:["\u521B\u5EFA\uFF1A",t.createBy]}),t.updateBy&&(0,r.jsxs)("div",{children:["\u64CD\u4F5C\uFF1A",t.updateBy]})]})}},{title:"\u521B\u5EFA\u65F6\u95F4/\u64CD\u4F5C\u65F6\u95F4",align:"left",width:200,render:function(n,t){return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:["\u521B\u5EFA\uFF1A",$()(t.createTime).format("MM-DD HH:mm")]}),(0,r.jsxs)("div",{children:["\u64CD\u4F5C\uFF1A",$()(t.updateTime).format("MM-DD HH:mm")]})]})}},{title:"\u5907\u6CE8",dataIndex:"remark"},{title:"\u64CD\u4F5C",align:"center",width:160,render:function(n,t){return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(b.ZP,{type:"link",onClick:function(){return et(t)},disabled:[-1,1].includes(t.movementOrderStatus),children:"\u4FEE\u6539"}),(0,r.jsx)(b.ZP,{type:"link",onClick:function(){return tt(t)},children:w.includes(t.id)?"\u6536\u8D77":"\u67E5\u770B"})]}),(0,r.jsxs)("div",{style:{marginTop:5},children:[(0,r.jsx)(b.ZP,{type:"link",danger:!0,onClick:function(){return qe(t)},disabled:t.movementOrderStatus===1,children:"\u5220\u9664"}),(0,r.jsx)(b.ZP,{type:"link",onClick:function(){return at(t)},children:"\u6253\u5370"})]})]})}}],st=function(n){return Ae[n.id]?(0,r.jsx)("div",{style:{textAlign:"center",padding:"20px"},children:"\u52A0\u8F7D\u4E2D..."}):(0,r.jsxs)("div",{style:{padding:"0 50px 20px 50px"},children:[(0,r.jsx)("h3",{children:"\u5546\u54C1\u660E\u7EC6"}),(0,r.jsx)(re.Z,{dataSource:n.details||[],loading:Ae[n.id],rowKey:"id",pagination:!1,columns:[{title:"\u5546\u54C1\u540D\u79F0",dataIndex:["itemSku","item","itemName"],render:function(s,o){var _;return o==null||(_=o.itemSku)===null||_===void 0||(_=_.item)===null||_===void 0?void 0:_.itemName}},{title:"\u89C4\u683C\u540D\u79F0",dataIndex:["itemSku","skuName"],render:function(s,o){var _;return o==null||(_=o.itemSku)===null||_===void 0?void 0:_.skuName}},{title:"\u6E90\u5E93\u533A",dataIndex:"sourceAreaName"},{title:"\u76EE\u6807\u5E93\u533A",dataIndex:"targetAreaName"},{title:"\u6570\u91CF",dataIndex:"quantity",align:"right",render:function(s){return(0,r.jsx)(ne.Z,{value:Number(s),precision:0})}},{title:"\u6279\u53F7",dataIndex:"batchNo"},{title:"\u751F\u4EA7\u65E5\u671F",dataIndex:"productionDate",render:function(s){return s?$()(s).format("YYYY-MM-DD"):"-"}},{title:"\u8FC7\u671F\u65E5\u671F",dataIndex:"expirationDate",render:function(s){return s?$()(s).format("YYYY-MM-DD"):"-"}}]})]})};return(0,r.jsxs)(l._z,{children:[(0,r.jsx)(z.Z,{children:(0,r.jsxs)(O.Z,{form:xe,layout:"inline",labelAlign:"left",style:{display:"flex",flexWrap:"nowrap",gap:16},children:[(0,r.jsx)(O.Z.Item,{label:"\u79FB\u5E93\u72B6\u6001",name:"movementOrderStatus",initialValue:-2,style:{marginBottom:0,flex:1},children:(0,r.jsxs)(ee.ZP.Group,{onChange:function(n){Y(function(t){return c()(c()({},t),{},{movementOrderStatus:n.target.value})}),me()},style:{whiteSpace:"nowrap"},children:[(0,r.jsx)(ee.ZP.Button,{value:-2,children:"\u5168\u90E8"}),oe.map(function(u){return(0,r.jsx)(ee.ZP.Button,{value:u.value,children:u.label},u.value)})]})}),(0,r.jsx)(O.Z.Item,{label:"\u79FB\u5E93\u5355\u53F7",name:"movementOrderNo",style:{marginBottom:0,flex:1},children:(0,r.jsx)(de.Z,{placeholder:"\u8BF7\u8F93\u5165\u79FB\u5E93\u5355\u53F7",allowClear:!0,onPressEnter:me,style:{minWidth:180},value:k.movementOrderNo,onChange:function(n){return Y(function(t){return c()(c()({},t),{},{movementOrderNo:n.target.value})})}})}),(0,r.jsx)(O.Z.Item,{label:"\u6E90\u4ED3\u5E93\u5E93\u533A",name:"sourcePlace",style:{marginBottom:0,flex:1},children:(0,r.jsx)(F.Z,{placeholder:"\u8BF7\u9009\u62E9\u6E90\u4ED3\u5E93\u5E93\u533A",style:{width:"100%"},onChange:function(n){var t=(n==null?void 0:n.split("_"))||[],s=i()(t,2),o=s[0],_=s[1];Y(function(U){return c()(c()({},U),{},{sourceWarehouseId:o,sourceAreaId:_})})},children:Array.from(Z.values()).map(function(u){return(0,r.jsx)(F.Z.OptGroup,{label:u.warehouseName,children:Array.from(S.values()).filter(function(n){return n.warehouseId===u.id}).map(function(n){return(0,r.jsx)(F.Z.Option,{value:"".concat(u.id,"_").concat(n.id),children:n.areaName},"".concat(u.id,"_").concat(n.id))})},u.id)})})}),(0,r.jsx)(O.Z.Item,{label:"\u76EE\u6807\u4ED3\u5E93\u5E93\u533A",name:"targetPlace",style:{marginBottom:0,flex:1},children:(0,r.jsx)(F.Z,{placeholder:"\u8BF7\u9009\u62E9\u76EE\u6807\u4ED3\u5E93\u5E93\u533A",style:{width:"100%"},onChange:function(n){var t=(n==null?void 0:n.split("_"))||[],s=i()(t,2),o=s[0],_=s[1];Y(function(U){return c()(c()({},U),{},{targetWarehouseId:o,targetAreaId:_})})},children:Array.from(Z.values()).map(function(u){return(0,r.jsx)(F.Z.OptGroup,{label:u.warehouseName,children:Array.from(S.values()).filter(function(n){return n.warehouseId===u.id}).map(function(n){return(0,r.jsx)(F.Z.Option,{value:"".concat(u.id,"_").concat(n.id),children:n.areaName},"".concat(u.id,"_").concat(n.id))})},u.id)})})}),(0,r.jsxs)(O.Z.Item,{style:{marginBottom:0},children:[(0,r.jsx)(b.ZP,{type:"primary",icon:(0,r.jsx)(p.Z,{}),onClick:me,children:"\u641C\u7D22"}),(0,r.jsx)(b.ZP,{icon:(0,r.jsx)(f.Z,{}),onClick:Xe,style:{marginLeft:8},children:"\u91CD\u7F6E"})]})]})}),(0,r.jsxs)(z.Z,{style:{marginTop:20},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[(0,r.jsx)("span",{style:{fontSize:"large"},children:"\u79FB\u5E93\u5355"}),(0,r.jsx)(b.ZP,{type:"primary",icon:(0,r.jsx)(I.Z,{}),onClick:Je,children:"\u65B0\u589E"})]}),(0,r.jsx)(re.Z,{loading:$e,dataSource:we,columns:ut,rowKey:"id",expandable:{expandedRowRender:st,expandedRowKeys:w,onExpand:function(n,t){var s=w.indexOf(t.id);s!==-1?te(w.filter(function(o){return o!==t.id})):(te([].concat(d()(w),[t.id])),t.details||Fe(t))}},pagination:{current:k.pageNum,pageSize:k.pageSize,total:Ye,onChange:function(n,t){Y(function(s){return c()(c()({},s),{},{pageNum:n,pageSize:t})})}},size:"small"})]}),(0,r.jsx)(P.Z,{title:_e.currentOrder?"\u4FEE\u6539\u79FB\u5E93\u5355":"\u65B0\u589E\u79FB\u5E93\u5355",open:_e.editVisible,onCancel:function(){return se(function(n){return c()(c()({},n),{},{editVisible:!1})})},footer:null,width:"80%",destroyOnClose:!0,children:(0,r.jsx)(Be.default,{id:(le=_e.currentOrder)===null||le===void 0?void 0:le.id,onCancel:function(){return se(function(n){return c()(c()({},n),{},{editVisible:!1})})}})}),(0,r.jsx)(P.Z,{open:!!pe,onCancel:function(){return he(null)},footer:null,width:800,children:pe&&(0,r.jsx)(Se.default,{data:pe,onClose:function(){return he(null)},visible:!1})})]})};N.default=Ue},65269:function(ie,N,a){a.d(N,{Hr:function(){return O},QK:function(){return de},Vd:function(){return i},a7:function(){return ne},jK:function(){return D},n2:function(){return ee},oH:function(){return R},pX:function(){return m},sF:function(){return re}});var W=a(26068),L=a.n(W),V=a(90228),d=a.n(V),q=a(87999),e=a.n(q),C=a(61032),c=a(41009),G=a(18606);function D(p){return A.apply(this,arguments)}function A(){return A=e()(d()().mark(function p(f){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,C.request)("/api/system/dict/type/list",{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"},params:f}));case 1:case"end":return l.stop()}},p)})),A.apply(this,arguments)}function i(p){return(0,C.request)("/api/system/dict/type/".concat(p),{method:"GET"})}function m(p,f){return T.apply(this,arguments)}function T(){return T=e()(d()().mark(function p(f,I){var l,B;return d()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return console.log("getDictValueEnum resp:",f),v.next=3,(0,C.request)("/api/system/dict/data/type/".concat(f),{method:"GET"});case 3:if(l=v.sent,console.log("getDictValueEnum resp:",f,l),l.code!==c.iK.SUCCESS){v.next=11;break}return B={},l.data.forEach(function(E){B[E.dictValue]={text:E.dictLabel,label:E.dictLabel,value:I?Number(E.dictValue):E.dictValue,key:E.dictCode,listClass:E.listClass,status:E.listClass}}),v.abrupt("return",B);case 11:return v.abrupt("return",{});case 12:case"end":return v.stop()}},p)})),T.apply(this,arguments)}function O(p,f){return P.apply(this,arguments)}function P(){return P=e()(d()().mark(function p(f,I){var l,B;return d()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,C.request)("/api/system/dict/data/type/".concat(f),{method:"GET"});case 2:if(l=v.sent,l.code!==200){v.next=6;break}return B=l.data.map(function(E){return{text:E.dictLabel,label:E.dictLabel,value:I?Number(E.dictValue):E.dictValue,key:E.dictCode,listClass:E.listClass,status:E.listClass}}),v.abrupt("return",B);case 6:return v.abrupt("return",[]);case 7:case"end":return v.stop()}},p)})),P.apply(this,arguments)}function R(p){return K.apply(this,arguments)}function K(){return K=e()(d()().mark(function p(f){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,C.request)("/api/system/dict/type",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},data:f}));case 1:case"end":return l.stop()}},p)})),K.apply(this,arguments)}function ne(p){return b.apply(this,arguments)}function b(){return b=e()(d()().mark(function p(f){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,C.request)("/api/system/dict/type",{method:"PUT",headers:{"Content-Type":"application/json;charset=UTF-8"},data:f}));case 1:case"end":return l.stop()}},p)})),b.apply(this,arguments)}function re(p){return z.apply(this,arguments)}function z(){return z=e()(d()().mark(function p(f){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,C.request)("/api/system/dict/type/".concat(f),{method:"DELETE"}));case 1:case"end":return l.stop()}},p)})),z.apply(this,arguments)}function ee(p){return(0,G.su)("/api/system/dict/type/export",{params:p},"dict_type_".concat(new Date().getTime(),".xlsx"))}function de(p){return F.apply(this,arguments)}function F(){return F=e()(d()().mark(function p(f){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,C.request)("/api/system/dict/type/optionselect",{params:L()({},f),method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return l.stop()}},p)})),F.apply(this,arguments)}}}]);
