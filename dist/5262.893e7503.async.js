"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5262],{45262:function(ye,w,n){n.r(w);var G=n(75271),K=n(48625),l=n(24783),J=n(86743),Q=n(23299),Y=n(16621),u=n(52676),M=function(d){var L=d.warehouseList,q=d.selectedWarehouseId,_=d.onSelect,ee=d.onAdd,te=d.onUpdate,W=d.onDelete,ne=d.onDrop,ue=d.loading,$=d.hasAddPerm,fe=$===void 0?!0:$,T=d.hasEditPerm,F=T===void 0?!0:T,C=d.hasDeletePerm,U=C===void 0?!0:C,I=function(y){return(0,u.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[(0,u.jsxs)("span",{children:[y.warehouseName,y.warehouseCode&&" (\u7F16\u53F7\uFF1A".concat(y.warehouseCode,")")]}),(0,u.jsxs)("span",{children:[(0,u.jsx)(K.ZP,{type:"link",size:"small",danger:!0,hidden:!U,onClick:function(b){b.stopPropagation(),W(y)},icon:(0,u.jsx)(J.Z,{}),children:"\u5220\u9664"}),(0,u.jsx)(K.ZP,{type:"link",size:"small",hidden:!F,onClick:function(b){b.stopPropagation(),te(y)},icon:(0,u.jsx)(Q.Z,{}),children:"\u4FEE\u6539"})]})]})};return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",backgroundColor:"lightgrey"},children:[(0,u.jsx)("span",{style:{fontSize:"14px"},children:"\u4ED3\u5E93\u5217\u8868"}),(0,u.jsx)(K.ZP,{type:"primary",size:"small",icon:(0,u.jsx)(Y.Z,{}),hidden:!fe,onClick:ee,children:"\u65B0\u589E\u4ED3\u5E93"})]}),(0,u.jsx)(l.Z,{treeData:L,fieldNames:{key:"id",title:"warehouseName"},selectedKeys:[q],onSelect:function(y){y.length>0&&_(y[0])},draggable:!0,blockNode:!0,titleRender:I,onDrop:ne})]})};w.default=M},24783:function(ye,w,n){n.d(w,{Z:function(){return me}});var G=n(62076),K=n(81230),l=n(75271),J=n(63488),Q=n(1183),Y=n(23538),u=n(82187),M=n.n(u),de=n(84450),d=n(28994),L=n(46323),q=n(84411),_=n(73135),ee=n(66959),te=n(73792);const W=4;function ne(s){const{dropPosition:a,dropLevelOffset:c,prefixCls:t,indent:r,direction:e="ltr"}=s,o=e==="ltr"?"left":"right",i=e==="ltr"?"right":"left",f={[o]:-c*r+W,[i]:0};switch(a){case-1:f.top=-3;break;case 1:f.bottom=-3;break;default:f.bottom=-3,f[o]=r+W;break}return l.createElement("div",{style:f,className:`${t}-drop-indicator`})}var ue=ne,$=n(94589),T=l.forwardRef((s,a)=>{var c;const{getPrefixCls:t,direction:r,virtual:e,tree:o}=l.useContext(L.E_),{prefixCls:i,className:f,showIcon:v=!1,showLine:N,switcherIcon:k,switcherLoadingIcon:z,blockNode:H=!1,children:oe,checkable:S=!1,selectable:A=!0,draggable:O,motion:R,style:le}=s,x=t("tree",i),ce=t(),Z=R!=null?R:Object.assign(Object.assign({},(0,_.Z)(ce)),{motionAppear:!1}),ae=Object.assign(Object.assign({},s),{checkable:S,selectable:A,showIcon:v,motion:Z,blockNode:H,showLine:!!N,dropIndicatorRender:ue}),[p,E,P]=(0,te.ZP)(x),[,D]=(0,ee.ZP)(),j=D.paddingXS/2+(((c=D.Tree)===null||c===void 0?void 0:c.titleHeight)||D.controlHeightSM),ie=l.useMemo(()=>{if(!O)return!1;let h={};switch(typeof O){case"function":h.nodeDraggable=O;break;case"object":h=Object.assign({},O);break;default:break}return h.icon!==!1&&(h.icon=h.icon||l.createElement(q.Z,null)),h},[O]),m=h=>l.createElement($.Z,{prefixCls:x,switcherIcon:k,switcherLoadingIcon:z,treeNodeProps:h,showLine:N});return p(l.createElement(G.ZP,Object.assign({itemHeight:j,ref:a,virtual:e},ae,{style:Object.assign(Object.assign({},o==null?void 0:o.style),le),prefixCls:x,className:M()({[`${x}-icon-hide`]:!v,[`${x}-block-node`]:H,[`${x}-unselectable`]:!A,[`${x}-rtl`]:r==="rtl"},o==null?void 0:o.className,f,E,P),direction:r,checkable:S&&l.createElement("span",{className:`${x}-checkbox-inner`}),selectable:A,switcherIcon:m,draggable:ie}),oe))});const F=0,C=1,U=2;function I(s,a,c){const{key:t,children:r}=c;function e(o){const i=o[t],f=o[r];a(i,o)!==!1&&I(f||[],a,c)}s.forEach(e)}function se(s){let{treeData:a,expandedKeys:c,startKey:t,endKey:r,fieldNames:e}=s;const o=[];let i=F;if(t&&t===r)return[t];if(!t||!r)return[];function f(v){return v===t||v===r}return I(a,v=>{if(i===U)return!1;if(f(v)){if(o.push(v),i===F)i=C;else if(i===C)return i=U,!1}else i===C&&o.push(v);return c.includes(v)},(0,d.w$)(e)),o}function y(s,a,c){const t=(0,K.Z)(a),r=[];return I(s,(e,o)=>{const i=t.indexOf(e);return i!==-1&&(r.push(o),t.splice(i,1)),!!t.length},(0,d.w$)(c)),r}var B=function(s,a){var c={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&a.indexOf(t)<0&&(c[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(s);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(s,t[r])&&(c[t[r]]=s[t[r]]);return c};function b(s){const{isLeaf:a,expanded:c}=s;return a?l.createElement(J.Z,null):c?l.createElement(Q.Z,null):l.createElement(Y.Z,null)}function he(s){let{treeData:a,children:c}=s;return a||(0,d.zn)(c)}const ve=(s,a)=>{var{defaultExpandAll:c,defaultExpandParent:t,defaultExpandedKeys:r}=s,e=B(s,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const o=l.useRef(null),i=l.useRef(null),f=()=>{const{keyEntities:p}=(0,d.I8)(he(e));let E;return c?E=Object.keys(p):t?E=(0,de.r7)(e.expandedKeys||r||[],p):E=e.expandedKeys||r||[],E},[v,N]=l.useState(e.selectedKeys||e.defaultSelectedKeys||[]),[k,z]=l.useState(()=>f());l.useEffect(()=>{"selectedKeys"in e&&N(e.selectedKeys)},[e.selectedKeys]),l.useEffect(()=>{"expandedKeys"in e&&z(e.expandedKeys)},[e.expandedKeys]);const H=(p,E)=>{var P;return"expandedKeys"in e||z(p),(P=e.onExpand)===null||P===void 0?void 0:P.call(e,p,E)},oe=(p,E)=>{var P;const{multiple:D,fieldNames:j}=e,{node:ie,nativeEvent:m}=E,{key:h=""}=ie,V=he(e),X=Object.assign(Object.assign({},E),{selected:!0}),xe=(m==null?void 0:m.ctrlKey)||(m==null?void 0:m.metaKey),ge=m==null?void 0:m.shiftKey;let g;D&&xe?(g=p,o.current=h,i.current=g,X.selectedNodes=y(V,g,j)):D&&ge?(g=Array.from(new Set([].concat((0,K.Z)(i.current||[]),(0,K.Z)(se({treeData:V,expandedKeys:k,startKey:h,endKey:o.current,fieldNames:j}))))),X.selectedNodes=y(V,g,j)):(g=[h],o.current=h,i.current=g,X.selectedNodes=y(V,g,j)),(P=e.onSelect)===null||P===void 0||P.call(e,g,X),"selectedKeys"in e||N(g)},{getPrefixCls:S,direction:A}=l.useContext(L.E_),{prefixCls:O,className:R,showIcon:le=!0,expandAction:x="click"}=e,ce=B(e,["prefixCls","className","showIcon","expandAction"]),Z=S("tree",O),ae=M()(`${Z}-directory`,{[`${Z}-directory-rtl`]:A==="rtl"},R);return l.createElement(T,Object.assign({icon:b,ref:a,blockNode:!0},ce,{showIcon:le,expandAction:x,prefixCls:Z,className:ae,expandedKeys:k,selectedKeys:v,onSelect:oe,onExpand:H}))};var Ee=l.forwardRef(ve);const re=T;re.DirectoryTree=Ee,re.TreeNode=G.OF;var me=re}}]);
