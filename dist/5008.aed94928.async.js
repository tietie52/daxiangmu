"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5008,6778,6422],{75008:function(pe,w,r){r.r(w);var f=r(90228),b=r.n(f),k=r(26068),M=r.n(k),N=r(87999),V=r.n(N),K=r(48305),j=r.n(K),P=r(75271),A=r(61032),D=r(2336),H=r(6778),$=r(1153),L=r(48625),I=r(81114),Z=r(73320),B=r(17023),ee=r(90607),c=r(2377),e=r(52676),T=(0,P.forwardRef)(function(u,R){var te=u.open,X=u.onCancel,Y=u.selectedInventory,ne=Y===void 0?[]:Y,J=u.size,s=J===void 0?"30%":J,i=D.Z.useForm(),d=j()(i,1),n=d[0],l=(0,P.useRef)(),E=(0,P.useState)([]),g=j()(E,2),m=g[0],p=g[1],C=(0,P.useState)(!1),y=j()(C,2),x=y[0],_=y[1],U=(0,P.useState)(!1),W=j()(U,2),re=W[0],ae=W[1],z=(0,A.useModel)("wms"),se=z.warehouseMap,G=z.areaMap,ie=z.itemBrandMap;(0,P.useImperativeHandle)(R,function(){return{setWarehouseIdAndAreaId:le,getList:function(){var t;(t=l.current)===null||t===void 0||t.reload()}}});var le=function(t,a){n.setFieldsValue({warehouseId:t,areaId:a}),ae(!!a)},oe=function(t){return(t.length||t.length===0)&&(t.width||t.width===0)&&(t.height||t.height===0)?"".concat(t.length," * ").concat(t.width," * ").concat(t.height):[t.length||t.length===0?"\u957F\uFF1A".concat(t.length):"",t.width||t.width===0?"\u5BBD\uFF1A".concat(t.width):"",t.height||t.height===0?"\u9AD8\uFF1A".concat(t.height):""].filter(Boolean).join(" ")},S=function(t){return!ne.some(function(a){return"".concat(a.warehouseId,"_").concat(a.areaId,"_").concat(a.skuId)==="".concat(t.warehouseId,"_").concat(t.areaId,"_").concat(t.skuId)})},ue=[{title:"\u5E93\u533A",dataIndex:"areaName",render:function(t,a){var v;return(v=G.get(a.areaId))===null||v===void 0?void 0:v.areaName}},{title:"\u5546\u54C1\u4FE1\u606F",render:function(t,a){var v,h,O,q;return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(v=a.item)===null||v===void 0?void 0:v.itemName}),((h=a.item)===null||h===void 0?void 0:h.itemCode)&&(0,e.jsxs)("div",{children:["\u7F16\u53F7\uFF1A",a.item.itemCode]}),((O=a.item)===null||O===void 0?void 0:O.itemBrand)&&(0,e.jsxs)("div",{children:["\u54C1\u724C\uFF1A",(q=ie.get(a.item.itemBrand))===null||q===void 0?void 0:q.brandName]})]})}},{title:"\u89C4\u683C\u4FE1\u606F",render:function(t,a){var v,h,O;return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(v=a.itemSku)===null||v===void 0?void 0:v.skuName}),((h=a.itemSku)===null||h===void 0?void 0:h.skuCode)&&(0,e.jsxs)("div",{children:["\u7F16\u53F7\uFF1A",a.itemSku.skuCode]}),((O=a.itemSku)===null||O===void 0?void 0:O.barcode)&&(0,e.jsxs)("div",{children:["\u6761\u7801\uFF1A",a.itemSku.barcode]})]})}},{title:"\u4EF7\u683C(\u5143)",width:160,align:"left",render:function(t,a){var v,h;return(0,e.jsxs)("div",{children:[((v=a.itemSku)===null||v===void 0?void 0:v.costPrice)!==void 0&&(0,e.jsxs)("div",{className:"flex-space-between",children:[(0,e.jsx)("span",{children:"\u6210\u672C\u4EF7\uFF1A"}),(0,e.jsx)("div",{children:a.itemSku.costPrice})]}),((h=a.itemSku)===null||h===void 0?void 0:h.sellingPrice)!==void 0&&(0,e.jsxs)("div",{className:"flex-space-between",children:[(0,e.jsx)("span",{children:"\u9500\u552E\u4EF7\uFF1A"}),(0,e.jsx)("div",{children:a.itemSku.sellingPrice})]})]})}},{title:"\u91CD\u91CF(kg)",width:160,align:"left",render:function(t,a){var v,h;return(0,e.jsxs)("div",{children:[((v=a.itemSku)===null||v===void 0?void 0:v.netWeight)!==void 0&&(0,e.jsxs)("div",{className:"flex-space-between",children:[(0,e.jsx)("span",{children:"\u51C0\u91CD\uFF1A"}),(0,e.jsx)("div",{children:a.itemSku.netWeight})]}),((h=a.itemSku)===null||h===void 0?void 0:h.grossWeight)!==void 0&&(0,e.jsxs)("div",{className:"flex-space-between",children:[(0,e.jsx)("span",{children:"\u6BDB\u91CD\uFF1A"}),(0,e.jsx)("div",{children:a.itemSku.grossWeight})]})]})}},{title:"\u957F\u5BBD\u9AD8(cm)",align:"right",width:250,render:function(t,a){return(0,e.jsx)("div",{children:oe(a.itemSku)})}},{title:"\u5269\u4F59\u5E93\u5B58",align:"right",render:function(t,a){return(0,e.jsx)(H.Z,{value:Number(a.quantity),precision:0})}}],de=function(){X(),p([])},Q=function(){X(),p([])};return(0,e.jsxs)($.Z,{title:"\u9009\u62E9\u5E93\u5B58",width:s,open:te,onClose:Q,destroyOnClose:!0,footer:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,e.jsx)(L.ZP,{onClick:Q,style:{marginRight:8},children:"\u53D6\u6D88"}),(0,e.jsx)(L.ZP,{type:"primary",onClick:de,children:"\u786E\u8BA4"})]}),children:[(0,e.jsxs)(D.Z,{form:n,layout:"inline",labelAlign:"left",children:[(0,e.jsx)(D.Z.Item,{label:"\u5546\u54C1\u540D\u79F0",name:"itemName",children:(0,e.jsx)(I.Z,{placeholder:"\u5546\u54C1\u540D\u79F0",allowClear:!0})}),(0,e.jsx)(D.Z.Item,{label:"\u5546\u54C1\u7F16\u53F7",name:"itemCode",children:(0,e.jsx)(I.Z,{placeholder:"\u5546\u54C1\u7F16\u53F7",allowClear:!0,style:{width:180}})}),(0,e.jsx)(D.Z.Item,{label:"\u5E93\u533A",name:"areaId",children:(0,e.jsx)(Z.Z,{placeholder:"\u8BF7\u9009\u62E9\u5E93\u533A",disabled:re,allowClear:!0,style:{width:180},children:Array.from(G.values()).filter(function(o){return o.warehouseId===n.getFieldValue("warehouseId")}).map(function(o){return(0,e.jsx)(Z.Z.Option,{value:o.id,children:o.areaName},o.id)})})}),(0,e.jsx)(D.Z.Item,{label:"\u89C4\u683C\u540D\u79F0",name:"skuName",children:(0,e.jsx)(I.Z,{placeholder:"\u89C4\u683C\u540D\u79F0",allowClear:!0,style:{width:180}})}),(0,e.jsx)(D.Z.Item,{label:"\u89C4\u683C\u7F16\u53F7",name:"barcode",children:(0,e.jsx)(I.Z,{placeholder:"\u89C4\u683C\u7F16\u53F7",allowClear:!0,style:{width:180}})}),(0,e.jsx)(D.Z.Item,{children:(0,e.jsx)(L.ZP,{type:"primary",icon:(0,e.jsx)(B.Z,{}),onClick:function(){var t;return(t=l.current)===null||t===void 0?void 0:t.reload()},children:"\u67E5\u8BE2"})})]}),(0,e.jsx)(ee.Z,{style:{marginTop:16},actionRef:l,rowKey:"id",search:!1,options:!1,request:function(){var o=V()(b()().mark(function t(a){var v,h,O;return b()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return _(!0),F.prev=1,v=n.getFieldsValue(),h=M()(M()({},v),{},{pageNum:a.current,pageSize:a.pageSize}),F.next=6,(0,c.B3)(h);case 6:return O=F.sent,F.abrupt("return",{data:O.rows.map(function(ce){var _e,me;return M()(M()({},ce),{},{warehouseName:(_e=se.get(ce.warehouseId))===null||_e===void 0?void 0:_e.warehouseName,areaName:(me=G.get(ce.areaId))===null||me===void 0?void 0:me.areaName})}),total:O.total,success:!0});case 8:return F.prev=8,_(!1),F.finish(8);case 11:case"end":return F.stop()}},t,null,[[1,,8,11]])}));return function(t){return o.apply(this,arguments)}}(),columns:ue,rowSelection:{selectedRowKeys:m.map(function(o){return o.id}),onChange:function(t,a){return p(a)},getCheckboxProps:function(t){return{disabled:!S(t)}}},loading:x,pagination:{showSizeChanger:!0}})]})});w.default=T},2377:function(pe,w,r){r.d(w,{B3:function(){return K},Wc:function(){return P}});var f=r(90228),b=r.n(f),k=r(87999),M=r.n(k),N=r(61032),V=r(18606);function K(c){return j.apply(this,arguments)}function j(){return j=M()(b()().mark(function c(e){return b()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,N.request)("/api/wms/inventory/list",{method:"GET",params:e}));case 1:case"end":return u.stop()}},c)})),j.apply(this,arguments)}function P(c,e){return A.apply(this,arguments)}function A(){return A=M()(b()().mark(function c(e,T){return b()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,N.request)("/api/wms/inventory/boardList/".concat(T),{method:"GET",params:e}));case 1:case"end":return R.stop()}},c)})),A.apply(this,arguments)}function D(c){return request("/api/wms/inventory/".concat(c),{method:"GET"})}function H(c){return $.apply(this,arguments)}function $(){return $=_asyncToGenerator(_regeneratorRuntime().mark(function c(e){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/wms/inventory",{method:"POST",data:e}));case 1:case"end":return u.stop()}},c)})),$.apply(this,arguments)}function L(c){return I.apply(this,arguments)}function I(){return I=_asyncToGenerator(_regeneratorRuntime().mark(function c(e){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/wms/inventory",{method:"PUT",data:e}));case 1:case"end":return u.stop()}},c)})),I.apply(this,arguments)}function Z(c){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function c(e){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/wms/inventory/".concat(e),{method:"DELETE"}));case 1:case"end":return u.stop()}},c)})),B.apply(this,arguments)}function ee(c,e){return downLoadXlsx("/api/wms/inventory/export",{params:c},"inventory_".concat(new Date().getTime(),".xlsx"))}},6778:function(pe,w,r){r.d(w,{Z:function(){return J}});var f=r(75271),b=r(18402),k=r(94787),M=r(82187),N=r.n(M),V=r(71305),K=r(46323),j=r(5013),A=s=>{const{value:i,formatter:d,precision:n,decimalSeparator:l,groupSeparator:E="",prefixCls:g}=s;let m;if(typeof d=="function")m=d(i);else{const p=String(i),C=p.match(/^(-?)(\d*)(\.(\d+))?$/);if(!C||p==="-")m=p;else{const y=C[1];let x=C[2]||"0",_=C[4]||"";x=x.replace(/\B(?=(\d{3})+(?!\d))/g,E),typeof n=="number"&&(_=_.padEnd(n,"0").slice(0,n>0?n:0)),_&&(_=`${l}${_}`),m=[f.createElement("span",{key:"int",className:`${g}-content-value-int`},y,x),_&&f.createElement("span",{key:"decimal",className:`${g}-content-value-decimal`},_)]}}return f.createElement("span",{className:`${g}-content-value`},m)},D=r(38224),H=r(37951),$=r(83509);const L=s=>{const{componentCls:i,marginXXS:d,padding:n,colorTextDescription:l,titleFontSize:E,colorTextHeading:g,contentFontSize:m,fontFamily:p}=s;return{[i]:Object.assign(Object.assign({},(0,D.Wf)(s)),{[`${i}-title`]:{marginBottom:d,color:l,fontSize:E},[`${i}-skeleton`]:{paddingTop:n},[`${i}-content`]:{color:g,fontSize:m,fontFamily:p,[`${i}-content-value`]:{display:"inline-block",direction:"ltr"},[`${i}-content-prefix, ${i}-content-suffix`]:{display:"inline-block"},[`${i}-content-prefix`]:{marginInlineEnd:d},[`${i}-content-suffix`]:{marginInlineStart:d}}})}},I=s=>{const{fontSizeHeading3:i,fontSize:d}=s;return{titleFontSize:d,contentFontSize:i}};var Z=(0,H.I$)("Statistic",s=>{const i=(0,$.IX)(s,{});return[L(i)]},I),B=function(s,i){var d={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&i.indexOf(n)<0&&(d[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(s);l<n.length;l++)i.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(s,n[l])&&(d[n[l]]=s[n[l]]);return d},c=s=>{const{prefixCls:i,className:d,rootClassName:n,style:l,valueStyle:E,value:g=0,title:m,valueRender:p,prefix:C,suffix:y,loading:x=!1,formatter:_,precision:U,decimalSeparator:W=".",groupSeparator:re=",",onMouseEnter:ae,onMouseLeave:z}=s,se=B(s,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:G,direction:ie,className:le,style:oe}=(0,K.dj)("statistic"),S=G("statistic",i),[ue,de,Q]=Z(S),o=f.createElement(A,{decimalSeparator:W,groupSeparator:re,prefixCls:S,formatter:_,precision:U,value:g}),t=N()(S,{[`${S}-rtl`]:ie==="rtl"},le,d,n,de,Q),a=(0,V.Z)(se,{aria:!0,data:!0});return ue(f.createElement("div",Object.assign({},a,{className:t,style:Object.assign(Object.assign({},oe),l),onMouseEnter:ae,onMouseLeave:z}),m&&f.createElement("div",{className:`${S}-title`},m),f.createElement(j.Z,{paragraph:!1,loading:x,className:`${S}-skeleton`},f.createElement("div",{style:E,className:`${S}-content`},C&&f.createElement("span",{className:`${S}-content-prefix`},C),p?p(o):o,y&&f.createElement("span",{className:`${S}-content-suffix`},y)))))};const e=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function T(s,i){let d=s;const n=/\[[^\]]*]/g,l=(i.match(n)||[]).map(p=>p.slice(1,-1)),E=i.replace(n,"[]"),g=e.reduce((p,C)=>{let[y,x]=C;if(p.includes(y)){const _=Math.floor(d/x);return d-=_*x,p.replace(new RegExp(`${y}+`,"g"),U=>{const W=U.length;return _.toString().padStart(W,"0")})}return p},E);let m=0;return g.replace(n,()=>{const p=l[m];return m+=1,p})}function u(s,i){const{format:d=""}=i,n=new Date(s).getTime(),l=Date.now(),E=Math.max(n-l,0);return T(E,d)}var R=function(s,i){var d={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&i.indexOf(n)<0&&(d[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(s);l<n.length;l++)i.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(s,n[l])&&(d[n[l]]=s[n[l]]);return d};const te=1e3/30;function X(s){return new Date(s).getTime()}const Y=s=>{const{value:i,format:d="HH:mm:ss",onChange:n,onFinish:l}=s,E=R(s,["value","format","onChange","onFinish"]),g=(0,b.Z)(),m=f.useRef(null),p=()=>{l==null||l(),m.current&&(clearInterval(m.current),m.current=null)},C=()=>{const _=X(i);_>=Date.now()&&(m.current=setInterval(()=>{g(),n==null||n(_-Date.now()),_<Date.now()&&p()},te))};f.useEffect(()=>(C(),()=>{m.current&&(clearInterval(m.current),m.current=null)}),[i]);const y=(_,U)=>u(_,Object.assign(Object.assign({},U),{format:d})),x=_=>(0,k.Tm)(_,{title:void 0});return f.createElement(c,Object.assign({},E,{value:i,valueRender:x,formatter:y}))};var ne=f.memo(Y);c.Countdown=ne;var J=c}}]);
